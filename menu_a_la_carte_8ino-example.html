<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Examples &raquo; menu_a_la_carte.ino example | ModularSensors</title>
  <link rel="stylesheet" href="m-EnviroDIY+documentation.compiled.css" />
<link
  rel="stylesheet"
  id="gp-parent-style-css"
  href="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/style.css?ver=5.6"
  type="text/css"
  media="all"
/>
<link
  rel="stylesheet"
  id="ghostpool-style-css"
  href="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize-child/style.css?ver=5.6"
  type="text/css"
  media="all"
/>
<style id="ghostpool-style-inline-css" type="text/css">
  #gp-main-header {
    min-height: 80px;
  }
  .gp-desktop-scrolling #gp-main-header {
    min-height: 80px;
  }
  .gp-header-standard #gp-logo {
    padding: 19px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-logo {
    padding: 12.5px 0;
  }
  .gp-header-standard #gp-primary-main-nav .menu > li > a {
    padding: 30.5px 0;
  }
  .gp-header-standard #gp-cart-button,
  .gp-header-standard #gp-search-button,
  .gp-header-standard #gp-profile-button {
    padding: 31px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-primary-main-nav .menu > li > a {
    padding: 30.5px 0;
  }
  .gp-desktop-scrolling.gp-header-standard #gp-cart-button,
  .gp-desktop-scrolling.gp-header-standard #gp-search-button,
  .gp-desktop-scrolling.gp-header-standard #gp-profile-button {
    padding: 31px 0;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li:hover > a {
    color: #fff;
  }
  .gp-theme li:hover .gp-primary-dropdown-icon {
    color: #fff;
  }
  .gp-theme .sub-menu li:hover .gp-secondary-dropdown-icon {
    color: #fff;
  }
  .gp-header-centered #gp-cart-button,
  .gp-header-centered #gp-search-button,
  .gp-header-centered #gp-profile-button {
    line-height: 18px;
  }
  .gp-header-standard #gp-secondary-main-nav .menu > li > a {
    padding: 31.5px 0;
  }
  .gp-desktop-scrolling.gp-header-standard
    #gp-secondary-main-nav
    .menu
    > li
    > a {
    padding: 31.5px 0;
  }
  .gp-header-centered #gp-secondary-main-nav .menu > li > a {
    line-height: 16px;
  }
  .gp-active {
    color: #000;
  }
  .gp-theme .widget.buddypress div.item-options a.selected:hover {
    color: #26a9e0 !important;
  }
  .gp-theme #buddypress .activity-list .activity-content blockquote a {
    color: #26a9e0;
  }
  .gp-theme #buddypress .activity-list .activity-content blockquote a:hover {
    color: #000;
  }
  @media only screen and (max-width: 1082px) {
    .gp-header-standard #gp-primary-main-nav .menu > li > a {
      padding: 30.5px 0;
    }
    .gp-desktop-scrolling.gp-header-standard
      #gp-primary-main-nav
      .menu
      > li
      > a {
      padding: 30.5px 0;
    }
    .gp-header-standard #gp-cart-button,
    .gp-header-standard #gp-search-button,
    .gp-header-standard #gp-profile-button {
      padding: 31px 0;
    }
    .gp-desktop-scrolling.gp-header-standard #gp-cart-button,
    .gp-desktop-scrolling.gp-header-standard #gp-search-button,
    .gp-desktop-scrolling.gp-header-standard #gp-profile-button {
      padding: 31px 0;
    }
    .gp-header-standard #gp-secondary-main-nav .menu > li > a {
      padding: 31.5px 0;
    }
    .gp-desktop-scrolling.gp-header-standard
      #gp-secondary-main-nav
      .menu
      > li
      > a {
      padding: 31.5px 0;
    }
  }
  @media only screen and (max-width: 1023px) {
    .gp-responsive #gp-main-header {
      min-height: 80px;
    }
    .gp-responsive #gp-logo {
      padding: 26px 0;
    }
    .gp-responsive #gp-mobile-nav-button,
    .gp-responsive #gp-cart-button,
    .gp-responsive #gp-search-button,
    .gp-responsive #gp-profile-button {
      padding: 31px 0;
    }
  }
</style>
<link
  rel="stylesheet"
  id="fontawesome-css"
  href="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/fonts/font-awesome/css/font-awesome.min.css?ver=5.6"
  type="text/css"
  media="all"
/>
<link
  rel="stylesheet"
  id="fontawesome-css"
  href="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/fonts/font-awesome/css/font-awesome.min.css?ver=5.5"
  type="text/css"
  media="all"
/>
<link
  rel="stylesheet"
  id="gp-bp-css"
  href="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/css/bp.css?ver=5.6"
  type="text/css"
  media="all"
/>
<link
  rel="stylesheet"
  id="gp-bbp-css"
  href="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/css/bbpress.css?ver=5.6"
  type="text/css"
  media="all"
/>
<link
  rel="stylesheet"
  id="redux-google-fonts-socialize-css"
  href="https://fonts.googleapis.com/css?family=Roboto%3A300%2C400%2C500%7CRoboto+Slab%3A300&#038;subset=latin&#038;ver=5.6"
  type="text/css"
  media="all"
/>
<style type="text/css" id="wp-custom-css">
  #gp-content a {
    font-weight: 400;
    text-decoration: underline;
  }
  /*Make activity feed content darker*/
  #buddypress .activity-list .activity-content .activity-inner p {
    color: #000000;
  }
  /* Style print link */
  .pdfprnt-buttons > a > span {
    margin: 15px 0;
    padding-left: 0;
    text-decoration: underline;
  }
  /*Change caption text color and size*/
  .wp-caption-text {
    color: #333;
    font-size: 14px;
  }
  /*Collapse table borders */
  #gp-content table {
    border-collapse: collapse;
  }
  /*Add borders to Tableizer tables */
  .tableizer table,
  th,
  td {
    border: 1px solid #333;
  }
  /*Correct nested ordered list style*/
  #gp-content ol ol li {
    list-style-type: lower-latin;
  }
  /*Hide activity filter on activity page*/
  #activity-filter-select.last {
    display: none !important;
  }
  /* Add border */
  tr:last-child td {
    border-width: 1px;
  }
  /* Make forum title and description larger, remove link underlining */
  div.bsp-forum-content {
    font-size: 22px;
    line-height: 28px;
  }
  div.bbp-forum-content p {
    font-size: 16px;
    line-height: 22px;
  }
  #bbpress-forums a.bbp-forum-title {
    text-decoration: none;
  }
  .widgettitle {
    border-bottom: 3px solid #92d050 !important;
  }
  .bbp-author-name {
    font-size: 14px;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget {
    background-color: #fff;
    padding: 15px;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget
    > div
    > header {
    text-transform: uppercase;
    color: #000;
    border-bottom: 3px solid #92d050;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget
    > div
    > header
    > h3 {
    font-family: Roboto !important;
    font-size: 14px !important;
    font-weight: 500;
    padding-bottom: 11px;
  }
  #gp-sidebar-right
    > div
    > div.tribe-common.tribe-events.tribe-events-view.tribe-events-view--widget-events-list.tribe-events-widget
    > div
    > div.tribe-events-widget-events-list__view-more.tribe-common-b1.tribe-common-b2--min-medium
    > a {
    color: #26a9e0;
  }
  /*Hide disabled BuddyPress status updates on profile page, activity page*/
  #latest-update {
    display: none;
  }
  .item-title .update {
    display: none;
  }
</style>
<style type="text/css" title="dynamic-css" class="options-output">
  #footer-image img {
    margin-top: 10px;
    margin-right: 0;
    margin-bottom: 10px;
    margin-left: 0;
  }
  body {
    background-color: #f1f1f1;
  }
  body:not(.gp-full-page-page-header) #gp-page-wrapper,
  body:not(.gp-full-page-page-header) #gp-small-header .gp-container,
  .gp-homepage .widgettitle.gp-fancy-title:before {
    background-color: #e8e8e8;
  }
  body:not(.gp-full-page-page-header) #gp-small-header .gp-left-triangle {
    border-left-color: #e8e8e8;
  }
  body:not(.gp-full-page-page-header) #gp-small-header .gp-right-triangle {
    border-bottom-color: #e8e8e8;
  }
  #gp-content {
    background-color: #ffffff;
  }
  body {
    font-family: Roboto, "Arial Black", Gadget, sans-serif;
    line-height: 28px;
    font-weight: 300;
    font-style: normal;
    color: #000;
    font-size: 16px;
  }
  a {
    color: #26a9e0;
  }
  a:hover {
    color: #000;
  }
  h1 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 40px;
    font-weight: 300;
    font-style: normal;
    font-size: 36px;
  }
  h2 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 32px;
    font-weight: 300;
    font-style: normal;
    font-size: 28px;
  }
  h3,
  #tab-description h2,
  .woocommerce #comments h2,
  .woocommerce #reviews h3,
  .woocommerce .related h2,
  .woocommerce-checkout .woocommerce h2,
  .woocommerce-checkout .woocommerce h3 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 28px;
    font-weight: 300;
    font-style: normal;
    font-size: 24px;
  }
  h4 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 30px;
    font-weight: 300;
    font-style: normal;
    font-size: 20px;
  }
  h5 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 26px;
    font-weight: 300;
    font-style: normal;
    font-size: 18px;
  }
  h6 {
    font-family: Roboto, Arial, Helvetica, sans-serif;
    line-height: 24px;
    font-weight: 300;
    font-style: normal;
    font-size: 16px;
  }
  .gp-entry-meta .gp-post-meta-row-1,
  .gp-homepage #gp-content .gp-vc-element-3,
  .gp-homepage #gp-content .gp-vc-element-4,
  .gp-homepage #gp-content .gp-vc-element-5,
  .gp-homepage #gp-content .gp-vc-element-6,
  #comments .commentlist li .comment_container,
  .gp-loop-divider:before,
  .gp-recent-comments ul li,
  .gp-search {
    border-top: 1px solid #e0e0e0;
    border-bottom: 1px solid #e0e0e0;
  }
  .gp-entry-video-wrapper .gp-entry-meta .gp-post-meta-row-1,
  .gp-footer-widget .gp-recent-comments ul li {
    border-top: 1px solid #50504b;
    border-bottom: 1px solid #50504b;
  }
  #gp-main-header {
    background-color: #222222;
  }
  .gp-desktop-scrolling #gp-main-header {
    background-color: #222222;
  }
  #gp-primary-main-nav .menu > li,
  #gp-primary-main-nav .menu > li > a {
    font-family: Roboto;
    text-transform: none;
    line-height: 16px;
    font-weight: 300;
    font-style: normal;
    color: #ababab;
    font-size: 16px;
  }
  #gp-primary-main-nav .menu > li:hover > a,
  #gp-primary-main-nav .menu > li > a {
    color: #fff;
  }
  #gp-primary-main-nav .menu > li:hover > a:hover,
  #gp-primary-main-nav .menu > li > a:hover {
    color: #fff;
  }
  #gp-primary-main-nav .menu > li > a:hover,
  #gp-primary-main-nav .menu > li:hover > a {
    border-top: 3px solid #fff;
  }
  #gp-secondary-main-nav .menu > li,
  #gp-secondary-main-nav .menu > li > a {
    font-family: Roboto;
    text-transform: none;
    line-height: 14px;
    font-weight: 400;
    font-style: normal;
    color: #fff;
    font-size: 14px;
  }
  #gp-secondary-main-nav .menu > li:hover > a,
  #gp-secondary-main-nav .menu > li > a {
    color: #fff;
  }
  #gp-secondary-main-nav .menu > li:hover > a:hover,
  #gp-secondary-main-nav .menu > li > a:hover {
    color: #fff;
  }
  #gp-secondary-main-nav .menu > li > a:hover,
  #gp-secondary-main-nav .menu > li:hover > a {
    border-top: 3px solid #fff;
  }
  #gp-search-button,
  #gp-cart-button {
    color: #fff;
  }
  #gp-search-button:hover,
  #gp-cart-button:hover {
    color: #fff;
  }
  .gp-nav .sub-menu,
  .gp-nav .menu li .gp-menu-tabs li:hover,
  .gp-nav .menu li .gp-menu-tabs li.gp-selected,
  #gp-search-box {
    background-color: #fff;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li a:hover,
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li:hover > a {
    background-color: #353535;
  }
  .gp-nav .gp-standard-menu .sub-menu li,
  .gp-nav .gp-standard-menu .sub-menu li a,
  .gp-nav li.gp-megamenu .sub-menu li,
  .gp-nav .gp-megamenu .sub-menu li a {
    font-family: Roboto;
    font-weight: 300;
    font-style: normal;
    color: #000;
    font-size: 14px;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li a {
    color: #000;
  }
  .gp-nav .menu > .gp-standard-menu > .sub-menu > li a:hover {
    color: #fff;
  }
  .gp-nav .sub-menu li,
  #gp-dropdowncart .total,
  #gp-dropdowncart .buttons {
    border-top: 1px solid #e0e0e0;
  }
  .gp-nav .gp-megamenu > .sub-menu > li > a,
  .gp-nav .gp-megamenu > .sub-menu > li > span {
    color: #000000;
  }
  .gp-nav li.gp-megamenu a {
    color: #000;
  }
  .gp-nav li.gp-megamenu a:hover {
    color: #e93100;
  }
  .gp-primary-dropdown-icon {
    color: #fff;
  }
  .gp-primary-dropdown-icon:hover {
    color: #fff;
  }
  .gp-secondary-dropdown-icon {
    color: #000;
  }
  .gp-secondary-dropdown-icon:hover {
    color: #fff;
  }
  .gp-menu-tabs {
    background-color: #353535;
  }
  .gp-nav .menu li .gp-menu-tabs li {
    color: #ffffff;
  }
  .gp-nav .menu li .gp-menu-tabs li:hover,
  .gp-nav .menu li .gp-menu-tabs li.gp-selected {
    color: #e93100;
  }
  #gp-small-header #gp-top-nav {
    background-color: #26a9e0;
  }
  #gp-small-header .menu > li,
  #gp-small-header .menu > li > a {
    color: #ffffff;
  }
  #gp-small-header .menu > li:hover,
  #gp-small-header .menu > li > a:hover {
    color: #e0e0e0;
  }
  #gp-mobile-nav-button,
  #gp-profile-button,
  #gp-mobile-nav-close-button {
    color: #ffffff;
  }
  #gp-mobile-nav {
    background-color: #fff;
  }
  #gp-mobile-nav-close-button {
    background-color: #26a9e0;
  }
  #gp-mobile-nav li {
    color: #000000;
  }
  #gp-mobile-nav .menu li span,
  #gp-mobile-nav .menu li a {
    color: #000;
  }
  #gp-mobile-nav .menu li span:hover,
  #gp-mobile-nav .menu li a:hover {
    color: #000;
  }
  #gp-mobile-nav li a:hover {
    background-color: #f1f1f1;
  }
  #gp-mobile-nav li {
    border-top: 1px solid #e0e0e0;
  }
  #gp-mobile-nav .gp-megamenu > .sub-menu > li > a {
    color: #000000;
  }
  .gp-large-page-header .gp-page-header,
  .gp-fullwidth-page-header .gp-page-header,
  #gp-full-page-bg {
    background-color: #353535;
    background-repeat: no-repeat;
    background-size: cover;
    background-attachment: scroll;
    background-position: center center;
  }
  .gp-page-header h1,
  .gp-page-header h2 {
    font-family: Roboto;
    line-height: 90px;
    font-weight: normal;
    font-style: normal;
    color: #fff;
    font-size: 80px;
  }
  .gp-page-header .gp-container {
    height: 250px;
  }
  .gp-entry-title,
  .woocommerce .page-title,
  .woocommerce div.product .entry-title.product_title {
    font-family: Roboto;
    line-height: 46px;
    font-weight: 300;
    font-style: normal;
    color: #000;
    font-size: 40px;
  }
  .gp-subtitle {
    font-family: Roboto;
    line-height: 32px;
    font-weight: 300;
    font-style: normal;
    color: #888;
    font-size: 20px;
  }
  #gp-post-links a,
  .gp-pagination-arrows a.prev,
  .gp-pagination-arrows a.next,
  .gp-carousel-wrapper .flex-direction-nav a {
    color: #aaa;
  }
  #gp-post-links a:hover,
  .gp-pagination-arrows a.prev:hover,
  .gp-pagination-arrows a.next:hover,
  .gp-carousel-wrapper .flex-direction-nav a:hover {
    color: #333;
  }
  .gp-entry-meta,
  .gp-meta-comments a {
    color: #aaaaaa;
  }
  .gp-entry-cats,
  .gp-entry-cats a,
  .gp-entry-cats a:hover {
    color: #ffffff;
  }
  .gp-entry-cats {
    background-color: #92d050;
  }
  .gp-entry-tags a,
  .gp-entry-tags a:hover {
    color: #ffffff;
  }
  .gp-entry-tags a {
    background-color: #353535;
  }
  .gp-author-info,
  #gp-post-navigation #gp-share-icons {
    background-color: #353535;
  }
  .gp-author-info,
  .gp-author-info a,
  #gp-post-navigation #gp-share-icons h3 {
    line-height: 24px;
    color: #fff;
    font-size: 14px;
  }
  .gp-author-info a {
    color: #b1b1b1;
  }
  .gp-author-info a:hover {
    color: #fff;
  }
  .gp-entry-video-wrapper {
    background-color: #353535;
  }
  .gp-entry-video-wrapper .gp-entry-title {
    color: #ffffff;
  }
  .gp-entry-video-wrapper .gp-video-description {
    color: #777777;
  }
  blockquote {
    background-color: #191919;
  }
  blockquote,
  blockquote a,
  blockquote a:hover {
    font-family: "Roboto Slab";
    line-height: 38px;
    font-weight: 300;
    font-style: normal;
    color: #fff;
    font-size: 24px;
  }
  .gp-loop-title {
    line-height: 22px;
    font-weight: 400;
    font-size: 19px;
  }
  .gp-blog-large .gp-loop-title {
    line-height: 46px;
    font-weight: 200;
    font-size: 40px;
  }
  .gp-loop-title a,
  .bboss_search_item .entry-title a {
    color: #000;
  }
  .gp-loop-title a:hover,
  .bboss_search_item .entry-title a:hover {
    color: #26a9e0;
  }
  .gp-loop-text,
  .gp-login-wrapper p {
    color: #545454;
  }
  .gp-loop-meta,
  .gp-loop-meta a,
  #gp-breadcrumbs,
  #gp-breadcrumbs a,
  .woocommerce .woocommerce-breadcrumb a,
  .woocommerce .woocommerce-breadcrumb,
  .comment-text time,
  div.bbp-breadcrumb,
  div.bbp-breadcrumb a,
  .gp-statistics-wrapper .gp-stat-title,
  .widget_display_replies ul li div,
  .widget_display_topics ul li div {
    color: #545454;
  }
  .gp-loop-cats,
  .gp-loop-cats a,
  .gp-loop-cats a:hover {
    color: #545454;
  }
  .gp-loop-tags,
  .gp-loop-tags a,
  .gp-loop-tags a:hover {
    color: #26a9e0;
  }
  .gp-blog-masonry section,
  section.sticky {
    background-color: #f8f8f8;
  }
  ul.page-numbers .page-numbers {
    background-color: #92d050;
  }
  ul.page-numbers .page-numbers:hover,
  ul.page-numbers .page-numbers.current,
  ul.page-numbers > span.page-numbers {
    background-color: #353535;
  }
  ul.page-numbers .page-numbers {
    color: #ffffff;
  }
  .widgettitle {
    font-family: Roboto;
    line-height: 18px;
    font-weight: 500;
    font-style: normal;
    color: #000;
    font-size: 14px;
  }
  .widgettitle a {
    color: #26a9e0;
  }
  .widgettitle a:hover {
    color: #000;
  }
  .gp-sidebar .widgettitle,
  .widgettitle.gp-standard-title {
    border-bottom: 3px solid #92d050;
  }
  .widget,
  .gp-vc-element,
  .widgettitle.gp-fancy-title .gp-widget-title,
  .widgettitle.gp-fancy-title .gp-element-icon,
  .widget .woocommerce {
    background-color: #ffffff;
  }
  .widgettitle.gp-fancy-title .gp-triangle {
    border-left-color: #ffffff;
  }
  input,
  textarea,
  .gp-search-bar,
  .gp-theme #buddypress .dir-search input[type="search"],
  .gp-theme #buddypress .dir-search input[type="text"],
  .gp-theme #buddypress .groups-members-search input[type="search"],
  .gp-theme #buddypress .standard-form input[type="color"],
  .gp-theme #buddypress .standard-form input[type="date"],
  .gp-theme #buddypress .standard-form input[type="datetime-local"],
  .gp-theme #buddypress .standard-form input[type="datetime"],
  .gp-theme #buddypress .standard-form input[type="email"],
  .gp-theme #buddypress .standard-form input[type="month"],
  .gp-theme #buddypress .standard-form input[type="number"],
  .gp-theme #buddypress .standard-form input[type="password"],
  .gp-theme #buddypress .standard-form input[type="range"],
  .gp-theme #buddypress .standard-form input[type="search"],
  .gp-theme #buddypress .standard-form input[type="tel"],
  .gp-theme #buddypress .standard-form input[type="text"],
  .gp-theme #buddypress .standard-form input[type="time"],
  .gp-theme #buddypress .standard-form input[type="url"],
  .gp-theme #buddypress .standard-form input[type="week"],
  .gp-theme #buddypress .standard-form textarea,
  .gp-theme #buddypress div.activity-comments form .ac-textarea,
  .gp-theme #buddypress form#whats-new-form textarea {
    background-color: #fafafa;
  }
  input,
  textarea,
  .gp-search-bar,
  .gp-login-wrapper .gp-login-icon,
  .gp-login-wrapper .gp-password-icon,
  .gp-login-wrapper .gp-email-icon,
  .gp-theme #buddypress .dir-search input[type="search"],
  .gp-theme #buddypress .dir-search input[type="text"],
  .gp-theme #buddypress .groups-members-search input[type="search"],
  .gp-theme #buddypress .standard-form input[type="color"],
  .gp-theme #buddypress .standard-form input[type="date"],
  .gp-theme #buddypress .standard-form input[type="datetime-local"],
  .gp-theme #buddypress .standard-form input[type="datetime"],
  .gp-theme #buddypress .standard-form input[type="email"],
  .gp-theme #buddypress .standard-form input[type="month"],
  .gp-theme #buddypress .standard-form input[type="number"],
  .gp-theme #buddypress .standard-form input[type="password"],
  .gp-theme #buddypress .standard-form input[type="range"],
  .gp-theme #buddypress .standard-form input[type="search"],
  .gp-theme #buddypress .standard-form input[type="tel"],
  .gp-theme #buddypress .standard-form input[type="text"],
  .gp-theme #buddypress .standard-form input[type="time"],
  .gp-theme #buddypress .standard-form input[type="url"],
  .gp-theme #buddypress .standard-form input[type="week"],
  .gp-theme #buddypress .standard-form textarea,
  .gp-theme #buddypress div.activity-comments form .ac-textarea,
  .bb-global-search-ac.ui-autocomplete {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
  }
  input,
  textarea,
  .gp-search-bar,
  .gp-theme #buddypress .dir-search input[type="search"],
  .gp-theme #buddypress .dir-search input[type="text"],
  .gp-theme #buddypress .groups-members-search input[type="search"],
  .gp-theme #buddypress .groups-members-search input[type="text"],
  .gp-theme #buddypress .standard-form input[type="color"],
  .gp-theme #buddypress .standard-form input[type="date"],
  .gp-theme #buddypress .standard-form input[type="datetime-local"],
  .gp-theme #buddypress .standard-form input[type="datetime"],
  .gp-theme #buddypress .standard-form input[type="email"],
  .gp-theme #buddypress .standard-form input[type="month"],
  .gp-theme #buddypress .standard-form input[type="number"],
  .gp-theme #buddypress .standard-form input[type="password"],
  .gp-theme #buddypress .standard-form input[type="range"],
  .gp-theme #buddypress .standard-form input[type="search"],
  .gp-theme #buddypress .standard-form input[type="tel"],
  .gp-theme #buddypress .standard-form input[type="text"],
  .gp-theme #buddypress .standard-form input[type="time"],
  .gp-theme #buddypress .standard-form input[type="url"],
  .gp-theme #buddypress .standard-form input[type="week"],
  .gp-theme #buddypress .standard-form textarea,
  .gp-theme #buddypress div.activity-comments form .ac-textarea,
  .gp-theme #buddypress form#whats-new-form textarea {
    color: #000000;
  }
  select,
  .gp-theme #buddypress .standard-form select,
  .gp-theme #buddypress form#whats-new-form #whats-new-options select,
  #buddypress .standard-form select:focus {
    background-color: #353535;
  }
  select,
  .gp-theme #buddypress .standard-form select,
  .gp-theme #buddypress form#whats-new-form #whats-new-options select {
    color: #ffffff;
  }
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  button,
  .button,
  .gp-theme #buddypress .comment-reply-link,
  .gp-notification-counter,
  #gp-cart-counter,
  .gp-theme #buddypress a.button,
  .gp-theme #buddypress button,
  .gp-theme #buddypress div.generic-button a,
  .gp-theme #buddypress input[type="button"],
  .gp-theme #buddypress input[type="reset"],
  .gp-theme #buddypress input[type="submit"],
  .gp-theme #buddypress ul.button-nav li a,
  a.bp-title-button,
  .gp-theme #buddypress .activity-list #reply-title small a span,
  .gp-theme #buddypress .activity-list a.bp-primary-action span,
  .tribe-events-calendar thead th,
  #tribe-events .tribe-events-button,
  #tribe-events .tribe-events-button:hover,
  #tribe_events_filters_wrapper input[type="submit"],
  .tribe-events-button,
  .tribe-events-button.tribe-active:hover,
  .tribe-events-button.tribe-inactive,
  .tribe-events-button:hover,
  .tribe-events-calendar
    td.tribe-events-present
    div[id*="tribe-events-daynum-"],
  .tribe-events-calendar
    td.tribe-events-present
    div[id*="tribe-events-daynum-"]
    > a,
  #tribe-bar-form .tribe-bar-submit input[type="submit"],
  .woocommerce #respond input#submit.alt,
  .woocommerce a.button.alt,
  .woocommerce button.button.alt,
  .woocommerce input.button.alt,
  #gp-dropdowncart .woocommerce a.button {
    background-color: #26a9e0;
  }
  input[type="button"]:hover,
  input[type="submit"]:hover,
  input[type="reset"]:hover,
  button:hover,
  .button:hover,
  .gp-theme #buddypress .comment-reply-link:hover,
  .gp-theme #buddypress a.button:hover,
  .gp-theme #buddypress button:hover,
  .gp-theme #buddypress div.generic-button a:hover,
  .gp-theme #buddypress input[type="button"]:hover,
  .gp-theme #buddypress input[type="reset"]:hover,
  .gp-theme #buddypress input[type="submit"]:hover,
  .gp-theme #buddypress ul.button-nav li a:hover,
  a.bp-title-button:hover,
  .gp-theme #buddypress .activity-list #reply-title small a:hover span,
  .gp-theme #buddypress .activity-list a.bp-primary-action:hover span,
  .woocommerce #respond input#submit.alt:hover,
  .woocommerce a.button.alt:hover,
  .woocommerce button.button.alt:hover,
  .woocommerce input.button.alt:hover,
  #gp-dropdowncart .woocommerce a.button:hover {
    background-color: #353535;
  }
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  button,
  .button,
  a.gp-notification-counter,
  a.gp-notification-counter:hover,
  #gp-cart-counter:hover,
  .gp-theme #buddypress .comment-reply-link,
  .gp-theme #buddypress a.button,
  .gp-theme #buddypress button,
  .gp-theme #buddypress div.generic-button a,
  .gp-theme #buddypress input[type="button"],
  .gp-theme #buddypress input[type="reset"],
  .gp-theme #buddypress input[type="submit"],
  .gp-theme #buddypress ul.button-nav li a,
  a.bp-title-button,
  .gp-theme #buddypress .activity-list #reply-title small a span,
  .gp-theme #buddypress .activity-list a.bp-primary-action span,
  #gp-dropdowncart .woocommerce a.button {
    color: #ffffff;
  }
  input[type="button"]:hover,
  input[type="submit"]:hover,
  input[type="reset"]:hover,
  button,
  .button:hover,
  .gp-theme #buddypress .comment-reply-link:hover,
  .gp-theme #buddypress a.button:hover,
  .gp-theme #buddypress button:hover,
  .gp-theme #buddypress div.generic-button a:hover,
  .gp-theme #buddypress input[type="button"]:hover,
  .gp-theme #buddypress input[type="reset"]:hover,
  .gp-theme #buddypress input[type="submit"]:hover,
  .gp-theme #buddypress ul.button-nav li a:hover,
  a.bp-title-button:hover,
  .gp-theme #buddypress .activity-list #reply-title small a span,
  .gp-theme #buddypress .activity-list a.bp-primary-action span,
  #gp-dropdowncart .woocommerce a.button:hover {
    color: #ffffff;
  }
  #gp-footer {
    background-color: #353535;
  }
  .gp-footer-widget .widgettitle {
    font-family: Roboto;
    line-height: 20px;
    font-weight: 300;
    font-style: normal;
    color: #fff;
    font-size: 16px;
  }
  .gp-footer-widget {
    font-family: Roboto;
    line-height: 20px;
    font-weight: 300;
    font-style: normal;
    color: #ffffff;
    font-size: 14px;
  }
  .gp-footer-widget a {
    color: #f9bd16;
  }
  .gp-footer-widget a:hover {
    color: #b1b1b1;
  }
  #gp-copyright {
    background-color: #353535;
  }
  #gp-copyright {
    border-top: 1px solid #444;
  }
  #gp-copyright {
    color: #777777;
  }
  #gp-copyright a {
    color: #999;
  }
  #gp-copyright a:hover {
    color: #e0e0e0;
  }
  #gp-to-top {
    background-color: #26a9e0;
  }
  #gp-to-top {
    color: #ffffff;
  }
</style>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery.min.js?ver=3.5.1"
  id="jquery-core-js"
></script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2"
  id="jquery-migrate-js"
></script>  <link rel="icon" href="MS_FavIcon.png" type="image/png" />
  <link rel="prev" href="logging_to__thing_speak_8ino-example.html" />
  <link rel="next" href="simple_logging_8ino-example.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#cb4b16" />
</head>

<body class="bp-legacy page-template-default page page-id-2063 page-parent gp-theme gp-responsive gp-wide-layout gp-retina gp-normal-scrolling gp-back-to-top-all gp-relative-header gp-header-standard gp-cart-disabled gp-search-all gp-profile-disabled gp-small-header-all gp-standard-page-header gp-right-sidebar gp-sticky-sidebars wpb-js-composer js-comp-ver-6.2.0 vc_responsive no-js">
	<div id="gp-site-wrapper">

  <nav id="gp-mobile-nav">
    <div id="gp-mobile-nav-close-button"></div>
    <ul class="menu">
        <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-custom menu-item-object-custom menu-item-has-children">
            <a class="menu-link main-menu-link" href="index.html">About</a>
          <ul class="sub-menu menu-odd menu-depth-1">
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a href="index.html#data_receivers">Data Endpoints</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a href="index.html#supported_sensors">Supported Sensors</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a href="index.html#modems">Supported Cellular/Wifi Modules</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a href="index.html#contributing">Contributing</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a href="index.html#license">License</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a href="index.html#acknowledgments">Acknowledgments</a>
              </li>
          </ul>
        </li>
        <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-custom menu-item-object-custom menu-item-has-children">
            <a class="menu-link main-menu-link" href="page_getting_started.html">Getting Started</a>
          <ul class="sub-menu menu-odd menu-depth-1">
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_getting_started.html">Getting Started</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_library_dependencies.html">Library Dependencies</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_physical_dependencies.html">Physical Dependencies</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_library_terminology.html">Library Terminology</a>
              </li>
          </ul>
        </li>
        <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-custom menu-item-object-custom menu-item-has-children">
            <a class="menu-link main-menu-link" href="page_faq.html">FAQs</a>
          <ul class="sub-menu menu-odd menu-depth-1">
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_processor_compatibility.html">Processor Compatibility</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_arduino_streams.html">Arduino Streams and Software Serial</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_power_parasites.html">Power Draw over Data Lines</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_memory_use.html">Decreasing Memory Footprint</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_code_debugging.html">In-Library Debugging</a>
              </li>
              <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                <a class="menu-link sub-menu-link" href="page_for_developers.html">Developer Setup</a>
              </li>
          </ul>
        </li>
          <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="modules.html">Modules</a>          </li>
          <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="annotated.html">Classes</a>          </li>
          <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="files.html">Source Files</a>          </li>
          <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="page_the_examples.html">Examples</a>          </li>
          <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="pages.html">More</a>          </li>
    </ul>
  </nav><div id="gp-mobile-nav-bg"></div>

  <div id="gp-page-wrapper">

    <header id="gp-main-header">
      <div class="gp-container">
        <div id="gp-logo">
          <a href="index.html" title="ModularSensors">
            <img
              src="ModularSensors_ubuntu_264x55.png"
              alt="ModularSensors"
              width="264"
              height="55"
              class="gp-desktop-logo"
            />
            <img
              src="ModularSensors_ubuntu_264x55.png"
              alt="ModularSensors"
              width="264"
              height="55"
              class="gp-scrolling-logo"
            />
            <img
              src="ModularSensors_ubuntu_264x55.png"
              alt="ModularSensors"
              width="132"
              height="28"
              class="gp-mobile-logo"
            />
          </a>
        </div>

        <a id="gp-mobile-nav-button"></a>

        <nav id="gp-main-nav" class="gp-nav">
          <nav id="gp-primary-main-nav">
              <ul id="menu-main-menu-1" class="menu">
                <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-custom menu-item-object-custom menu-item-has-children">
                    <a class="menu-link main-menu-link" href="index.html">About</a>
                  <ul class="sub-menu menu-odd menu-depth-1">
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a href="index.html#data_receivers">Data Endpoints</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a href="index.html#supported_sensors">Supported Sensors</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a href="index.html#modems">Supported Cellular/Wifi Modules</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a href="index.html#contributing">Contributing</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a href="index.html#license">License</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a href="index.html#acknowledgments">Acknowledgments</a>
                      </li>
                  </ul>
                </li>
                <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-custom menu-item-object-custom menu-item-has-children">
                    <a class="menu-link main-menu-link" href="page_getting_started.html">Getting Started</a>
                  <ul class="sub-menu menu-odd menu-depth-1">
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_getting_started.html">Getting Started</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_library_dependencies.html">Library Dependencies</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_physical_dependencies.html">Physical Dependencies</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_library_terminology.html">Library Terminology</a>
                      </li>
                  </ul>
                </li>
                <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-custom menu-item-object-custom menu-item-has-children">
                    <a class="menu-link main-menu-link" href="page_faq.html">FAQs</a>
                  <ul class="sub-menu menu-odd menu-depth-1">
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_processor_compatibility.html">Processor Compatibility</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_arduino_streams.html">Arduino Streams and Software Serial</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_power_parasites.html">Power Draw over Data Lines</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_memory_use.html">Decreasing Memory Footprint</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_code_debugging.html">In-Library Debugging</a>
                      </li>
                      <li class="gp-standard-menu gp-menu-link gp-show-all sub-menu-item menu-item-odd menu-item-depth-1 menu-item menu-item-param-post_type menu-item-object-page">
                        <a class="menu-link sub-menu-link" href="page_for_developers.html">Developer Setup</a>
                      </li>
                  </ul>
                </li>
                  <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="modules.html">Modules</a>                  </li>
                  <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="annotated.html">Classes</a>                  </li>
                  <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="files.html">Source Files</a>                  </li>
                  <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="page_the_examples.html">Examples</a>                  </li>
                  <li class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 menu-item menu-item-param-post_type menu-item-object-page">
<a class="menu-link main-menu-link" href="pages.html">More</a>                  </li>
              </ul>
          </nav>

          <div id="gp-search">
            <div id="m-search-button" class="m-show-m" onclick="return showSearch()">
            </div>
					</div>



          <nav id="gp-secondary-main-nav"></nav>
        </nav></div>
    </header><header id="gp-small-header">
      <div class="gp-container">
        <div class="gp-left-triangle"></div>
        <div class="gp-right-triangle"></div>

        <nav id="gp-top-nav" class="gp-nav">
          <div id="gp-left-top-nav">
            <p style="color:#fff">An Arduino library to give environmental sensors a common interface of functions for use with Arduino-framework dataloggers, such as the EnviroDIY Mayfly.</p>
          </div>

          <div id="gp-right-top-nav">
            <ul id="menu-icon-links" class="menu">
              <li
                class="gp-standard-menu gp-columns-1 gp-show-all main-menu-item menu-item-even menu-item-depth-0 fa fa-github menu-item menu-item-param-custom menu-item-object-custom"
              >
                <a
                  title="See it on GitHub"
                  href="https://github.com/EnviroDIY/ModularSensors"
                  class="menu-link main-menu-link"
                  >See the source code on GitHub</a
                >
              </li>
            </ul>
          </div>

        </nav>
      </div>
    </header><div id="gp-fixed-header-padding"></div>

    <div class="m-doc-search" id="search">
      <a href="#!" onclick="return hideSearch()"></a>
      <div id="gp-header-area">
        <div class="gp-container">
          <div style="background-color:#fff;padding:20px;">
            <div class="m-doc-search-header m-text m-small">
              <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
              <div id="search-symbolcount">&hellip;</div>
            </div>
            <div class="m-doc-search-content">
              <form>
                <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
              </form>
              <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
              <div id="search-help" class="m-text m-dim m-text-center">
                <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
              </div>
              <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
              <ul id="search-results"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="search-v1.js"></script>
    <script src="searchdata-v1.js" async="async"></script>

    <div class="gp-clear"></div>

    <div id="gp-content-wrapper" class="gp-container">
      <div id="gp-inner-container">
          <div id="gp-content">

            <main>
              <article>
                <div class="m-container m-container-inflatable">
                  <div class="m-row">
                    <div class="m-col-l-10 m-push-l-1">
          <span class="m-breadcrumb">
            <a href="index.html">
              ModularSensors
            </a>  &gt; <wbr/>
          </span>
                    <span class="m-breadcrumb">
          <a href="page_the_examples.html">Examples</a> &gt; <wbr/>
          </span>
          <span class="m-breadcrumb">
            menu_a_la_carte.ino
          </span>

        <header class="gp-entry-header">
          <h1 class="gp-entry-title" itemprop="headline">
          menu_a_la_carte.ino <span class="m-thin">example</span>
          </h1>
        </header>
        <div class="m-block m-default">
          <ul>
            <li><a href="#xample_menu">A la carte Example</a></li>
            <li><a href="#xample_menu_walk">Walking Through the Code</a></li>
            <li>
              <a href="#enu_defines-and-includes">Defines and Includes</a>
              <ul>
                              <li><a href="#enu_defines">Defines for the Arduino IDE</a></li>
                <li><a href="#enu_includes">Library Includes</a></li>
              </ul>
            </li>
            <li>
              <a href="#enu_logger_and_modem_settings">Logger Settings</a>
              <ul>
                              <li>
                  <a href="#enu_serial_ports">Creating Extra Serial Ports</a>
                  <ul>
                                  <li>
                      <a href="#enu_avr_serial_ports">AVR Boards</a>
                      <ul>
                                      <li><a href="#enu_altsoftseral">AltSoftSerial</a></li>
                        <li><a href="#enu_neoswserial">NeoSWSerial</a></li>
                        <li><a href="#enu_softwareseraial">SoftwareSerial with External Interrupts</a></li>
                        <li><a href="#enu_softwarewire">Software I2C/Wire</a></li>
                      </ul>
                    </li>
                    <li><a href="#enu_samd_serial_ports">SAMD Boards</a></li>
                  </ul>
                </li>
                <li><a href="#enu_serial_func">Assigning Serial Port Functionality</a></li>
                <li><a href="#enu_logger_opts">Logging Options</a></li>
              </ul>
            </li>
            <li>
              <a href="#enu_modem_settings">Wifi/Cellular Modem Options</a>
              <ul>
                              <li><a href="#enu_xbee_cell_trans">Digi XBee Cellular</a></li>
                <li>
                  <a href="#enu_xbee_ltem_by">Digi XBee3 LTE-M Bypass</a>
                  <ul>
                                  <li><a href="#enu_digi_3gby">Digi XBee 3G - Bypass Mode</a></li>
                  </ul>
                </li>
                <li><a href="#enu_xbee_wifi">Digi XBee S6B Wifi</a></li>
                <li><a href="#enu_esp">Espressif ESP8266</a></li>
                <li><a href="#enu_bg96">Quectel BG96</a></li>
                <li><a href="#enu_monarch">Sequans Monarch</a></li>
                <li><a href="#enu_sim800">SIMCom SIM800</a></li>
                <li><a href="#enu_sim7000">SIMCom SIM7000</a></li>
                <li><a href="#enu_gprsbee">Sodaq GPRSBee</a></li>
                <li><a href="#enu_ubeer410">u-blox SARA R410M</a></li>
                <li><a href="#enu_ubeeu201">u-blox SARA U201</a></li>
                <li><a href="#enu_modem_vars">Modem Measured Variables</a></li>
              </ul>
            </li>
            <li>
              <a href="#enu_sensors_and_vars">Sensors and Measured Variables</a>
              <ul>
                              <li><a href="#enu_processor_sensor">The processor as a sensor</a></li>
                <li><a href="#enu_ds3231">Maxim DS3231 RTC as a sensor</a></li>
                <li><a href="#enu_am2315">AOSong AM2315</a></li>
                <li><a href="#enu_dht">AOSong DHT</a></li>
                <li><a href="#enu_sq212">Apogee SQ-212 Quantum Light Sensor</a></li>
                <li>
                  <a href="#enu_atlas_sensors">Atlas Scientific EZO Circuits</a>
                  <ul>
                                  <li><a href="#enu_atlas_co2">Atlas Scientific EZO-CO2 Embedded NDIR Carbon Dioxide Sensor</a></li>
                    <li><a href="#enu_atlas_do">Atlas Scientific EZO-DO Dissolved Oxygen Sensor</a></li>
                    <li><a href="#enu_atlas_orp">Atlas Scientific EZO-ORP Oxidation/Reduction Potential Sensor</a></li>
                    <li><a href="#enu_atlas_ph">Atlas Scientific EZO-pH Sensor</a></li>
                    <li><a href="#enu_atlas_rtd">Atlas Scientific EZO-RTD Temperature Sensor</a></li>
                    <li><a href="#enu_atlas_ec">Atlas Scientific EZO-EC Conductivity Sensor</a></li>
                  </ul>
                </li>
                <li><a href="#enu_bme280">Bosch BME280 Environmental Sensor</a></li>
                <li><a href="#enu_obs3">Campbell OBS3+ Analog Turbidity Sensor</a></li>
                <li><a href="#enu_es2">Decagon ES2 Conductivity and Temperature Sensor</a></li>
                <li><a href="#enu_ext_volt">External Voltage via TI ADS1x15</a></li>
                <li><a href="#enu_mpl115a2">Freescale Semiconductor MPL115A2 Miniature I2C Digital Barometer</a></li>
                <li>
                  <a href="#enu_keller_sensors">Keller RS485/Modbus Water Level Sensors</a>
                  <ul>
                                  <li><a href="#enu_nanolevel">Keller Nanolevel Level Transmitter</a></li>
                    <li><a href="#enu_acculevel">Keller Acculevel High Accuracy Submersible Level Transmitter</a></li>
                  </ul>
                </li>
                <li><a href="#enu_maxbotics">Maxbotix HRXL Ultrasonic Range Finder</a></li>
                <li><a href="#enu_ds18">Maxim DS18 One Wire Temperature Sensor</a></li>
                <li><a href="#enu_ms5803">Measurement Specialties MS5803-14BA Pressure Sensor</a></li>
                <li>
                  <a href="#enu_meter_sensors">Meter SDI-12 Sensors</a>
                  <ul>
                                  <li><a href="#enu_fivetm">Meter ECH2O Soil Moisture Sensor</a></li>
                    <li><a href="#enu_hydros21">Meter Hydros 21 Conductivity, Temperature, and Depth Sensor</a></li>
                    <li><a href="#enu_teros">Meter Teros 11 Soil Moisture Sensor</a></li>
                  </ul>
                </li>
                <li><a href="#enu_pt_redox">PaleoTerra Redox Sensors</a></li>
                <li><a href="#enu_i2c_rain">Trinket-Based Tipping Bucket Rain Gauge</a></li>
                <li><a href="#enu_tally">Northern Widget Tally Event Counter</a></li>
                <li><a href="#enu_ina219">TI INA219 High Side Current Sensor</a></li>
                <li><a href="#enu_cyclops">Turner Cyclops-7F Submersible Fluorometer</a></li>
                <li><a href="#enu_analog_cond">Analog Electrical Conductivity using the Processor&#x27;s Analog Pins</a></li>
                <li>
                  <a href="#enu_yosemitech_sensors">Yosemitech RS485/Modbus Environmental Sensors</a>
                  <ul>
                                  <li><a href="#enu_y504">Yosemitech Y504 Dissolved Oxygen Sensor</a></li>
                    <li><a href="#enu_y510">Yosemitech Y510 Turbidity Sensor</a></li>
                    <li><a href="#enu_y511">Yosemitech Y511 Turbidity Sensor with Wiper</a></li>
                    <li><a href="#enu_y514">Yosemitech Y514 Chlorophyll Sensor</a></li>
                    <li><a href="#enu_y520">Yosemitech Y520 Conductivity Sensor</a></li>
                    <li><a href="#enu_y532">Yosemitech Y532 pH Sensor</a></li>
                    <li><a href="#enu_y533">Yosemitech Y533 Oxidation Reduction Potential (ORP) Sensor</a></li>
                    <li><a href="#enu_y550">Yosemitech Y550 Carbon Oxygen Demand (COD) Sensor with Wiper</a></li>
                    <li><a href="#enu_y4000">Yosemitech Y4000 Multi-Parameter Sonde</a></li>
                  </ul>
                </li>
                <li><a href="#enu_dopto">Zebra Tech D-Opto Dissolved Oxygen Sensor</a></li>
              </ul>
            </li>
            <li><a href="#enu_calc_vars">Calculated Variables</a></li>
            <li>
              <a href="#enu_create_objs">Creating the array, logger, publishers</a>
              <ul>
                              <li>
                  <a href="#enu_variable_array">The variable array</a>
                  <ul>
                                  <li><a href="#enu_variables_create_in_array">Creating Variables within an Array</a></li>
                    <li><a href="#enu_variables_separate_uuids">Using Already-Created Variables</a></li>
                    <li><a href="#enu_variables_pre_named">Using Already-Created Variables</a></li>
                  </ul>
                </li>
                <li><a href="#enu_logger_obj">The Logger Object</a></li>
                <li>
                  <a href="#enu_data_publisher">Data Publisher</a>
                  <ul>
                                  <li><a href="#enu_mmw_publisher">Monitor My Watershed</a></li>
                    <li><a href="#enu_dh_publisher">DreamHost</a></li>
                    <li><a href="#enu_thingspeak_publisher">ThingSpeak</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#enu_working">Extra Working Functions</a></li>
            <li>
              <a href="#enu_setup">Arduino Setup Function</a>
              <ul>
                              <li><a href="#enu_setup_open">Starting the Function</a></li>
                <li><a href="#enu_setup_wait">Wait for USB</a></li>
                <li><a href="#enu_setup_prints">Printing a Hello</a></li>
                <li><a href="#enu_setup_serial_interrupts">Serial Interrupts</a></li>
                <li><a href="#enu_setup_serial_begin">Serial Begin</a></li>
                <li><a href="#enu_setup_pin_periph">SAMD Pin Peripherals</a></li>
                <li><a href="#enu_setup_flash">Flash the LEDs</a></li>
                <li><a href="#enu_setup_logger">Begin the Logger</a></li>
                <li><a href="#enu_setup_sensors">Setup the Sensors</a></li>
                <li>
                  <a href="#enu_setup_modem">Custom Modem Setup</a>
                  <ul>
                                  <li><a href="#enu_setup_esp">ESP8266 Baud Rate</a></li>
                    <li><a href="#enu_setup_skywire">Skywire Pin Inversions</a></li>
                    <li><a href="#enu_setup_xbeec_carrier">XBee Cellular Carrier</a></li>
                    <li><a href="#etup_r4_carrrier">SARA R4 Cellular Carrier</a></li>
                  </ul>
                </li>
                <li><a href="#enu_setup_rtc">Sync the Real Time Clock</a></li>
                <li><a href="#enu_setup_file">Setup a File on the SD card</a></li>
                <li><a href="#enu_setup_sleep">Sleep until the First Data Collection Time</a></li>
                <li><a href="#enu_setup_done">Setup Complete</a></li>
              </ul>
            </li>
            <li>
              <a href="#enu_loop">Arduino Loop Function</a>
              <ul>
                              <li><a href="#enu_simple_loop">A Typical Loop</a></li>
                <li><a href="#enu_complex_loop">A Complex Loop</a></li>
              </ul>
            </li>
            <li><a href="#xample_menu_pio_config">PlatformIO Configuration</a></li>
            <li><a href="#xample_menu_code">The Complete Code</a></li>
          </ul>
        </div>
        <section id="xample_menu"><h2>A la carte Example</h2><p>This shows most of the functionality of the library at once. It has code in it for every possible sensor and modem and for both AVR and SAMD boards. This example should <em>never</em> be used directly; it is intended to document all possibilities and to verify compilating.</p><p>To create your own code, I recommend starting from a much simpler targeted example, like the <a href="https://github.com/EnviroDIY/ModularSensors/tree/master/examples/logging_to_MMW">Logging to MMW</a> example, and then adding to it based on only the parts of this menu example that apply to you.</p><hr/></section><section id="xample_menu_walk"><h2>Walking Through the Code</h2><p><em>NOTE: This walkthrough is intended to be viewed here: <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html">https://envirodiy.github.io/ModularSensors/menu_<wbr />a_<wbr />la_<wbr />carte_<wbr />8ino-example.html</a></em></p><p>WARNING: This example is long. This walk-through is really, really long. Make use of the table of contents to skip to the parts you need.</p><hr/></section><section id="enu_defines-and-includes"><h2>Defines and Includes</h2><section id="enu_defines"><h3>Defines for the Arduino IDE</h3><p>The top few lines of the examples set defines of buffer sizes and yields needed for the Arduino IDE. That IDE read any defines within the top few lines and applies them as build flags for the processor. This is <em>not</em> standard behavior for C++ (which is what Arduino code really is) - this is a unique aspect of the Arduino IDE.</p><pre class="m-code"><span class="cp">#ifndef TINY_GSM_RX_BUFFER</span>
<span class="cp">#define TINY_GSM_RX_BUFFER 64</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef TINY_GSM_YIELD_MS</span>
<span class="cp">#define TINY_GSM_YIELD_MS 2</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef MQTT_MAX_PACKET_SIZE</span>
<span class="cp">#define MQTT_MAX_PACKET_SIZE 240</span>
<span class="cp">#endif</span></pre><p>If you are using PlatformIO, you should instead set these as global build flags in your platformio.ini. This is standard behaviour for C++.</p><pre class="m-code"><span class="na">build_flags</span> <span class="o">=</span>
    <span class="na">-DSDI12_EXTERNAL_PCINT</span>
    <span class="na">-DNEOSWSERIAL_EXTERNAL_PCINT</span>
    <span class="na">-DMQTT_MAX_PACKET_SIZE</span><span class="o">=</span><span class="s">240</span>
    <span class="na">-DTINY_GSM_RX_BUFFER</span><span class="o">=</span><span class="s">64</span>
    <span class="na">-DTINY_GSM_YIELD_MS</span><span class="o">=</span><span class="s">2</span></pre><hr/></section><section id="enu_includes"><h3>Library Includes</h3><p>Next, include the libraries needed for every program using ModularSensors.</p><pre class="m-code"><span class="c1">// The Arduino library is needed for every Arduino program.</span>
<span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp"></span>

<span class="c1">// EnableInterrupt is used by ModularSensors for external and pin change</span>
<span class="c1">// interrupts and must be explicitly included in the main program.</span>
<span class="cp">#include</span> <span class="cpf">&lt;EnableInterrupt.h&gt;</span><span class="cp"></span>

<span class="c1">// To get all of the base classes for ModularSensors, include LoggerBase.</span>
<span class="c1">// NOTE:  Individual sensor definitions must be included separately.</span>
<span class="cp">#include</span> <span class="cpf">&lt;LoggerBase.h&gt;</span><span class="cp"></span></pre><hr/></section></section><section id="enu_logger_and_modem_settings"><h2>Logger Settings</h2><section id="enu_serial_ports"><h3>Creating Extra Serial Ports</h3><p>This section of the example has all the code to create and link to serial ports for both AVR and SAMD based boards. The EnviroDIY Mayfly, the Arduino Mega, UNO, and Leonardo are all AVR boards. The Arduino Zero, the M0 and the Sodaq Autonomo are all SAMD boards.</p><p>Many different sensors communicate using some sort of serial or transistor-transistor-logic (TTL) protocol. Among these are any sensors using RS232, RS485, RS422. Generally each serial variant (or sometimes each sensor) needs a dedicated serial &quot;port&quot; - its own connection to the processor. Most processors have built in dedicated wires for serial communication - &quot;Hardware&quot; serial. See the page on <a href="page_arduino_streams.html" class="m-doc">Arduino streams</a> for much more detail about serial connections with Arduino processors.</p><hr/><section id="enu_avr_serial_ports"><h4>AVR Boards</h4><p>Most Arduino AVR style boards have very few (ie, one, or none) dedicated serial ports <em>available</em> after counting out the programming serial port. So to connect anything else, we need to try to emulate the processor serial functionality with a software library. This example shows three possible libraries that can be used to emulate a serial port on an AVR board.</p><section id="enu_altsoftseral"><h5>AltSoftSerial</h5><p><a href="https://github.com/PaulStoffregen/AltSoftSerial">AltSoftSerial</a> by Paul Stoffregen is the most accurate software serial port for AVR boards. AltSoftSerial can only be used on one set of pins on each board so only one AltSoftSerial port can be used. Not all AVR boards are supported by AltSoftSerial. See the <a href="page_processor_compatibility.html" class="m-doc">processor compatibility</a> page for more information on which pins are used on supported boards.</p><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;AltSoftSerial.h&gt;</span><span class="cp"></span>
<span class="n">AltSoftSerial</span> <span class="n">altSoftSerial</span><span class="p">;</span></pre></section><section id="enu_neoswserial"><h5>NeoSWSerial</h5><p><a href="https://github.com/SRGDamia1/NeoSWSerial">NeoSWSerial</a> is the best software serial that can be used on any pin supporting interrupts. You can use as many instances of NeoSWSerial as you want. Each instance requires two pins, one for data in and another for data out. If you only want to use the serial line for incoming or outgoing data, set the other pin to -1. Not all AVR boards are supported by NeoSWSerial.</p><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;NeoSWSerial.h&gt;</span><span class="c1">          // for the stream communication</span><span class="cp"></span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">neoSSerial1Rx</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>  <span class="c1">// data in pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">neoSSerial1Tx</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// data out pin</span>
<span class="n">NeoSWSerial</span>  <span class="nf">neoSSerial1</span><span class="p">(</span><span class="n">neoSSerial1Rx</span><span class="p">,</span> <span class="n">neoSSerial1Tx</span><span class="p">);</span>
<span class="c1">// To use NeoSWSerial in this library, we define a function to receive data</span>
<span class="c1">// This is just a short-cut for later</span>
<span class="kr">void</span> <span class="nf">neoSSerial1ISR</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">NeoSWSerial</span><span class="o">::</span><span class="n">rxISR</span><span class="p">(</span><span class="o">*</span><span class="n">portInputRegister</span><span class="p">(</span><span class="n">digitalPinToPort</span><span class="p">(</span><span class="n">neoSSerial1Rx</span><span class="p">)));</span>
<span class="p">}</span></pre><p>When using NeoSWSerial we will also have to actually set the data receiving (Rx) pin modes for interrupt in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_serial_interrupts">setup function</a>.</p></section><section id="enu_softwareseraial"><h5>SoftwareSerial with External Interrupts</h5><p>The &quot;standard&quot; software serial library uses interrupts that conflict with several other libraries used within this program. I&#x27;ve created a <a href="https://github.com/EnviroDIY/SoftwareSerial_ExtInts">version of software serial that has been stripped of interrupts</a> but it is still far from ideal. This should be used only use if necessary. It is not a very accurate serial port!</p><p>Accepting its poor quality, you can use as many instances of SoftwareSerial as you want. Each instance requires two pins, one for data in and another for data out. If you only want to use the serial line for incoming or outgoing data, set the other pin to -1.</p><pre class="m-code"><span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softSerialRx</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// data in pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softSerialTx</span> <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>  <span class="c1">// data out pin</span>

<span class="cp">#include</span> <span class="cpf">&lt;SoftwareSerial_ExtInts.h&gt;</span><span class="c1">  // for the stream communication</span><span class="cp"></span>
<span class="n">SoftwareSerial_ExtInts</span> <span class="nf">softSerial1</span><span class="p">(</span><span class="n">softSerialRx</span><span class="p">,</span> <span class="n">softSerialTx</span><span class="p">);</span></pre><p>When using SoftwareSerial with External Interrupts we will also have to actually set the data receiving (Rx) pin modes for interrupt in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_serial_interrupts">setup function</a>.</p></section><section id="enu_softwarewire"><h5>Software I2C/Wire</h5><p>This creates a software I2C (wire) instance that can be shared between multiple sensors. Only Testato&#x27;s <a href="https://github.com/Testato/SoftwareWire">SoftwareWire</a> library is supported.</p><pre class="m-code"><span class="c1">// A software I2C (Wire) instance using Testato&#39;s SoftwareWire</span>
<span class="c1">// To use SoftwareWire, you must also set a define for the sensor you want to</span>
<span class="c1">// use Software I2C for, ie:</span>
<span class="c1">//   `#define MS_ATLAS_SOFTWAREWIRE`</span>
<span class="c1">//   `#define MS_RAIN_SOFTWAREWIRE`</span>
<span class="c1">//   `#define MS_PALEOTERRA_SOFTWAREWIRE`</span>
<span class="c1">// or set the build flag(s):</span>
<span class="c1">//   `-D MS_ATLAS_SOFTWAREWIRE`</span>
<span class="c1">//   `-D MS_RAIN_SOFTWAREWIRE`</span>
<span class="c1">//   `-D MS_PALEOTERRA_SOFTWAREWIRE`</span>
<span class="cp">#include</span> <span class="cpf">&lt;SoftwareWire.h&gt;</span><span class="c1">  // Testato&#39;s Software I2C</span><span class="cp"></span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softwareSDA</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softwareSCL</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">SoftwareWire</span> <span class="nf">softI2C</span><span class="p">(</span><span class="n">softwareSDA</span><span class="p">,</span> <span class="n">softwareSCL</span><span class="p">);</span></pre><hr/></section></section><section id="enu_samd_serial_ports"><h4>SAMD Boards</h4><p>The SAMD21 supports up to 6 <em>hardware</em> serial ports, which is <em>awesome</em>. But, the Arduino core doesn&#x27;t make use of all of them, so we have to assign them ourselves.</p><p>This section of code assigns SERCOM&#x27;s 1 and 2 to act as Serial2 and Serial3 on pins 10/11 and 5/2 respectively. These pin selections are based on the Adafruit Feather M0.</p><pre class="m-code"><span class="c1">// The SAMD21 has 6 &quot;SERCOM&quot; ports, any of which can be used for UART</span>
<span class="c1">// communication.  The &quot;core&quot; code for most boards defines one or more UART</span>
<span class="c1">// (Serial) ports with the SERCOMs and uses others for I2C and SPI.  We can</span>
<span class="c1">// create new UART ports on any available SERCOM.  The table below shows</span>
<span class="c1">// definitions for select boards.</span>

<span class="c1">// Board =&gt;   Arduino Zero       Adafruit Feather    Sodaq Boards</span>
<span class="c1">// -------    ---------------    ----------------    ----------------</span>
<span class="c1">// SERCOM0    Serial1 (D0/D1)    Serial1 (D0/D1)     Serial (D0/D1)</span>
<span class="c1">// SERCOM1    Available          Available           Serial3 (D12/D13)</span>
<span class="c1">// SERCOM2    Available          Available           I2C (A4/A5)</span>
<span class="c1">// SERCOM3    I2C (D20/D21)      I2C (D20/D21)       SPI (D11/12/13)</span>
<span class="c1">// SERCOM4    SPI (D21/22/23)    SPI (D21/22/23)     SPI1/Serial2</span>
<span class="c1">// SERCOM5    EDBG/Serial        Available           Serial1</span>

<span class="c1">// If using a Sodaq board, do not define the new sercoms, instead:</span>
<span class="c1">// #define ENABLE_SERIAL2</span>
<span class="c1">// #define ENABLE_SERIAL3</span>

<span class="cp">#include</span> <span class="cpf">&lt;wiring_private.h&gt;</span><span class="c1">  // Needed for SAMD pinPeripheral() function</span><span class="cp"></span>

<span class="cp">#ifndef ENABLE_SERIAL2</span>
<span class="c1">// Set up a &#39;new&#39; UART using SERCOM1</span>
<span class="c1">// The Rx will be on digital pin 11, which is SERCOM1&#39;s Pad #0</span>
<span class="c1">// The Tx will be on digital pin 10, which is SERCOM1&#39;s Pad #2</span>
<span class="c1">// NOTE:  SERCOM1 is undefinied on a &quot;standard&quot; Arduino Zero and many clones,</span>
<span class="c1">//        but not all!  Please check the variant.cpp file for you individual</span>
<span class="c1">//        board! Sodaq Autonomo&#39;s and Sodaq One&#39;s do NOT follow the &#39;standard&#39;</span>
<span class="c1">//        SERCOM definitions!</span>
<span class="n">Uart</span> <span class="nf">Serial2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sercom1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">SERCOM_RX_PAD_0</span><span class="p">,</span> <span class="n">UART_TX_PAD_2</span><span class="p">);</span>
<span class="c1">// Hand over the interrupts to the sercom port</span>
<span class="kr">void</span> <span class="nf">SERCOM1_Handler</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial2</span><span class="p">.</span><span class="n">IrqHandler</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef ENABLE_SERIAL3</span>
<span class="c1">// Set up a &#39;new&#39; UART using SERCOM2</span>
<span class="c1">// The Rx will be on digital pin 5, which is SERCOM2&#39;s Pad #3</span>
<span class="c1">// The Tx will be on digital pin 2, which is SERCOM2&#39;s Pad #2</span>
<span class="c1">// NOTE:  SERCOM2 is undefinied on a &quot;standard&quot; Arduino Zero and many clones,</span>
<span class="c1">//        but not all!  Please check the variant.cpp file for you individual</span>
<span class="c1">//        board! Sodaq Autonomo&#39;s and Sodaq One&#39;s do NOT follow the &#39;standard&#39;</span>
<span class="c1">//        SERCOM definitions!</span>
<span class="n">Uart</span> <span class="nf">Serial3</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sercom2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SERCOM_RX_PAD_3</span><span class="p">,</span> <span class="n">UART_TX_PAD_2</span><span class="p">);</span>
<span class="c1">// Hand over the interrupts to the sercom port</span>
<span class="kr">void</span> <span class="nf">SERCOM2_Handler</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial3</span><span class="p">.</span><span class="n">IrqHandler</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span></pre><p>In addition to creating the extra SERCOM ports here, the pins must be set up as the proper pin peripherals after the serial ports are begun. This is shown in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_pin_periph">SAMD Pin Peripherals section</a> of the setup function.</p><p>NOTE: The SAMD51 board has an amazing <em>8</em> available SERCOM&#x27;s, but I do not have any exmple code for using them.</p><hr/></section></section><section id="enu_serial_func"><h3>Assigning Serial Port Functionality</h3><p>This section just assigns all the serial ports from the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_ports" class="m-doc">Creating Extra Serial Ports</a> section above to specific functionality. For a board with the option of up to 4 hardware serial ports, like the SAMD21 or Arduino Mega, we use the Serial1 to talk to the modem, Serial2 for modbus, and Serial3 for the Maxbotix. For an AVR board where we&#x27;re relying on a mix of hardware and software ports, we use hardware Serial 1 for the modem, AltSoftSerial for modbus, and NeoSWSerial for the Maxbotix. Depending on how you rank the importance of each component, you can adjust these to your liking.</p><hr/></section><section id="enu_logger_opts"><h3>Logging Options</h3><p>Here we set options for the logging and dataLogger object. This includes setting the time zone (daylight savings time is <strong>NOT</strong> applied) and setting all of the input and output pins related to the logger.</p><pre class="m-code"><span class="c1">// The name of this program file</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">sketchName</span> <span class="o">=</span> <span class="s">&quot;menu_a_la_carte.ino&quot;</span><span class="p">;</span>
<span class="c1">// Logger ID, also becomes the prefix for the name of the data file on SD card</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">LoggerID</span> <span class="o">=</span> <span class="s">&quot;XXXXX&quot;</span><span class="p">;</span>
<span class="c1">// How frequently (in minutes) to log data</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">loggingInterval</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// Your logger&#39;s timezone.</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">timeZone</span> <span class="o">=</span> <span class="mi">-5</span><span class="p">;</span>  <span class="c1">// Eastern Standard Time</span>
<span class="c1">// NOTE:  Daylight savings time will not be applied!  Please use standard time!</span>

<span class="c1">// Set the input and output pins for the logger</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">serialBaud</span> <span class="o">=</span> <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Baud rate for debugging</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">greenLED</span>   <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>       <span class="c1">// Pin for the green LED</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">redLED</span>     <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>       <span class="c1">// Pin for the red LED</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">buttonPin</span>  <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>      <span class="c1">// Pin for debugging mode (ie, button pin)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">wakePin</span>    <span class="o">=</span> <span class="n">A7</span><span class="p">;</span>  <span class="c1">// MCU interrupt/alarm pin to wake from sleep</span>
<span class="c1">// Set the wake pin to -1 if you do not want the main processor to sleep.</span>
<span class="c1">// In a SAMD system where you are using the built-in rtc, set wakePin to 1</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">sdCardPwrPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU SD card power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">sdCardSSPin</span>    <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>  <span class="c1">// SD card chip select/slave select pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">sensorPowerPin</span> <span class="o">=</span> <span class="mi">22</span><span class="p">;</span>  <span class="c1">// MCU pin controlling main sensor power</span></pre><hr/></section></section><section id="enu_modem_settings"><h2>Wifi/Cellular Modem Options</h2><p>This modem section is very lengthy because it contains the code with the constructor for every possible supported modem module. Do <em>NOT</em> try to use more than one modem at a time - it will <em>NOT</em> work.</p><p>To create any of the modems, we follow a similar pattern:</p><p>First, we&#x27;ll create a pointer to the serial port (Arduino Stream object) that we&#x27;ll use for communication between the modem and the MCU. We also assign the baud rate to a variable here. There is a table of <a href="page_modem_notes.html#modem_notes_bauds" class="m-doc">Default Baud Rates of Supported Modems</a> on the <a href="page_modem_notes.html" class="m-doc">Notes about Modems</a> page. The baud rate of any of the modules can be changed using AT commands or the <code>modem.gsmModem.setBaud(uint32_t baud)</code> function.</p><p>Next, we&#x27;ll assign all the pin numbers for all the other pins connected between the modem and the MCU. Pins that do not apply should be set as -1. There is a table of general <a href="page_modem_notes.html#modem_notes_sleep" class="m-doc">Sleep and Reset Pin Labels</a> and <a href="page_modem_notes.html#modem_notes_mayfly_pins" class="m-doc">Pin Numbers to Use when Connecting to the Mayfly</a> on the <a href="page_modem_notes.html" class="m-doc">Notes about Modems</a> page.</p><p>All the modems also need some sort of network credentials for internet access. For WiFi modems, you need the network name and password (assuming WPA2). For cellular models, you will need the APN assigned to you by the carrier you bought your SIM card from.</p><section id="enu_xbee_cell_trans"><h3>Digi XBee Cellular</h3><p>This is the code to use for <em>any</em> of Digi&#x27;s cellular XBee or XBee3 modules. All of them can be implented as a <a href="class_digi_x_bee_cellular_transparent.html" class="m-doc">DigiXBeeCellularTransparent</a> object - a subclass of <a href="class_digi_x_bee.html" class="m-doc">DigiXBee</a> and <a href="classlogger_modem.html" class="m-doc">loggerModem</a>. To create a <a href="class_digi_x_bee_cellular_transparent.html" class="m-doc">DigiXBeeCellularTransparent</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the status pin,</li><li>whether the status pin is the true status pin (<code>ON/SLEEP_N/DIO9</code>) or the <code>CTS_N/DIO7</code> pin,</li><li>the MCU pin connected to the <code>RESET_N</code>pin,</li><li>the <code>DTR_N/SLEEP_RQ/DIO8</code> pin,</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><aside class="m-note m-info"><h4>Note</h4><p>The u-blox based Digi XBee&#x27;s (3G global and LTE-M global) may be more stable used in bypass mode (below). The Telit based Digi XBees (LTE Cat1 both Verizon and AT&amp;T) can only use this mode.</p></aside><pre class="m-code"><span class="c1">// For any Digi Cellular XBee&#39;s</span>
<span class="c1">// NOTE:  The u-blox based Digi XBee&#39;s (3G global and LTE-M global) can be used</span>
<span class="c1">// in either bypass or transparent mode, each with pros and cons</span>
<span class="c1">// The Telit based Digi XBees (LTE Cat1) can only use this mode.</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBeeCellularTransparent.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee with a Mayfly and LTE adapter</span>
<span class="c1">// For options https://github.com/EnviroDIY/LTEbee-Adapter/edit/master/README.md</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>     <span class="c1">// MCU pin controlling modem power</span>
                                   <span class="c1">// Option: modemVccPin = A5, if Mayfly SJ7 is</span>
                                   <span class="c1">// connected to the ASSOC pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>     <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>     <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>     <span class="c1">// MCU pin connected an LED to show modem</span>
                                       <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBeeCellularTransparent</span> <span class="nf">modemXBCT</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                                      <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span>
                                      <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBeeCellularTransparent</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXBCT</span><span class="p">;</span></pre><p>Depending on your cellular carrier, it is best to select the proper carrier profile and network. Setting these helps the modem to connect to network faster. This is shows in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_xbeec_carrier">XBee Cellular Carrier</a> chunk of the setup function.</p></section><section id="enu_xbee_ltem_by"><h3>Digi XBee3 LTE-M Bypass</h3><p>This code is for Digi&#x27;s LTE-M XBee3 based on the u-blox SARA R410M - used in bypass mode. To create a <a href="class_digi_x_bee_l_t_e_bypass.html" class="m-doc">DigiXBeeLTEBypass</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the status pin,</li><li>whether the status pin is the true status pin (<code>ON/SLEEP_N/DIO9</code>) or the <code>CTS_N/DIO7</code> pin,</li><li>the MCU pin connected to the <code>RESET_N</code>pin,</li><li>the <code>DTR_N/SLEEP_RQ/DIO8</code> pin,</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the u-blox SARA R410M based Digi LTE-M XBee3</span>
<span class="c1">// NOTE:  According to the manual, this should be less stable than transparent</span>
<span class="c1">// mode, but my experience is the complete reverse.</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBeeLTEBypass.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee with a Mayfly and LTE adapter</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>    <span class="o">=</span> <span class="n">A5</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>     <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>     <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>     <span class="c1">// MCU pin connected an LED to show modem</span>
                                       <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBeeLTEBypass</span> <span class="nf">modemXBLTEB</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                              <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span>
                              <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBeeLTEBypass</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXBLTEB</span><span class="p">;</span></pre><p>Depending on your cellular carrier, it is best to select the proper carrier profile and network. Setting these helps the modem to connect to network faster. This is shows in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#setup_r4_carrrier" class="m-doc">SARA R4 Cellular Carrier</a> chunk of the setup function.</p><section id="enu_digi_3gby"><h4>Digi XBee 3G - Bypass Mode</h4><p>This code is for Digi&#x27;s 3G/2G XBee based on the u-blox SARA U201 - used in bypass mode. To create a <a href="class_digi_x_bee3_g_bypass.html" class="m-doc">DigiXBee3GBypass</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the status pin,</li><li>whether the status pin is the &quot;true&quot; status pin (<code>ON/SLEEP_N/DIO9</code>) or the <code>CTS_N/DIO7</code> pin,</li><li>the MCU pin connected to the <code>RESET_N</code>pin,</li><li>the <code>DTR_N/SLEEP_RQ/DIO8</code> pin,</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the u-blox SARA U201 based Digi 3G XBee with 2G fallback</span>
<span class="c1">// NOTE:  According to the manual, this should be less stable than transparent</span>
<span class="c1">// mode, but my experience is the complete reverse.</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBee3GBypass.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee with a Mayfly and LTE adapter</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>    <span class="o">=</span> <span class="n">A5</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>     <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>     <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>     <span class="c1">// MCU pin connected an LED to show modem</span>
                                       <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBee3GBypass</span> <span class="nf">modemXB3GB</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                            <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span>
                            <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBee3GBypass</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXB3GB</span><span class="p">;</span></pre></section></section><section id="enu_xbee_wifi"><h3>Digi XBee S6B Wifi</h3><p>This code is for the Digi&#x27;s S6B wifi module. To create a <a href="class_digi_x_bee_wifi.html" class="m-doc">DigiXBeeWifi</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the status pin,</li><li>whether the status pin is the &quot;true&quot; status pin (<code>ON/SLEEP_N/DIO9</code>) or the <code>CTS_N/DIO7</code> pin,</li><li>the MCU pin connected to the <code>RESET_N</code>pin,</li><li>the <code>DTR_N/SLEEP_RQ/DIO8</code> pin,</li><li>the wifi access point name,</li><li>and the wifi WPA2 password.</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the Digi Wifi XBee (S6B)</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBeeWifi.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee direcly connected to a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>    <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">true</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>    <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>    <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>    <span class="c1">// MCU pin connected an LED to show modem</span>
                                      <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiId</span>  <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi access point name</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiPwd</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi password (WPA2)</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBeeWifi</span> <span class="nf">modemXBWF</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                       <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">wifiId</span><span class="p">,</span>
                       <span class="n">wifiPwd</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBeeWifi</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXBWF</span><span class="p">;</span></pre></section><section id="enu_esp"><h3>Espressif ESP8266</h3><p>This code is for the Espressif ESP8266 or ESP32 operating with &quot;AT&quot; firmware. To create a <a href="class_espressif_e_s_p8266.html" class="m-doc">EspressifESP8266</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the light sleep status pin (on both ESP and MCU),</li><li>the reset pin (MCU pin connected to the ESP&#x27;s <code>RSTB/DIO16</code>),</li><li>the light sleep wake pin (on both the ESP and the MCU),</li><li>the wifi access point name,</li><li>and the wifi WPA2 password.</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For almost anything based on the Espressif ESP8266 using the</span>
<span class="c1">// AT command firmware</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/EspressifESP8266.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Communication speed of the modem</span>
<span class="c1">// NOTE:  This baud rate too fast for an 8MHz board, like the Mayfly!  The</span>
<span class="c1">// module should be programmed to a slower baud rate or set to auto-baud using</span>
<span class="c1">// the AT+UART_CUR or AT+UART_DEF command.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins here are for a DFRobot ESP8266 Bee with Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-2</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin for wake from light sleep</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>
<span class="c1">// Pins for light sleep on the ESP8266. For power savings, I recommend</span>
<span class="c1">// NOT using these if it&#39;s possible to use deep sleep.</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">espSleepRqPin</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>  <span class="c1">// GPIO# ON THE ESP8266 to assign for light</span>
                                  <span class="c1">// sleep request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">espStatusPin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>   <span class="c1">// GPIO# ON THE ESP8266 to assign for light</span>
                                  <span class="c1">// sleep status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiId</span>  <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi access point name</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiPwd</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi password (WPA2)</span>

<span class="c1">// Create the modem object</span>
<span class="n">EspressifESP8266</span> <span class="nf">modemESP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                          <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">wifiId</span><span class="p">,</span> <span class="n">wifiPwd</span><span class="p">,</span>
                          <span class="n">espSleepRqPin</span><span class="p">,</span>
                          <span class="n">espStatusPin</span>  <span class="c1">// Optional arguments</span>
<span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">EspressifESP8266</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemESP</span><span class="p">;</span></pre><p>Because the ESP8266&#x27;s default baud rate is too fast for an 8MHz board like the Mayfly, to use it you need to drop the baud rate down for sucessful communication. You can set the slower baud rate using some external method, or useing the code from the ESP8266 Baud Rate(<a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_esp">https://envirodiy.github.io/ModularSensors/menu_<wbr />a_<wbr />la_<wbr />carte_<wbr />8ino-example.html#enu_<wbr />setup_<wbr />esp</a>) part of the setup function below.</p></section><section id="enu_bg96"><h3>Quectel BG96</h3><p>This code is for the Dragino, Nimbelink or other boards based on the Quectel BG96. To create a <a href="class_quectel_b_g96.html" class="m-doc">QuectelBG96</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the <code>STATUS</code> pin,</li><li>the MCU pin connected to the <code>RESET_N</code> pin,</li><li>the MCU pin connected to the <code>PWRKEY</code> pin (for sleep request),</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the Dragino, Nimbelink or other boards based on the Quectel BG96</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/QuectelBG96.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Communication speed of the modem</span>
<span class="c1">// NOTE:  This baud rate too fast for an 8MHz board, like the Mayfly!  The</span>
<span class="c1">// module should be programmed to a slower baud rate or set to auto-baud using</span>
<span class="c1">// the AT+IPR=9600 command.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins here are for a modified Mayfly and a Dragino IoT Bee</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">QuectelBG96</span> <span class="nf">modemBG96</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span>
                      <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">QuectelBG96</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemBG96</span><span class="p">;</span></pre><p>If you are interfacing with a Nimbelink Skywire board via the Skywire development board, you also need to handle the fact that the development board reverses the levels of the status, wake, and reset pins. Code to invert the pin levels is in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_skywire">Skywire Pin Inversions</a> part of the setup function below.</p></section><section id="enu_monarch"><h3>Sequans Monarch</h3><p>This code is for the Nimbelink LTE-M Verizon/Sequans or other boards based on the Sequans Monarch series SoC. To create a <a href="class_sequans_monarch.html" class="m-doc">SequansMonarch</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to either the <code>GPIO3/STATUS_LED</code> or <code>POWER_MON</code> pin,</li><li>the MCU pin connected to the <code>RESETN</code> pin,</li><li>the MCU pin connected to the <code>RTS</code> or <code>RTS0</code> pin (for sleep request),</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the Nimbelink LTE-M Verizon/Sequans or other boards based on the Sequans</span>
<span class="c1">// Monarch series</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SequansMonarch.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">921600</span><span class="p">;</span>  <span class="c1">// Default baud rate of SVZM20 is 921600</span>
<span class="c1">// NOTE:  This baud rate is much too fast for many Arduinos!  The module should</span>
<span class="c1">// be programmed to a slower baud rate or set to auto-baud using the AT+IPR</span>
<span class="c1">// command.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Nimbelink Skywire (NOT directly connectable to a Mayfly!)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SequansMonarch</span> <span class="nf">modemSVZM</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                         <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SequansMonarch</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemSVZM</span><span class="p">;</span></pre><p>If you are interfacing with a Nimbelink Skywire board via the Skywire development board, you also need to handle the fact that the development board reverses the levels of the status, wake, and reset pins. Code to invert the pin levels is in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_setup_skywire">Skywire Pin Inversions</a> part of the setup function below.</p><p>The default baud rate of the SVZM20 is much too fast for almost all Arduino boards. <em>Before</em> attampting to connect a SVZM20 to an Arduino you should connect it to your computer and use AT commands to decrease the baud rate. The proper command to decrease the baud rate to 9600 (8N1) is: <code>AT+IPR=9600</code>.</p></section><section id="enu_sim800"><h3>SIMCom SIM800</h3><p>This code is for a SIMCom SIM800 or SIM900 or one of their many variants, including the Adafruit Fona and the Sodaq 2GBee R4. To create a <a href="class_s_i_m_com_s_i_m800.html" class="m-doc">SIMComSIM800</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the <code>STATUS</code> pin,</li><li>the MCU pin connected to the <code>RESET</code> pin,</li><li>the MCU pin connected to the <code>PWRKEY</code> pin (for sleep request),</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><p><em>NOTE:</em> This is NOT the correct form for a Sodaq 2GBee R6 or R7. See the section for a 2GBee R6.</p><pre class="m-code"><span class="c1">// For almost anything based on the SIMCom SIM800 EXCEPT the Sodaq 2GBee R6 and</span>
<span class="c1">// higher</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SIMComSIM800.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SIM800 does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq GPRSBee R4 with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SIMComSIM800</span> <span class="nf">modemS800</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span>
                       <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SIMComSIM800</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemS800</span><span class="p">;</span></pre></section><section id="enu_sim7000"><h3>SIMCom SIM7000</h3><p>This code is for a SIMCom SIM7000 or one of its variants. To create a <a href="class_s_i_m_com_s_i_m7000.html" class="m-doc">SIMComSIM7000</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the <code>STATUS</code> pin,</li><li>the MCU pin connected to the <code>RESET</code> pin,</li><li>the MCU pin connected to the <code>PWRKEY</code> pin (for sleep request),</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For almost anything based on the SIMCom SIM7000</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SIMComSIM7000.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SIM7000 does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SIMComSIM7000</span> <span class="nf">modem7000</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                        <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SIMComSIM7000</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modem7000</span><span class="p">;</span></pre></section><section id="enu_gprsbee"><h3>Sodaq GPRSBee</h3><p>This code is for the Sodaq 2GBee R6 and R7 based on the SIMCom SIM800. To create a <a href="class_sodaq2_g_bee_r6.html" class="m-doc">Sodaq2GBeeR6</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power, (<strong>NOTE:</strong> On the GPRSBee R6 and R7 the pin labeled as ON/OFF in Sodaq&#x27;s diagrams is tied to <em>both</em> the SIM800 power supply and the (inverted) SIM800 <code>PWRKEY</code>. You should enter this pin as the power pin.)</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1. The GPRSBee R6/R7 does not expose the <code>RESET</code> pin of the SIM800. The <code>PWRKEY</code> is held <code>LOW</code> as long as the SIM800 is powered (as mentioned above).</p><pre class="m-code"><span class="c1">// For the Sodaq 2GBee R6 and R7 based on the SIMCom SIM800</span>
<span class="c1">// NOTE:  The Sodaq GPRSBee doesn&#39;t expose the SIM800&#39;s reset pin</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/Sodaq2GBeeR6.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SIM800 does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq GPRSBee R6 or R7 with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">Sodaq2GBeeR6</span> <span class="nf">modem2GB</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">Sodaq2GBeeR6</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modem2GB</span><span class="p">;</span></pre></section><section id="enu_ubeer410"><h3>u-blox SARA R410M</h3><p>This code is for modules based on the 4G LTE-M u-blox SARA R410M including the Sodaq UBee. To create a <a href="class_sodaq_u_bee_r410_m.html" class="m-doc">SodaqUBeeR410M</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the <code>V_INT</code> pin (for status),</li><li>the MCU pin connected to the <code>RESET_N</code> pin,</li><li>the MCU pin connected to the <code>PWR_ON</code> pin (for sleep request),</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the Sodaq UBee based on the 4G LTE-M u-blox SARA R410M</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SodaqUBeeR410M.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span>
    <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Default baud rate of the SARA R410M is 115200</span>
<span class="c1">// NOTE:  The SARA R410N DOES NOT save baud rate to non-volatile memory.  After</span>
<span class="c1">// every power loss, the module will return to the default baud rate of 115200.</span>
<span class="c1">// NOTE:  115200 is TOO FAST for an 8MHz Arduino.  This library attempts to</span>
<span class="c1">// compensate by sending a baud rate change command in the wake function when</span>
<span class="c1">// compiled for a 8MHz board. Because of this, 8MHz boards, LIKE THE MAYFLY,</span>
<span class="c1">// *MUST* use a HardwareSerial instance as modemSerial.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq uBee R410M with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SodaqUBeeR410M</span> <span class="nf">modemR410</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                         <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SodaqUBeeR410M</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemR410</span><span class="p">;</span></pre><p>Depending on your cellular carrier, it is best to select the proper carrier profile and network. Setting these helps the modem to connect to network faster. This is shows in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#setup_r4_carrrier" class="m-doc">SARA R4 Cellular Carrier</a> chunk of the setup function.</p></section><section id="enu_ubeeu201"><h3>u-blox SARA U201</h3><p>This code is for modules based on the 3G/2G u-blox SARA U201 including the Sodaq UBee or the Sodaq 3GBee. To create a <a href="class_sodaq_u_bee_u201.html" class="m-doc">SodaqUBeeU201</a> object we need to know</p><ul><li>the serial object name,</li><li>the MCU pin controlling modem power,</li><li>the MCU pin connected to the <code>V_INT</code> pin (for status),</li><li>the MCU pin connected to the <code>RESET_N</code> pin,</li><li>the MCU pin connected to the <code>PWR_ON</code> pin (for sleep request),</li><li>and the SIM card&#x27;s cellular access point name (APN).</li></ul><p>Pins that do not apply should be set as -1.</p><pre class="m-code"><span class="c1">// For the Sodaq UBee based on the 3G u-blox SARA U201</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SodaqUBeeU201.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span>
    <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SARA U2xx module does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq uBee U201 with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SodaqUBeeU201</span> <span class="nf">modemU201</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                        <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SodaqUBeeU201</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemU201</span><span class="p">;</span></pre></section><section id="enu_modem_vars"><h3>Modem Measured Variables</h3><p>After creating the modem object, we can create <a href="class_variable.html" class="m-doc">Variable</a> objects for each of the variables the modem is capable of measuring (<a href="class_modem___signal_percent.html" class="m-doc">Modem_<wbr />SignalPercent</a>, <a href="class_modem___battery_state.html" class="m-doc">Modem_<wbr />BatteryState</a>, <a href="class_modem___battery_percent.html" class="m-doc">Modem_<wbr />BatteryPercent</a>, <a href="class_modem___battery_voltage.html" class="m-doc">Modem_<wbr />BatteryVoltage</a>, and <a href="class_modem___temp.html" class="m-doc">Modem_<wbr />Temp</a>). When we create the modem-linked variable objects, the first argument of the constructor, the <a href="classlogger_modem.html" class="m-doc">loggerModem</a> to like the variables to is required. The second and third arguments (the UUID and the variable code) included here are optional. Note that here we create the variables for anything measured by <em>any</em> of the modems, but most modems are not capable of measuring all of the values. Some modem-measured values may be meaningless depending on the board configuration - often the battery parameters returned by a cellular component have little meaning because the module is downstream of a voltage regulator.</p><pre class="m-code"><span class="c1">// Create RSSI and signal strength variable pointers for the modem</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemRSSI</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Modem_RSSI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="nf">RSSI</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemSignalPct</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_SignalPercent</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;signalPercent&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemBatteryState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_BatteryState</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemBatteryCS&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemBatteryPct</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_BatteryPercent</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemBatteryPct&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemBatteryVoltage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_BatteryVoltage</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemBatterymV&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemTemperature</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Modem_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemTemp&quot;</span><span class="p">);</span></pre><hr/></section></section><section id="enu_sensors_and_vars"><h2>Sensors and Measured Variables</h2><section id="enu_processor_sensor"><h3>The processor as a sensor</h3><p>Set options and create the objects for using the processor as a sensor to report battery level, processor free ram, and sample number.</p><p>The processor can return the number of &quot;samples&quot; it has taken, the amount of RAM it has available and, for some boards, the battery voltage (EnviroDIY Mayfly, Sodaq Mbili, Ndogo, Autonomo, and One, Adafruit Feathers). The version of the board is required as input (ie, for a EnviroDIY Mayfly: &quot;v0.3&quot; or &quot;v0.4&quot; or &quot;v0.5&quot;). Use a blank value (ie, &quot;&quot;) for un-versioned boards. Please note that while you can opt to average more than one sample, it really makes no sense to do so for the processor. The number of &quot;samples&quot; taken will increase by one for each time another processor &quot;measurement&quot; is taken so averaging multiple measurements from the processor will result in the number of samples increasing by more than one with each loop.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__processor.html" class="m-doc">Processor Metadata</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/ProcessorStats.h&gt;</span><span class="cp"></span>

<span class="c1">// Create the main processor chip &quot;sensor&quot; - for general metadata</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>    <span class="n">mcuBoardVersion</span> <span class="o">=</span> <span class="s">&quot;v0.5b&quot;</span><span class="p">;</span>
<span class="n">ProcessorStats</span> <span class="nf">mcuBoard</span><span class="p">(</span><span class="n">mcuBoardVersion</span><span class="p">);</span>

<span class="c1">// Create sample number, battery voltage, and free RAM variable pointers for the</span>
<span class="c1">// processor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mcuBoardBatt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessorStats_Battery</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mcuBoardAvailableRAM</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessorStats_FreeRam</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mcuBoardSampNo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessorStats_SampleNumber</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_ds3231"><h3>Maxim DS3231 RTC as a sensor</h3><p>In addition to the time, we can also use the required DS3231 real time clock to report the temperature of the circuit board. This temperature is <em>not</em> equivalent to an environmental temperature measurement and should only be used to as a diagnostic. As above, we create both the sensor and the variables measured by it.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__ds3231.html" class="m-doc">Maxim DS3231 RTC</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/MaximDS3231.h&gt;</span><span class="cp"></span>

<span class="c1">// Create a DS3231 sensor object</span>
<span class="n">MaximDS3231</span> <span class="nf">ds3231</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// Create a temperature variable pointer for the DS3231</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ds3231Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MaximDS3231_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds3231</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_am2315"><h3>AOSong AM2315</h3><p>Here is the code for the AOSong AM2315 temperature and humidity sensor. This is an I2C sensor with only one possible address so the only argument required for the constructor is the pin on the MCU controlling power to the AM2315 (AM2315Power). The number of readings to average from the sensor is optional, but can be supplied as the second argument for the constructor if desired.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__am2315.html" class="m-doc">AOSong AM2315</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AOSongAM2315.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AM2315Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>

<span class="c1">// Create an AOSong AM2315 sensor object</span>
<span class="n">AOSongAM2315</span> <span class="nf">am2315</span><span class="p">(</span><span class="n">AM2315Power</span><span class="p">);</span>

<span class="c1">// Create humidity and temperature variable pointers for the AM2315</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">am2315Humid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongAM2315_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">am2315</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">am2315Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongAM2315_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">am2315</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_dht"><h3>AOSong DHT</h3><p>Here is the code for the AOSong DHT temperature and humidity sensor. To create the DHT <a href="class_sensor.html" class="m-doc">Sensor</a> we need the power pin, the data pin, and the DHT type. The number of readings to average from the sensor is optional, but can be supplied as the fourth argument for the constructor if desired.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__dht.html" class="m-doc">AOSong DHT</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AOSongDHT.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">DHTPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">DHTPin</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>              <span class="c1">// DHT data pin</span>
<span class="n">DHTtype</span>      <span class="n">dhtType</span>  <span class="o">=</span> <span class="n">DHT11</span><span class="p">;</span>  <span class="c1">// DHT type, either DHT11, DHT21, or DHT22</span>

<span class="c1">// Create an AOSong DHT sensor object</span>
<span class="n">AOSongDHT</span> <span class="nf">dht</span><span class="p">(</span><span class="n">DHTPower</span><span class="p">,</span> <span class="n">DHTPin</span><span class="p">,</span> <span class="n">dhtType</span><span class="p">);</span>

<span class="c1">// Create humidity, temperature, and heat index variable pointers for the DHT</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtHumid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongDHT_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AOSongDHT_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span>
                                       <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtHI</span>   <span class="o">=</span> <span class="k">new</span> <span class="n">AOSongDHT_HI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span>
                                   <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_sq212"><h3>Apogee SQ-212 Quantum Light Sensor</h3><p>Here is the code for the Apogee SQ-212 Quantum Light <a href="class_sensor.html" class="m-doc">Sensor</a>. The SQ-212 is not directly connected to the MCU, but rather to an TI ADS1115 that communicates with the MCU. The Arduino pin controlling power on/off and the analog data channel <em>on the TI ADS1115</em> are required for the sensor constructor. If your ADD converter is not at the standard address of 0x48, you can enter its actual address as the third argument. The number of readings to average from the sensor is optional, but can be supplied as the fourth argument for the constructor if desired.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__sq212.html" class="m-doc">Apogee SQ-212</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AOSongDHT.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">DHTPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">DHTPin</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>              <span class="c1">// DHT data pin</span>
<span class="n">DHTtype</span>      <span class="n">dhtType</span>  <span class="o">=</span> <span class="n">DHT11</span><span class="p">;</span>  <span class="c1">// DHT type, either DHT11, DHT21, or DHT22</span>

<span class="c1">// Create an AOSong DHT sensor object</span>
<span class="n">AOSongDHT</span> <span class="nf">dht</span><span class="p">(</span><span class="n">DHTPower</span><span class="p">,</span> <span class="n">DHTPin</span><span class="p">,</span> <span class="n">dhtType</span><span class="p">);</span>

<span class="c1">// Create humidity, temperature, and heat index variable pointers for the DHT</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtHumid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongDHT_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AOSongDHT_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span>
                                       <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtHI</span>   <span class="o">=</span> <span class="k">new</span> <span class="n">AOSongDHT_HI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span>
                                   <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_atlas_sensors"><h3>Atlas Scientific EZO Circuits</h3><p>The next several sections are for Atlas Scientific EZO circuts and sensors. The sensor class constructors for each are nearly identical, except for the class name. In the most common setup, with hardware I2C, the only required argument for the constructor is the Arduino pin controlling power on/off; the i2cAddressHex is optional as is the number of readings to average.</p><aside class="m-note m-danger"><h4>Warning</h4><p><strong>You must isolate the data lines of all Atlas circuits from the main I2C bus if you wish to turn off their power!</strong> If you do not isolate them from your main I2C bus and you turn off power to the circuits between measurements the I2C lines will be pulled down to ground causing the I2C bus (and thus your logger) to crash.</p></aside><p>The default I2C addresses for the circuits are:</p><ul><li>CO2: 0x69 (105)</li><li>DO: 0x61 (97)</li><li>EC (conductivity): 0x64 (100)</li><li>ORP (redox): 0x62 (98)</li><li>pH: 0x63 (99)</li><li>RTD (temperature): 0x66 (102) All of the circuits can be re-addressed to any other 8 bit number if desired. To use multiple circuits of the same type, re-address them.</li></ul><p>If for some reason you want or need to use software I2C, compile with the build flag <code>-D MS_ATLAS_SOFTWAREWIRE</code>. The constructors for the software I2C implementation requires either the SCL and SDA pin numbers or a reference to the I2C object as arguments. You must use Testato&#x27;s <a href="https://github.com/Testato/SoftwareWire">SoftwareWire</a> library for software I2C. See the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_softwarewire">software wire</a> section for an example of creating a software I2C instance to share between sensors.</p><aside class="m-note m-danger"><h4>Warning</h4><p>Either all or none of the Atlas sensors can be using software I2C. Using some Altas sensors with software I2C and others with hardware I2C is not supported.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="group__atlas__group.html" class="m-doc">Atlas Scientific EZO Circuits</a></p></aside><section id="enu_atlas_co2"><h4>Atlas Scientific EZO-CO2 Embedded NDIR Carbon Dioxide Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__atlas__co2.html" class="m-doc">Atlas EZO-CO2</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificCO2.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasCO2Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasCO2i2c_addr</span> <span class="o">=</span> <span class="mh">0x69</span><span class="p">;</span>  <span class="c1">// Default for CO2-EZO is 0x69 (105)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific CO2 sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="c1">// AtlasScientificCO2 atlasCO2(AtlasCO2Power, softwareSDA, softwareSCL,</span>
<span class="c1">//                             AtlasCO2i2c_addr);</span>
<span class="n">AtlasScientificCO2</span> <span class="nf">atlasCO2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasCO2Power</span><span class="p">,</span> <span class="n">AtlasCO2i2c_addr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificCO2 atlasCO2(AtlasCO2Power, AtlasCO2i2c_addr);</span>
<span class="n">AtlasScientificCO2</span> <span class="nf">atlasCO2</span><span class="p">(</span><span class="n">AtlasCO2Power</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create concentration and temperature variable pointers for the EZO-CO2</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasCO2CO2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificCO2_CO2</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasCO2</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasCO2Temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificCO2_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasCO2</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_atlas_do"><h4>Atlas Scientific EZO-DO Dissolved Oxygen Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__atlas__do.html" class="m-doc">Atlas EZO-DO</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificDO.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasDOPower</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasDOi2c_addr</span> <span class="o">=</span> <span class="mh">0x61</span><span class="p">;</span>            <span class="c1">// Default for DO is 0x61 (97)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific DO sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="c1">// AtlasScientificDO atlasDO(AtlasDOPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                           AtlasDOi2c_addr);</span>
<span class="n">AtlasScientificDO</span> <span class="nf">atlasDO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasDOPower</span><span class="p">,</span> <span class="n">AtlasDOi2c_addr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificDO atlasDO(AtlasDOPower, AtlasDOi2c_addr);</span>
<span class="n">AtlasScientificDO</span> <span class="nf">atlasDO</span><span class="p">(</span><span class="n">AtlasDOPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create concentration and percent saturation variable pointers for the EZO-DO</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasDOconc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificDO_DOmgL</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasDOpct</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificDO_DOpct</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_atlas_orp"><h4>Atlas Scientific EZO-ORP Oxidation/Reduction Potential Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__atlas__orp.html" class="m-doc">Atlas EZO-ORP</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificORP.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasORPPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasORPi2c_addr</span> <span class="o">=</span> <span class="mh">0x62</span><span class="p">;</span>         <span class="c1">// Default for ORP is 0x62 (98)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific ORP sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="n">AtlasScientificORP</span> <span class="nf">atlasORP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasORPPower</span><span class="p">,</span> <span class="n">AtlasORPi2c_addr</span><span class="p">);</span>
<span class="c1">// AtlasScientificORP atlasORP(AtlasORPPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                             AtlasORPi2c_addr);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificORP atlasORP(AtlasORPPower, AtlasORPi2c_addr);</span>
<span class="n">AtlasScientificORP</span> <span class="nf">atlasORP</span><span class="p">(</span><span class="n">AtlasORPPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create a potential variable pointer for the ORP</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasORPot</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificORP_Potential</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasORP</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_atlas_ph"><h4>Atlas Scientific EZO-pH Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__atlas__ph.html" class="m-doc">Atlas EZO-pH</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificpH.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlaspHPower</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlaspHi2c_addr</span> <span class="o">=</span> <span class="mh">0x63</span><span class="p">;</span>            <span class="c1">// Default for pH is 0x63 (99)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific pH sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="n">AtlasScientificpH</span> <span class="nf">atlaspH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlaspHPower</span><span class="p">,</span> <span class="n">AtlaspHi2c_addr</span><span class="p">);</span>
<span class="c1">// AtlasScientificpH atlaspH(AtlaspHPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                           AtlaspHi2c_addr);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificpH atlaspH(AtlaspHPower, AtlaspHi2c_addr);</span>
<span class="n">AtlasScientificpH</span> <span class="nf">atlaspH</span><span class="p">(</span><span class="n">AtlaspHPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create a pH variable pointer for the pH sensor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlaspHpH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AtlasScientificpH_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">atlaspH</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_atlas_rtd"><h4>Atlas Scientific EZO-RTD Temperature Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__atlas__rtd.html" class="m-doc">Atlas EZO-RTD</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificRTD.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasRTDPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasRTDi2c_addr</span> <span class="o">=</span> <span class="mh">0x66</span><span class="p">;</span>         <span class="c1">// Default for RTD is 0x66 (102)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific RTD sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="n">AtlasScientificRTD</span> <span class="nf">atlasRTD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasRTDPower</span><span class="p">,</span> <span class="n">AtlasRTDi2c_addr</span><span class="p">);</span>
<span class="c1">// AtlasScientificRTD atlasRTD(AtlasRTDPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                             AtlasRTDi2c_addr);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificRTD atlasRTD(AtlasRTDPower, AtlasRTDi2c_addr);</span>
<span class="n">AtlasScientificRTD</span> <span class="nf">atlasRTD</span><span class="p">(</span><span class="n">AtlasRTDPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create a temperature variable pointer for the RTD</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificRTD_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasRTD</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_atlas_ec"><h4>Atlas Scientific EZO-EC Conductivity Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__atlas__cond.html" class="m-doc">Atlas EZO-EC</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificEC.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasECPower</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasECi2c_addr</span> <span class="o">=</span> <span class="mh">0x64</span><span class="p">;</span>            <span class="c1">// Default for EC is 0x64 (100)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific Conductivity sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="c1">// AtlasScientificEC atlasEC(AtlasECPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                           AtlasECi2c_addr);</span>
<span class="n">AtlasScientificEC</span> <span class="nf">atlasEC</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasECPower</span><span class="p">,</span> <span class="n">AtlasECi2c_addr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificEC atlasEC(AtlasECPower, AtlasECi2c_addr);</span>
<span class="n">AtlasScientificEC</span> <span class="nf">atlasEC</span><span class="p">(</span><span class="n">AtlasECPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create four variable pointers for the EZO-ES</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasCond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificEC_Cond</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasTDS</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AtlasScientificEC_TDS</span><span class="p">(</span><span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasSal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificEC_Salinity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasGrav</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificEC_SpecificGravity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// Create a calculated variable for the temperature compensated conductivity</span>
<span class="c1">// (that is, the specific conductance).  For this example, we will use the</span>
<span class="c1">// temperature measured by the Atlas RTD above this.  You could use the</span>
<span class="c1">// temperature returned by any other water temperature sensor if desired.</span>
<span class="c1">// **DO NOT** use your logger board temperature (ie, from the DS3231) to</span>
<span class="c1">// calculate specific conductance!</span>
<span class="kr">float</span> <span class="nf">calculateAtlasSpCond</span><span class="p">(</span><span class="kr">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">spCond</span>    <span class="o">=</span> <span class="mi">-9999</span><span class="p">;</span>  <span class="c1">// Always safest to start with a bad value</span>
    <span class="kr">float</span> <span class="n">waterTemp</span> <span class="o">=</span> <span class="n">atlasTemp</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="kr">float</span> <span class="n">rawCond</span>   <span class="o">=</span> <span class="n">atlasCond</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="c1">// ^^ Linearized temperature correction coefficient per degrees Celsius.</span>
    <span class="c1">// The value of 0.019 comes from measurements reported here:</span>
    <span class="c1">// Hayashi M. Temperature-electrical conductivity relation of water for</span>
    <span class="c1">// environmental monitoring and geophysical data inversion. Environ Monit</span>
    <span class="c1">// Assess. 2004 Aug-Sep;96(1-3):119-28.</span>
    <span class="c1">// doi: 10.1023/b:emas.0000031719.83065.68. PMID: 15327152.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">!=</span> <span class="mi">-9999</span> <span class="o">&amp;&amp;</span> <span class="n">rawCond</span> <span class="o">!=</span> <span class="mi">-9999</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// make sure both inputs are good</span>
        <span class="kr">float</span> <span class="n">temperatureCoef</span> <span class="o">=</span> <span class="mf">0.019</span><span class="p">;</span>
        <span class="n">spCond</span> <span class="o">=</span> <span class="n">rawCond</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">temperatureCoef</span> <span class="o">*</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">-</span> <span class="mf">25.0</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">spCond</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties of the calculated variable</span>
<span class="c1">// The number of digits after the decimal place</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">atlasSpCondResolution</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/variablename/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondName</span> <span class="o">=</span> <span class="s">&quot;specificConductance&quot;</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/units/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondUnit</span> <span class="o">=</span> <span class="s">&quot;microsiemenPerCentimeter&quot;</span><span class="p">;</span>
<span class="c1">// A short code for the variable</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondCode</span> <span class="o">=</span> <span class="s">&quot;atlasSpCond&quot;</span><span class="p">;</span>
<span class="c1">// The (optional) universallly unique identifier</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondUUID</span> <span class="o">=</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>

<span class="c1">// Finally, create the specific conductance variable and return a pointer to it</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasSpCond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span><span class="n">calculateAtlasSpCond</span><span class="p">,</span> <span class="n">atlasSpCondResolution</span><span class="p">,</span> <span class="n">atlasSpCondName</span><span class="p">,</span>
                 <span class="n">atlasSpCondUnit</span><span class="p">,</span> <span class="n">atlasSpCondCode</span><span class="p">,</span> <span class="n">atlasSpCondUUID</span><span class="p">);</span></pre><hr/></section></section><section id="enu_bme280"><h3>Bosch BME280 Environmental Sensor</h3><p>Here is the code for the Bosch BME280 environmental sensor. The only input needed is the Arduino pin controlling power on/off; the i2cAddressHex is optional as is the number of readings to average. Keep in mind that the possible I2C addresses of the BME280 match those of the MS5803; when using those sensors together, make sure they are set to opposite addresses.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__bme280.html" class="m-doc">Bosch BME280</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/BoschBME280.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">BME280Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">BMEi2c_addr</span> <span class="o">=</span> <span class="mh">0x76</span><span class="p">;</span>
<span class="c1">// The BME280 can be addressed either as 0x77 (Adafruit default) or 0x76 (Grove</span>
<span class="c1">// default) Either can be physically mofidied for the other address</span>

<span class="c1">// Create a Bosch BME280 sensor object</span>
<span class="n">BoschBME280</span> <span class="nf">bme280</span><span class="p">(</span><span class="n">BME280Power</span><span class="p">,</span> <span class="n">BMEi2c_addr</span><span class="p">);</span>

<span class="c1">// Create four variable pointers for the BME280</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Humid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Press</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Alt</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Altitude</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_obs3"><h3>Campbell OBS3+ Analog Turbidity Sensor</h3><p>This is the code for the Campbell OBS3+. The Arduino pin controlling power on/off, analog data channel <em>on the TI ADS1115</em>, and calibration values <em>in Volts</em> for Ax^2 + Bx + C are required for the sensor constructor. A custom variable code can be entered as a second argument in the variable constructors, and it is very strongly recommended that you use this otherwise it will be very difficult to determine which return is high and which is low range on the sensor. If your ADD converter is not at the standard address of 0x48, you can enter its actual address as the third argument. Do NOT forget that if you want to give a number of measurements to average, that comes <em>after</em> the i2c address in the constructor!</p><p>Note that to access both the high and low range returns, two instances must be created, one at the low range return pin and one at the high pin.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__obs3.html" class="m-doc">Campbell OBS3+</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/CampbellOBS3.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">OBS3Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">OBS3NumberReadings</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">OBS3ADSi2c_addr</span>    <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">OBSLowADSChannel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// ADS channel for *low* range output</span>

<span class="c1">// Campbell OBS 3+ *Low* Range Calibration in Volts</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSLow_A</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;A&quot; value (X^2) [*low* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSLow_B</span> <span class="o">=</span> <span class="mf">1.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;B&quot; value (X) [*low* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSLow_C</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;C&quot; value [*low* range]</span>

<span class="c1">// Create a Campbell OBS3+ *low* range sensor object</span>
<span class="n">CampbellOBS3</span> <span class="nf">osb3low</span><span class="p">(</span><span class="n">OBS3Power</span><span class="p">,</span> <span class="n">OBSLowADSChannel</span><span class="p">,</span> <span class="n">OBSLow_A</span><span class="p">,</span> <span class="n">OBSLow_B</span><span class="p">,</span> <span class="n">OBSLow_C</span><span class="p">,</span>
                     <span class="n">OBS3ADSi2c_addr</span><span class="p">,</span> <span class="n">OBS3NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and voltage variable pointers for the low range  of the OBS3</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3TurbLow</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3low</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbLow&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3VoltLow</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Voltage</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3low</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbLowV&quot;</span><span class="p">);</span>


<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">OBSHighADSChannel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// ADS channel for *high* range output</span>

<span class="c1">// Campbell OBS 3+ *High* Range Calibration in Volts</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSHigh_A</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;A&quot; value (X^2) [*high* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSHigh_B</span> <span class="o">=</span> <span class="mf">1.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;B&quot; value (X) [*high* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSHigh_C</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;C&quot; value [*high* range]</span>

<span class="c1">// Create a Campbell OBS3+ *high* range sensor object</span>
<span class="n">CampbellOBS3</span> <span class="nf">osb3high</span><span class="p">(</span><span class="n">OBS3Power</span><span class="p">,</span> <span class="n">OBSHighADSChannel</span><span class="p">,</span> <span class="n">OBSHigh_A</span><span class="p">,</span> <span class="n">OBSHigh_B</span><span class="p">,</span>
                      <span class="n">OBSHigh_C</span><span class="p">,</span> <span class="n">OBS3ADSi2c_addr</span><span class="p">,</span> <span class="n">OBS3NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and voltage variable pointers for the high range of the OBS3</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3TurbHigh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3high</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbHigh&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3VoltHigh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Voltage</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3high</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbHighV&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_es2"><h3>Decagon ES2 Conductivity and Temperature Sensor</h3><p>The SDI-12 address of the sensor, the Arduino pin controlling power on/off, and the Arduino pin sending and receiving data are required for the sensor constructor. Optionally, you can include a number of distinct readings to average. The data pin must be a pin that supports pin-change interrupts.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__es2.html" class="m-doc">Decagon ES-2</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/DecagonES2.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">ES2SDI12address</span> <span class="o">=</span> <span class="s">&quot;3&quot;</span><span class="p">;</span>      <span class="c1">// The SDI-12 Address of the ES2</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ES2Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ES2Data</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">ES2NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="c1">// Create a Decagon ES2 sensor object</span>
<span class="n">DecagonES2</span> <span class="nf">es2</span><span class="p">(</span><span class="o">*</span><span class="n">ES2SDI12address</span><span class="p">,</span> <span class="n">ES2Power</span><span class="p">,</span> <span class="n">ES2Data</span><span class="p">,</span> <span class="n">ES2NumberReadings</span><span class="p">);</span>

<span class="c1">// Create specific conductance and temperature variable pointers for the ES2</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">es2Cond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecagonES2_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">es2</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">es2Temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecagonES2_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">es2</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_ext_volt"><h3>External Voltage via TI ADS1x15</h3><p>The Arduino pin controlling power on/off and the analog data channel <em>on the TI ADS1115</em> are required for the sensor constructor. If using a voltage divider to increase the measurable voltage range, enter the gain multiplier as the third argument. If your ADD converter is not at the standard address of 0x48, you can enter its actual address as the fourth argument. The number of measurements to average, if more than one is desired, goes as the fifth argument.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__ads1x15.html" class="m-doc">TI ADS1x15 External Voltage Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/ExternalVoltage.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ADSPower</span>       <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ADSChannel</span>     <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>               <span class="c1">// The ADS channel of interest</span>
<span class="kr">const</span> <span class="kr">float</span>   <span class="n">dividerGain</span>    <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>  <span class="c1">//  Gain setting if using a voltage divider</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">evADSi2c_addr</span>  <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">VoltReadsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>     <span class="c1">// Only read one sample</span>

<span class="c1">// Create an External Voltage sensor object</span>
<span class="n">ExternalVoltage</span> <span class="nf">extvolt</span><span class="p">(</span><span class="n">ADSPower</span><span class="p">,</span> <span class="n">ADSChannel</span><span class="p">,</span> <span class="n">dividerGain</span><span class="p">,</span> <span class="n">evADSi2c_addr</span><span class="p">,</span>
                        <span class="n">VoltReadsToAvg</span><span class="p">);</span>

<span class="c1">// Create a voltage variable pointer</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">extvoltV</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ExternalVoltage_Volt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">extvolt</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_mpl115a2"><h3>Freescale Semiconductor MPL115A2 Miniature I2C Digital Barometer</h3><p>The only input needed for the sensor constructor is the Arduino pin controlling power on/off and optionally the number of readings to average. Because this sensor can have only one I2C address (0x60), it is only possible to connect one of these sensors to your system.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__mpl115a2.html" class="m-doc">Freescale Semiconductor MPL115A2</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/FreescaleMPL115A2.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">MPLPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">MPL115A2ReadingsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Create an MPL115A2 barometer sensor object</span>
<span class="n">MPL115A2</span> <span class="nf">mpl115a2</span><span class="p">(</span><span class="n">MPLPower</span><span class="p">,</span> <span class="n">MPL115A2ReadingsToAvg</span><span class="p">);</span>

<span class="c1">// Create pressure and temperature variable pointers for the MPL</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mplPress</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MPL115A2_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mpl115a2</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mplTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MPL115A2_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mpl115a2</span><span class="p">,</span>
                                      <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_keller_sensors"><h3>Keller RS485/Modbus Water Level Sensors</h3><p>The next two sections are for Keller RS485/Modbus water level sensors. The sensor class constructors for each are nearly identical, except for the class name. The sensor constructors require as input: the sensor modbus address, a stream instance for data (ie, <code>Serial</code>), and one or two power pins. The Arduino pin controlling the receive and data enable on your RS485-to-TTL adapter and the number of readings to average are optional. (Use -1 for the second power pin and -1 for the enable pin if these don&#x27;t apply and you want to average more than one reading.) Please see the section &quot;[Notes on Arduino Streams and Software Serial](https://envirodiy.github.io/ModularSensors/page_arduino_streams.html)&quot; for more information about what streams can be used along with this library. In tests on these sensors, SoftwareSerial_ExtInts <em>did not work</em> to communicate with these sensors, because it isn&#x27;t stable enough. AltSoftSerial and HardwareSerial work fine.</p><p>The serial ports for this example are created in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_ports" class="m-doc">Creating Extra Serial Ports</a> section and then assigned to modbus functionality in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_func" class="m-doc">Assigning Serial Port Functionality</a> section.</p><p>Up to two power pins are provided so that the RS485 adapter, the sensor and/or an external power relay can be controlled separately. If the power to everything is controlled by the same pin, use -1 for the second power pin or omit the argument. If they are controlled by different pins <em>and no other sensors are dependent on power from either pin</em> then the order of the pins doesn&#x27;t matter. If the RS485 adapter, sensor, or relay are controlled by different pins <em>and any other sensors are controlled by the same pins</em> you should put the shared pin first and the un-shared pin second. Both pins <em>cannot</em> be shared pins.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__keller__group.html" class="m-doc">Keller Water Level Sensors</a></p></aside><section id="enu_nanolevel"><h4>Keller Nanolevel Level Transmitter</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__nanolevel.html" class="m-doc">Keller Nanolevel</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/KellerNanolevel.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span> <span class="n">nanolevelModbusAddress</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>  <span class="c1">// The modbus address of KellerNanolevel</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">nlAdapterPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                               <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">nanolevelPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>             <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">nl485EnablePin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">nanolevelNumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends taking and averaging a few readings</span>

<span class="c1">// Create a Keller Nanolevel sensor object</span>
<span class="n">KellerNanolevel</span> <span class="nf">nanolevel</span><span class="p">(</span><span class="n">nanolevelModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">nlAdapterPower</span><span class="p">,</span>
                          <span class="n">nanolevelPower</span><span class="p">,</span> <span class="n">nl485EnablePin</span><span class="p">,</span>
                          <span class="n">nanolevelNumberReadings</span><span class="p">);</span>

<span class="c1">// Create pressure, temperature, and height variable pointers for the Nanolevel</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">nanolevPress</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerNanolevel_Pressure</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">nanolevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">nanolevTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerNanolevel_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">nanolevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">nanolevHeight</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerNanolevel_Height</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">nanolevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_acculevel"><h4>Keller Acculevel High Accuracy Submersible Level Transmitter</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__acculevel.html" class="m-doc">Keller Acculevel</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/KellerAcculevel.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span> <span class="n">acculevelModbusAddress</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>  <span class="c1">// The modbus address of KellerAcculevel</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">alAdapterPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                               <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">acculevelPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>             <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">al485EnablePin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">acculevelNumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends taking and averaging a few readings</span>

<span class="c1">// Create a Keller Acculevel sensor object</span>
<span class="n">KellerAcculevel</span> <span class="nf">acculevel</span><span class="p">(</span><span class="n">acculevelModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">alAdapterPower</span><span class="p">,</span>
                          <span class="n">acculevelPower</span><span class="p">,</span> <span class="n">al485EnablePin</span><span class="p">,</span>
                          <span class="n">acculevelNumberReadings</span><span class="p">);</span>

<span class="c1">// Create pressure, temperature, and height variable pointers for the Acculevel</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">acculevPress</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerAcculevel_Pressure</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">acculevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">acculevTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerAcculevel_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">acculevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">acculevHeight</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerAcculevel_Height</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">acculevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section></section><section id="enu_maxbotics"><h3>Maxbotix HRXL Ultrasonic Range Finder</h3><p>The Arduino pin controlling power on/off, a stream instance for received data (ie, <code>Serial</code>), and the Arduino pin controlling the trigger are required for the sensor constructor. (Use -1 for the trigger pin if you do not have it connected.) Please see the section &quot;[Notes on Arduino Streams and Software Serial](https://envirodiy.github.io/ModularSensors/page_arduino_streams.html)&quot; for more information about what streams can be used along with this library.</p><p>The serial ports for this example are created in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_ports" class="m-doc">Creating Extra Serial Ports</a> section and then assigned to the sonar functionality in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_func" class="m-doc">Assigning Serial Port Functionality</a> section.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__maxbotix.html" class="m-doc">MaxBotix MaxSonar</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/MaxBotixSonar.h&gt;</span><span class="cp"></span>

<span class="c1">// A Maxbotix sonar with the trigger pin disconnect CANNOT share the serial port</span>
<span class="c1">// A Maxbotix sonar using the trigger may be able to share but YMMV</span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">SonarPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Excite (power) pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">Sonar1Trigger</span> <span class="o">=</span>
    <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Trigger pin (a unique negative number if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">sonar1NumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>  <span class="c1">// The number of readings to average</span>

<span class="c1">// Create a MaxBotix Sonar sensor object</span>
<span class="n">MaxBotixSonar</span> <span class="nf">sonar1</span><span class="p">(</span><span class="n">sonarSerial</span><span class="p">,</span> <span class="n">SonarPower</span><span class="p">,</span> <span class="n">Sonar1Trigger</span><span class="p">,</span>
                     <span class="n">sonar1NumberReadings</span><span class="p">);</span>

<span class="c1">// Create an ultrasonic range variable pointer</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">sonar1Range</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MaxBotixSonar_Range</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sonar1</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_ds18"><h3>Maxim DS18 One Wire Temperature Sensor</h3><p>The OneWire hex address of the sensor, the Arduino pin controlling power on/off, and the Arduino pin sending and receiving data are required for the sensor constructor, though the address can be omitted if only one sensor is used. The OneWire address is an array of 8 hex values, for example: {0x28, 0x1D, 0x39, 0x31, 0x2, 0x0, 0x0, 0xF0}. To get the address of your sensor, plug a single sensor into your device and run the <a href="https://github.com/milesburton/Arduino-Temperature-Control-Library/blob/master/examples/oneWireSearch/oneWireSearch.ino">oneWireSearch</a> example or the <a href="https://github.com/milesburton/Arduino-Temperature-Control-Library/blob/master/examples/Single/Single.pde">Single</a> example provided within the Dallas Temperature library. The sensor address is programmed at the factory and cannot be changed.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__ds18.html" class="m-doc">Maxim DS18</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/MaximDS18.h&gt;</span><span class="cp"></span>

<span class="c1">// OneWire Address [array of 8 hex characters]</span>
<span class="c1">// If only using a single sensor on the OneWire bus, you may omit the address</span>
<span class="n">DeviceAddress</span> <span class="n">OneWireAddress1</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x28</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xBD</span><span class="p">,</span> <span class="mh">0xBA</span><span class="p">,</span>
                                 <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x0C</span><span class="p">};</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">OneWirePower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">OneWireBus</span>   <span class="o">=</span> <span class="n">A0</span><span class="p">;</span>  <span class="c1">// OneWire Bus Pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ds18NumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="c1">// Create a Maxim DS18 sensor objects (use this form for a known address)</span>
<span class="n">MaximDS18</span> <span class="nf">ds18</span><span class="p">(</span><span class="n">OneWireAddress1</span><span class="p">,</span> <span class="n">OneWirePower</span><span class="p">,</span> <span class="n">OneWireBus</span><span class="p">,</span> <span class="n">ds18NumberReadings</span><span class="p">);</span>

<span class="c1">// Create a Maxim DS18 sensor object (use this form for a single sensor on bus</span>
<span class="c1">// with an unknown address)</span>
<span class="c1">// MaximDS18 ds18(OneWirePower, OneWireBus);</span>

<span class="c1">// Create a temperature variable pointer for the DS18</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ds18Temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MaximDS18_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds18</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_ms5803"><h3>Measurement Specialties MS5803-14BA Pressure Sensor</h3><p>The only input needed is the Arduino pin controlling power on/off; the i2cAddressHex and maximum pressure are optional as is the number of readings to average. Keep in mind that the possible I2C addresses of the MS5803 match those of the BME280.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__ms5803.html" class="m-doc">Measurement Specialties MS5803</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/MeaSpecMS5803.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">MS5803Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">MS5803i2c_addr</span> <span class="o">=</span>
    <span class="mh">0x76</span><span class="p">;</span>  <span class="c1">// The MS5803 can be addressed either as 0x76 (default) or 0x77</span>
<span class="kr">const</span> <span class="kr">int16_t</span> <span class="n">MS5803maxPressure</span> <span class="o">=</span>
    <span class="mi">14</span><span class="p">;</span>  <span class="c1">// The maximum pressure measurable by the specific MS5803 model</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">MS5803ReadingsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Create a MeaSpec MS5803 pressure and temperature sensor object</span>
<span class="n">MeaSpecMS5803</span> <span class="nf">ms5803</span><span class="p">(</span><span class="n">MS5803Power</span><span class="p">,</span> <span class="n">MS5803i2c_addr</span><span class="p">,</span> <span class="n">MS5803maxPressure</span><span class="p">,</span>
                     <span class="n">MS5803ReadingsToAvg</span><span class="p">);</span>

<span class="c1">// Create pressure and temperature variable pointers for the MS5803</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ms5803Press</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeaSpecMS5803_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ms5803</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ms5803Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeaSpecMS5803_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ms5803</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_meter_sensors"><h3>Meter SDI-12 Sensors</h3><p>The next few sections are for Meter SDI-12 sensors. The SDI-12 address of the sensor, the Arduino pin controlling power on/off, and the Arduino pin sending and receiving data are required for the sensor constructor. Optionally, you can include a number of distinct readings to average. The data pin must be a pin that supports pin-change interrupts.</p><section id="enu_fivetm"><h4>Meter ECH2O Soil Moisture Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__fivetm.html" class="m-doc">Meter ECH2O (5TM)</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/Decagon5TM.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>  <span class="n">TMSDI12address</span> <span class="o">=</span> <span class="s">&quot;2&quot;</span><span class="p">;</span>             <span class="c1">// The SDI-12 Address of the 5-TM</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">TMPower</span>        <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">TMData</span>         <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Decagon 5TM sensor object</span>
<span class="n">Decagon5TM</span> <span class="nf">fivetm</span><span class="p">(</span><span class="o">*</span><span class="n">TMSDI12address</span><span class="p">,</span> <span class="n">TMPower</span><span class="p">,</span> <span class="n">TMData</span><span class="p">);</span>

<span class="c1">// Create the matric potential, volumetric water content, and temperature</span>
<span class="c1">// variable pointers for the 5TM</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">fivetmEa</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Decagon5TM_Ea</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fivetm</span><span class="p">,</span>
                                       <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">fivetmVWC</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Decagon5TM_VWC</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fivetm</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">fivetmTemp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Decagon5TM_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fivetm</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_hydros21"><h4>Meter Hydros 21 Conductivity, Temperature, and Depth Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__hydros21.html" class="m-doc">Meter Hydros 21</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/MeterHydros21.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">hydros21SDI12address</span> <span class="o">=</span> <span class="s">&quot;1&quot;</span><span class="p">;</span>  <span class="c1">// The SDI-12 Address of the Hydros21</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">hydros21NumberReadings</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>  <span class="c1">// The number of readings to average</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">hydros21Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">hydros21Data</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Decagon Hydros21 sensor object</span>
<span class="n">MeterHydros21</span> <span class="nf">hydros21</span><span class="p">(</span><span class="o">*</span><span class="n">hydros21SDI12address</span><span class="p">,</span> <span class="n">hydros21Power</span><span class="p">,</span> <span class="n">hydros21Data</span><span class="p">,</span>
                       <span class="n">hydros21NumberReadings</span><span class="p">);</span>

<span class="c1">// Create conductivity, temperature, and depth variable pointers for the</span>
<span class="c1">// Hydros21</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">hydros21Cond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterHydros21_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hydros21</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">hydros21Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterHydros21_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hydros21</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">hydros21Depth</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterHydros21_Depth</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hydros21</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_teros"><h4>Meter Teros 11 Soil Moisture Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__teros11.html" class="m-doc">Meter Teros 11</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/MeterTeros11.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">teros11SDI12address</span> <span class="o">=</span> <span class="s">&quot;4&quot;</span><span class="p">;</span>  <span class="c1">// The SDI-12 Address of the Teros 11</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">terosPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">terosData</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">teros11NumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>    <span class="c1">// The number of readings to average</span>

<span class="c1">// Create a METER TEROS 11 sensor object</span>
<span class="n">MeterTeros11</span> <span class="nf">teros11</span><span class="p">(</span><span class="o">*</span><span class="n">teros11SDI12address</span><span class="p">,</span> <span class="n">terosPower</span><span class="p">,</span> <span class="n">terosData</span><span class="p">,</span>
                     <span class="n">teros11NumberReadings</span><span class="p">);</span>

<span class="c1">// Create the matric potential, volumetric water content, and temperature</span>
<span class="c1">// variable pointers for the Teros 11</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">teros11Ea</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterTeros11_Ea</span><span class="p">(</span><span class="o">&amp;</span><span class="n">teros11</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">teros11Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterTeros11_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">teros11</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">teros11VWC</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterTeros11_VWC</span><span class="p">(</span><span class="o">&amp;</span><span class="n">teros11</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section></section><section id="enu_pt_redox"><h3>PaleoTerra Redox Sensors</h3><p>Because older versions of these sensors all ship with the same I2C address, and more than one is frequently used at different soil depths in the same profile, this module has an optional dependence on Testato&#x27;s <a href="https://github.com/Testato/SoftwareWire">SoftwareWire</a> library for software I2C.</p><p>To use software I2C, compile with the build flag <code>-D MS_PALEOTERRA_SOFTWAREWIRE</code>. See the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_softwarewire">software wire</a> section for an example of creating a software I2C instance to share between sensors.</p><p>The constructors for the software I2C implementation requires either the SCL and SDA pin numbers or a reference to the I2C object as arguments. All variants of the constructor require the Arduino power pin. The I2C address can be given if it the sensor is not set to the default of 0x68. A number of readings to average can also be given.</p><aside class="m-note m-danger"><h4>Warning</h4><p>Either all or none of your attached redox probes may use software I2C. Using some with software I2C and others with hardware I2C is not supported.</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__pt__redox.html" class="m-doc">PaleoTerra Redox</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/PaleoTerraRedox.h&gt;</span><span class="cp"></span>

<span class="kr">int8_t</span> <span class="n">paleoTerraPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Pin to switch RS485 adapter power</span>
                                          <span class="c1">// on and off (-1 if unconnected)</span>
<span class="kr">uint8_t</span> <span class="n">paleoI2CAddress</span> <span class="o">=</span> <span class="mh">0x68</span><span class="p">;</span>           <span class="c1">// the I2C address of the redox sensor</span>

<span class="c1">// Create the PaleoTerra sensor object</span>
<span class="cp">#ifdef MS_PALEOTERRA_SOFTWAREWIRE</span>
<span class="n">PaleoTerraRedox</span> <span class="nf">ptRedox</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">paleoTerraPower</span><span class="p">,</span> <span class="n">paleoI2CAddress</span><span class="p">);</span>
<span class="c1">// PaleoTerraRedox ptRedox(paleoTerraPower, softwareSDA, softwareSCL,</span>
<span class="c1">// paleoI2CAddress);</span>
<span class="cp">#else</span>
<span class="n">PaleoTerraRedox</span>   <span class="nf">ptRedox</span><span class="p">(</span><span class="n">paleoTerraPower</span><span class="p">,</span> <span class="n">paleoI2CAddress</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create the voltage variable for the redox sensor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ptVolt</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">PaleoTerraRedox_Volt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ptRedox</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_i2c_rain"><h3>Trinket-Based Tipping Bucket Rain Gauge</h3><p>This is for use with a simple external I2C tipping bucket counter based on the <a href="https://www.adafruit.com/product/1501">Adafriut Trinket</a>. All constructor arguments are optional, but the first argument is for the I2C address of the tip counter (if not 0x08) and the second is for the depth of rain (in mm) per tip event (if not 0.2mm). Most metric tipping buckets are calibrated to have 1 tip per 0.2mm of rain. Most English tipping buckets are calibrated to have 1 tip per 0.01&quot; of rain, which is 0.254mm. Note that you cannot input a number of measurements to average because averaging does not make sense with this kind of counted variable.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__i2c__rain.html" class="m-doc">Trinket Tipping Bucket</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/RainCounterI2C.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">RainCounterI2CAddress</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
<span class="c1">// I2C Address for EnviroDIY external tip counter; 0x08 by default</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">depthPerTipEvent</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>  <span class="c1">// rain depth in mm per tip event</span>

<span class="c1">// Create a Rain Counter sensor object</span>
<span class="cp">#ifdef MS_RAIN_SOFTWAREWIRE</span>
<span class="n">RainCounterI2C</span> <span class="nf">tbi2c</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">RainCounterI2CAddress</span><span class="p">,</span> <span class="n">depthPerTipEvent</span><span class="p">);</span>
<span class="c1">// RainCounterI2C tbi2c(softwareSDA, softwareSCL, RainCounterI2CAddress,</span>
<span class="c1">//                      depthPerTipEvent);</span>
<span class="cp">#else</span>
<span class="n">RainCounterI2C</span>    <span class="nf">tbi2c</span><span class="p">(</span><span class="n">RainCounterI2CAddress</span><span class="p">,</span> <span class="n">depthPerTipEvent</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create number of tips and rain depth variable pointers for the tipping bucket</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">tbi2cTips</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">RainCounterI2C_Tips</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tbi2c</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">tbi2cDepth</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">RainCounterI2C_Depth</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tbi2c</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_tally"><h3>Northern Widget Tally Event Counter</h3><p>This is for use with Northern Widget&#x27;s Tally event counter</p><aside class="m-note m-danger"><h4>Warning</h4><p>Northern Widget considers this sensor to be one of their &quot;bleeding edge&quot; sensors. As such, it is subject to change at any time. This library may not be updated immediately to reflect changes on the part of Northern Widget.</p></aside><p>The only option for the constructor is an optional setting for the I2C address, if the counter is not set at the default of 0x33. The counter should be continuously powered.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__tally.html" class="m-doc">Tally Counter I2C</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/TallyCounterI2C.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">TallyPower</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="c1">// NorthernWidget Tally I2CPower is -1 by default because it is often deployed</span>
<span class="c1">// with power always on, but Tally also has a super capacitor that enables it</span>
<span class="c1">// to be self powered between readings/recharge as described at</span>
<span class="c1">// https://github.com/NorthernWidget-Skunkworks/Project-Tally</span>

<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">TallyCounterI2CAddress</span> <span class="o">=</span> <span class="mh">0x33</span><span class="p">;</span>
<span class="c1">// NorthernWidget Tally I2C address is 0x33 by default</span>

<span class="c1">// Create a Tally Counter sensor object</span>
<span class="n">TallyCounterI2C</span> <span class="nf">tallyi2c</span><span class="p">(</span><span class="n">TallyPower</span><span class="p">,</span> <span class="n">TallyCounterI2CAddress</span><span class="p">);</span>

<span class="c1">// Create variable pointers for the Tally event counter</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">tallyEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TallyCounterI2C_Events</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">tallyi2c</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// For  Wind Speed, create a Calculated Variable that converts, similar to:</span>
<span class="c1">// period = loggingInterval * 60.0;    // in seconds</span>
<span class="c1">// frequency = tallyEventCount/period; // average event frequency in Hz</span>
<span class="c1">// tallyWindSpeed = frequency * 2.5 * 1.60934;  // in km/h</span>
<span class="c1">// 2.5 mph/Hz &amp; 1.60934 kmph/mph and 2.5 mph/Hz conversion factor from</span>
<span class="c1">// web: Inspeed-Version-II-Reed-Switch-Anemometer-Sensor-Only-WS2R</span></pre><hr/></section><section id="enu_ina219"><h3>TI INA219 High Side Current Sensor</h3><p>This is the code for the TI INA219 high side current and voltage sensor. The Arduino pin controlling power on/off is all that is required for the constructor. If your INA219 is not at the standard address of 0x40, you can enter its actual address as the fourth argument. The number of measurements to average, if more than one is desired, goes as the fifth argument.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__ina219.html" class="m-doc">TI INA219</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/TIINA219.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">INA219Power</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">INA219i2c_addr</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">;</span>            <span class="c1">// 1000000 (Board A0+A1=GND)</span>
<span class="c1">// The INA219 can have one of 16 addresses, depending on the connections of A0</span>
<span class="c1">// and A1</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">INA219ReadingsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Create an INA219 sensor object</span>
<span class="n">TIINA219</span> <span class="nf">ina219</span><span class="p">(</span><span class="n">INA219Power</span><span class="p">,</span> <span class="n">INA219i2c_addr</span><span class="p">,</span> <span class="n">INA219ReadingsToAvg</span><span class="p">);</span>

<span class="c1">// Create current, voltage, and power variable pointers for the INA219</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">inaCurrent</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TIINA219_Current</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ina219</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">inaVolt</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">TIINA219_Volt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ina219</span><span class="p">,</span>
                                      <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">inaPower</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TIINA219_Power</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ina219</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_cyclops"><h3>Turner Cyclops-7F Submersible Fluorometer</h3><p>This is the code for the Turner Cyclops-7F submersible fluorometer. The Arduino pin controlling power on/off and all calibration information is needed for the constructor. The address of the ADS1x15, if it is different than the default of 0x48, can be entered after the calibration information. The number of measurements to average, if more than one is desired, is the last argument.</p><p>The Cyclops sensors are <em>NOT</em> pre-calibrated and must be calibrated prior to deployment.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__cyclops.html" class="m-doc">Turner Cyclops-7F</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/TurnerCyclops.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">cyclopsPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">cyclopsNumberReadings</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">cyclopsADSi2c_addr</span> <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">cyclopsADSChannel</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>     <span class="c1">// ADS channel</span>

<span class="c1">// Cyclops calibration information</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">cyclopsStdConc</span> <span class="o">=</span> <span class="mf">1.000</span><span class="p">;</span>  <span class="c1">// Concentration of the standard used</span>
                                     <span class="c1">// for a 1-point sensor calibration.</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">cyclopsStdVolt</span> <span class="o">=</span>
    <span class="mf">1.000</span><span class="p">;</span>  <span class="c1">// The voltage (in volts) measured for the conc_std.</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">cyclopsBlankVolt</span> <span class="o">=</span>
    <span class="mf">0.000</span><span class="p">;</span>  <span class="c1">// The voltage (in volts) measured for a blank.</span>

<span class="c1">// Create a Turner Cyclops sensor object</span>
<span class="n">TurnerCyclops</span> <span class="nf">cyclops</span><span class="p">(</span><span class="n">cyclopsPower</span><span class="p">,</span> <span class="n">cyclopsADSChannel</span><span class="p">,</span> <span class="n">cyclopsStdConc</span><span class="p">,</span>
                      <span class="n">cyclopsStdVolt</span><span class="p">,</span> <span class="n">cyclopsBlankVolt</span><span class="p">,</span> <span class="n">cyclopsADSi2c_addr</span><span class="p">,</span>
                      <span class="n">cyclopsNumberReadings</span><span class="p">);</span>

<span class="c1">// Create the voltage variable pointer - used for any type of Cyclops</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsVoltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// Create the variable pointer for the primary output parameter.  Only use</span>
<span class="c1">// **ONE** of these!  Which is possible depends on your specific sensor!</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsChloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Chlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsRWT</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Rhodamine</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsFluoroscein</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Fluorescein</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsPhycocyanin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Phycocyanin</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsPhycoerythrin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Phycoerythrin</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsCDOM</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_CDOM</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsCrudeOil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_CrudeOil</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsBrighteners</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Brighteners</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsTurbidity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsPTSA</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_PTSA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsBTEX</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_BTEX</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsTryptophan</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Tryptophan</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsRedChloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_RedChlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_analog_cond"><h3>Analog Electrical Conductivity using the Processor&#x27;s Analog Pins</h3><p>This is the code for the measuring electrical conductivity using the processor&#x27;s internal ADC and analog input pins. The Arduino pin controlling power on/off and the sensing pin are required for the constuctor. The power supply for the sensor <em>absolutely must be switched on and off between readings</em>! The resistance of your in-circuit resistor, the cell constant for your power cord, and the number of measurements to average are the optional third, fourth, and fifth arguments. If your processor has an ADS with resolution greater or less than 10-bit, compile with the build flag <code>-D ANALOG_EC_ADC_RESOLUTION=##</code>. For best results, you should also connect the AREF pin of your processors ADC to the power supply for the and compile with the build flag <code>-D ANALOG_EC_ADC_REFERENCE_MODE=EXTERNAL</code>.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__analog__cond.html" class="m-doc">Conductivity via Analog Electrical Resistance</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/AnalogElecConductivity.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ECpwrPin</span>   <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ECdataPin1</span> <span class="o">=</span> <span class="n">A0</span><span class="p">;</span>  <span class="c1">// Data pin (must be an analog pin, ie A#)</span>

<span class="c1">// Create an Analog Electrical Conductivity sensor object</span>
<span class="n">AnalogElecConductivity</span> <span class="nf">analogEC_phy</span><span class="p">(</span><span class="n">ECpwrPin</span><span class="p">,</span> <span class="n">ECdataPin1</span><span class="p">);</span>

<span class="c1">// Create a conductivity variable pointer for the analog sensor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">analogEc_cond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnalogElecConductivity_EC</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">analogEC_phy</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// Create a calculated variable for the temperature compensated conductivity</span>
<span class="c1">// (that is, the specific conductance).  For this example, we will use the</span>
<span class="c1">// temperature measured by the Maxim DS18 saved as ds18Temp several sections</span>
<span class="c1">// above this.  You could use the temperature returned by any other water</span>
<span class="c1">// temperature sensor if desired.  **DO NOT** use your logger board temperature</span>
<span class="c1">// (ie, from the DS3231) to calculate specific conductance!</span>
<span class="kr">float</span> <span class="nf">calculateAnalogSpCond</span><span class="p">(</span><span class="kr">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">spCond</span>          <span class="o">=</span> <span class="mi">-9999</span><span class="p">;</span>  <span class="c1">// Always safest to start with a bad value</span>
    <span class="kr">float</span> <span class="n">waterTemp</span>       <span class="o">=</span> <span class="n">ds18Temp</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="kr">float</span> <span class="n">rawCond</span>         <span class="o">=</span> <span class="n">analogEc_cond</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="kr">float</span> <span class="n">temperatureCoef</span> <span class="o">=</span> <span class="mf">0.019</span><span class="p">;</span>
    <span class="c1">// ^^ Linearized temperature correction coefficient per degrees Celsius.</span>
    <span class="c1">// The value of 0.019 comes from measurements reported here:</span>
    <span class="c1">// Hayashi M. Temperature-electrical conductivity relation of water for</span>
    <span class="c1">// environmental monitoring and geophysical data inversion. Environ Monit</span>
    <span class="c1">// Assess. 2004 Aug-Sep;96(1-3):119-28.</span>
    <span class="c1">// doi: 10.1023/b:emas.0000031719.83065.68. PMID: 15327152.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">!=</span> <span class="mi">-9999</span> <span class="o">&amp;&amp;</span> <span class="n">rawCond</span> <span class="o">!=</span> <span class="mi">-9999</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// make sure both inputs are good</span>
        <span class="n">spCond</span> <span class="o">=</span> <span class="n">rawCond</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">temperatureCoef</span> <span class="o">*</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">-</span> <span class="mf">25.0</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">spCond</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties of the calculated variable</span>
<span class="c1">// The number of digits after the decimal place</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">analogSpCondResolution</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/variablename/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondName</span> <span class="o">=</span> <span class="s">&quot;specificConductance&quot;</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/units/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondUnit</span> <span class="o">=</span> <span class="s">&quot;microsiemenPerCentimeter&quot;</span><span class="p">;</span>
<span class="c1">// A short code for the variable</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondCode</span> <span class="o">=</span> <span class="s">&quot;anlgSpCond&quot;</span><span class="p">;</span>
<span class="c1">// The (optional) universallly unique identifier</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondUUID</span> <span class="o">=</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>

<span class="c1">// Finally, Create the specific conductance variable and return a pointer to it</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">analogEc_spcond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span>
    <span class="n">calculateAnalogSpCond</span><span class="p">,</span> <span class="n">analogSpCondResolution</span><span class="p">,</span> <span class="n">analogSpCondName</span><span class="p">,</span>
    <span class="n">analogSpCondUnit</span><span class="p">,</span> <span class="n">analogSpCondCode</span><span class="p">,</span> <span class="n">analogSpCondUUID</span><span class="p">);</span></pre><hr/></section><section id="enu_yosemitech_sensors"><h3>Yosemitech RS485/Modbus Environmental Sensors</h3><p>The next several sections are for Yosemitech brand sensors. The sensor class constructors for each are nearly identical, except for the class name. The sensor constructor requires as input: the sensor modbus address, a stream instance for data (ie, <code>Serial</code>), and one or two power pins. The Arduino pin controlling the receive and data enable on your RS485-to-TTL adapter and the number of readings to average are optional. (Use -1 for the second power pin and -1 for the enable pin if these don&#x27;t apply and you want to average more than one reading.) For most of the sensors, Yosemitech strongly recommends averaging multiple (in most cases 10) readings for each measurement. Please see the section &quot;[Notes on Arduino Streams and Software Serial](https://envirodiy.github.io/ModularSensors/page_arduino_streams.html)&quot; for more information about what streams can be used along with this library. In tests on these sensors, SoftwareSerial_ExtInts <em>did not work</em> to communicate with these sensors, because it isn&#x27;t stable enough. AltSoftSerial and HardwareSerial work fine. NeoSWSerial is a bit hit or miss, but can be used in a pinch.</p><p>The serial ports for this example are created in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_ports" class="m-doc">Creating Extra Serial Ports</a> section and then assigned to modbus functionality in the <a href="/home/runner/work/ModularSensors/ModularSensors/code_docs/ModularSensors/docs/examples/menu_a_la_carte.dox.html#menu_serial_func" class="m-doc">Assigning Serial Port Functionality</a> section.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__yosemitech__group.html" class="m-doc">Yosemitech Sensors</a></p></aside><section id="enu_y504"><h4>Yosemitech Y504 Dissolved Oxygen Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y504.html" class="m-doc">Yosemitech Y504 Dissolved Oxygen Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY504.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y504ModbusAddress</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y504</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y504AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y504SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y504EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y504NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Yosemitech Y504 dissolved oxygen sensor object</span>
<span class="n">YosemitechY504</span> <span class="nf">y504</span><span class="p">(</span><span class="n">y504ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y504AdapterPower</span><span class="p">,</span>
                    <span class="n">y504SensorPower</span><span class="p">,</span> <span class="n">y504EnablePin</span><span class="p">,</span> <span class="n">y504NumberReadings</span><span class="p">);</span>

<span class="c1">// Create the dissolved oxygen percent, dissolved oxygen concentration, and</span>
<span class="c1">// temperature variable pointers for the Y504</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y504DOpct</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY504_DOpct</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y504</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y504DOmgL</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY504_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y504</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y504Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY504_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y504</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y510"><h4>Yosemitech Y510 Turbidity Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y510.html" class="m-doc">Yosemitech Y510 Turbidity Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY510.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y510ModbusAddress</span> <span class="o">=</span> <span class="mh">0x0B</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y510</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y510AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y510SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y510EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y510NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y510-B Turbidity sensor object</span>
<span class="n">YosemitechY510</span> <span class="nf">y510</span><span class="p">(</span><span class="n">y510ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y510AdapterPower</span><span class="p">,</span>
                    <span class="n">y510SensorPower</span><span class="p">,</span> <span class="n">y510EnablePin</span><span class="p">,</span> <span class="n">y510NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and temperature variable pointers for the Y510</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y510Turb</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY510_Turbidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y510</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y510Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY510_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y510</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y511"><h4>Yosemitech Y511 Turbidity Sensor with Wiper</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y511.html" class="m-doc">Yosemitech Y511 Wipered Turbidty Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY511.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y511ModbusAddress</span> <span class="o">=</span> <span class="mh">0x1A</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y511</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y511AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y511SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y511EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y511NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y511-A Turbidity sensor object</span>
<span class="n">YosemitechY511</span> <span class="nf">y511</span><span class="p">(</span><span class="n">y511ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y511AdapterPower</span><span class="p">,</span>
                    <span class="n">y511SensorPower</span><span class="p">,</span> <span class="n">y511EnablePin</span><span class="p">,</span> <span class="n">y511NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and temperature variable pointers for the Y511</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y511Turb</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY511_Turbidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y511</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y511Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY511_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y511</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y514"><h4>Yosemitech Y514 Chlorophyll Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y514.html" class="m-doc">Yosemitech Y514 Wipered Chlorophyll Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY514.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y514ModbusAddress</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y514</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y514AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y514SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y514EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y514NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y514 chlorophyll sensor object</span>
<span class="n">YosemitechY514</span> <span class="nf">y514</span><span class="p">(</span><span class="n">y514ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y514AdapterPower</span><span class="p">,</span>
                    <span class="n">y514SensorPower</span><span class="p">,</span> <span class="n">y514EnablePin</span><span class="p">,</span> <span class="n">y514NumberReadings</span><span class="p">);</span>

<span class="c1">// Create chlorophyll concentration and temperature variable pointers for the</span>
<span class="c1">// Y514</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y514Chloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YosemitechY514_Chlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">y514</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y514Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY514_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y514</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y520"><h4>Yosemitech Y520 Conductivity Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y520.html" class="m-doc">Yosemitech Y520 Conductivity Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY520.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y520ModbusAddress</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y520</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y520AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y520SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y520EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y520NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y520 conductivity sensor object</span>
<span class="n">YosemitechY520</span> <span class="nf">y520</span><span class="p">(</span><span class="n">y520ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y520AdapterPower</span><span class="p">,</span>
                    <span class="n">y520SensorPower</span><span class="p">,</span> <span class="n">y520EnablePin</span><span class="p">,</span> <span class="n">y520NumberReadings</span><span class="p">);</span>

<span class="c1">// Create specific conductance and temperature variable pointers for the Y520</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y520Cond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY520_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y520</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y520Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY520_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y520</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y532"><h4>Yosemitech Y532 pH Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y532.html" class="m-doc">Yosemitech Y532 pH Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY532.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y532ModbusAddress</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y532</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y532AdapterPower</span>  <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                                  <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y532SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>               <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y532EnablePin</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y532NumberReadings</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="c1">// The manufacturer actually doesn&#39;t mention averaging for this one</span>

<span class="c1">// Create a Yosemitech Y532 pH sensor object</span>
<span class="n">YosemitechY532</span> <span class="nf">y532</span><span class="p">(</span><span class="n">y532ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y532AdapterPower</span><span class="p">,</span>
                    <span class="n">y532SensorPower</span><span class="p">,</span> <span class="n">y532EnablePin</span><span class="p">,</span> <span class="n">y532NumberReadings</span><span class="p">);</span>

<span class="c1">// Create pH, electrical potential, and temperature variable pointers for the</span>
<span class="c1">// Y532</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y532Voltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY532_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y532</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y532pH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY532_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y532</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y532Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY532_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y532</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y533"><h4>Yosemitech Y533 Oxidation Reduction Potential (ORP) Sensor</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y533.html" class="m-doc">Yosemitech Y533 ORP Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY533.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y533ModbusAddress</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y533</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y533AdapterPower</span>  <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                                  <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y533SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>               <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y533EnablePin</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y533NumberReadings</span> <span class="o">=</span>
    <span class="mi">1</span><span class="p">;</span>  <span class="c1">// The manufacturer actually doesn&#39;t mention averaging for this one</span>

<span class="c1">// Create a Yosemitech Y533 pH sensor object</span>
<span class="n">YosemitechY533</span> <span class="nf">y533</span><span class="p">(</span><span class="n">y533ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y533AdapterPower</span><span class="p">,</span>
                    <span class="n">y533SensorPower</span><span class="p">,</span> <span class="n">y533EnablePin</span><span class="p">,</span> <span class="n">y533NumberReadings</span><span class="p">);</span>

<span class="c1">// Create pH, electrical potential, and temperature variable pointers for the</span>
<span class="c1">// Y533</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y533Voltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY533_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y533</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y533pH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY533_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y533</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y533Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY533_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y533</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y550"><h4>Yosemitech Y550 Carbon Oxygen Demand (COD) Sensor with Wiper</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y550.html" class="m-doc">Yosemitech Y550 UV245/COD Sensor</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY550.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y550ModbusAddress</span> <span class="o">=</span> <span class="mh">0x50</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y550</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y550AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y550SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y550EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y550NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y550 conductivity sensor object</span>
<span class="n">YosemitechY550</span> <span class="nf">y550</span><span class="p">(</span><span class="n">y550ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y550AdapterPower</span><span class="p">,</span>
                    <span class="n">y550SensorPower</span><span class="p">,</span> <span class="n">y550EnablePin</span><span class="p">,</span> <span class="n">y550NumberReadings</span><span class="p">);</span>

<span class="c1">// Create COD, turbidity, and temperature variable pointers for the Y550</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y550COD</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY550_COD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y550</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y550Turbid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY550_Turbidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y550</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y550Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY550_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y550</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section><section id="enu_y4000"><h4>Yosemitech Y4000 Multi-Parameter Sonde</h4><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__y4000.html" class="m-doc">Yosemitech Y4000 Multi-Parameter Sonde</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY4000.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y4000ModbusAddress</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y4000</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y4000AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y4000SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y4000EnablePin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y4000NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Yosemitech Y4000 multi-parameter sensor object</span>
<span class="n">YosemitechY4000</span> <span class="nf">y4000</span><span class="p">(</span><span class="n">y4000ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y4000AdapterPower</span><span class="p">,</span>
                      <span class="n">y4000SensorPower</span><span class="p">,</span> <span class="n">y4000EnablePin</span><span class="p">,</span> <span class="n">y4000NumberReadings</span><span class="p">);</span>

<span class="c1">// Create all of the variable pointers for the Y4000</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000DO</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Turb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YosemitechY4000_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Cond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000pH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000ORP</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_ORP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Chloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YosemitechY4000_Chlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000BGA</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_BGA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section></section><section id="enu_dopto"><h3>Zebra Tech D-Opto Dissolved Oxygen Sensor</h3><p>The SDI-12 address of the sensor, the Arduino pin controlling power on/off, and the Arduino pin sending and receiving data are required for the sensor constructor. Optionally, you can include a number of distinct readings to average. The data pin must be a pin that supports pin-change interrupts.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="group__sensor__dopto.html" class="m-doc">Zebra-Tech D-Opto</a></p></aside><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;sensors/ZebraTechDOpto.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>  <span class="n">DOptoSDI12address</span> <span class="o">=</span> <span class="s">&quot;5&quot;</span><span class="p">;</span>   <span class="c1">// The SDI-12 Address of the D-Opto</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ZTPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ZTData</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Zebra Tech DOpto dissolved oxygen sensor object</span>
<span class="n">ZebraTechDOpto</span> <span class="nf">dopto</span><span class="p">(</span><span class="o">*</span><span class="n">DOptoSDI12address</span><span class="p">,</span> <span class="n">ZTPower</span><span class="p">,</span> <span class="n">ZTData</span><span class="p">);</span>

<span class="c1">// Create dissolved oxygen percent, dissolved oxygen concentration, and</span>
<span class="c1">// temperature variable pointers for the Zebra Tech</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dOptoDOpct</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ZebraTechDOpto_DOpct</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dopto</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dOptoDOmgL</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ZebraTechDOpto_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dopto</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dOptoTemp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ZebraTechDOpto_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dopto</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span></pre><hr/></section></section><section id="enu_calc_vars"><h2>Calculated Variables</h2><p>Create new <a href="class_variable.html" class="m-doc">Variable</a> objects calculated from the measured variables. For these calculate variables, we must not only supply a function for the calculation, but also all of the metadata about the variable - like the name of the variable and its units.</p><pre class="m-code"><span class="c1">// Create the function to give your calculated result.</span>
<span class="c1">// The function should take no input (void) and return a float.</span>
<span class="c1">// You can use any named variable pointers to access values by way of</span>
<span class="c1">// variable-&gt;getValue()</span>

<span class="kr">float</span> <span class="nf">calculateVariableValue</span><span class="p">(</span><span class="kr">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">calculatedResult</span> <span class="o">=</span> <span class="mi">-9999</span><span class="p">;</span>  <span class="c1">// Always safest to start with a bad value</span>
    <span class="c1">// float inputVar1 = variable1-&gt;getValue();</span>
    <span class="c1">// float inputVar2 = variable2-&gt;getValue();</span>
    <span class="c1">// make sure both inputs are good</span>
    <span class="c1">// if (inputVar1 != -9999 &amp;&amp; inputVar2 != -9999) {</span>
    <span class="c1">//     calculatedResult = inputVar1 + inputVar2;</span>
    <span class="c1">// }</span>
    <span class="k">return</span> <span class="n">calculatedResult</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties of the calculated variable</span>
<span class="c1">// The number of digits after the decimal place</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">calculatedVarResolution</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/variablename/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarName</span> <span class="o">=</span> <span class="s">&quot;varName&quot;</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/units/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarUnit</span> <span class="o">=</span> <span class="s">&quot;varUnit&quot;</span><span class="p">;</span>
<span class="c1">// A short code for the variable</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarCode</span> <span class="o">=</span> <span class="s">&quot;calcVar&quot;</span><span class="p">;</span>
<span class="c1">// The (optional) universallly unique identifier</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarUUID</span> <span class="o">=</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>

<span class="c1">// Finally, Create a calculated variable and return a variable pointer to it</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">calculatedVar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span>
    <span class="n">calculateVariableValue</span><span class="p">,</span> <span class="n">calculatedVarResolution</span><span class="p">,</span> <span class="n">calculatedVarName</span><span class="p">,</span>
    <span class="n">calculatedVarUnit</span><span class="p">,</span> <span class="n">calculatedVarCode</span><span class="p">,</span> <span class="n">calculatedVarUUID</span><span class="p">);</span></pre><hr/></section><section id="enu_create_objs"><h2>Creating the array, logger, publishers</h2><section id="enu_variable_array"><h3>The variable array</h3><p>Create a <a href="class_variable_array.html" class="m-doc">VariableArray</a> containing all of the <a href="class_variable.html" class="m-doc">Variable</a> objects that we are logging the values of.</p><p>This shows three differnt ways of creating the same variable array and filling it with variables. You should only use <strong>ONE</strong> of these in your own code</p><section id="enu_variables_create_in_array"><h4>Creating Variables within an Array</h4><p>Here we use the <code>new</code> keyword to create multiple variables and get pointers to them all at the same time within the arry.</p><pre class="m-code"><span class="c1">// Version 1: Create pointers for all of the variables from the sensors,</span>
<span class="c1">// at the same time putting them into an array</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">variableList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">new</span> <span class="n">ProcessorStats_SampleNumber</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span>
                                    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_FreeRam</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span>
                               <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_Battery</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span>
                               <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">MaximDS3231_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds3231</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="c1">//  ... Add more variables as needed!</span>
    <span class="k">new</span> <span class="n">Modem_RSSI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_SignalPercent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span><span class="n">calculateVariableValue</span><span class="p">,</span> <span class="n">calculatedVarResolution</span><span class="p">,</span>
                 <span class="n">calculatedVarName</span><span class="p">,</span> <span class="n">calculatedVarUnit</span><span class="p">,</span> <span class="n">calculatedVarCode</span><span class="p">,</span>
                 <span class="n">calculatedVarUUID</span><span class="p">),</span>
<span class="p">};</span>
<span class="c1">// Count up the number of pointers in the array</span>
<span class="kr">int</span> <span class="n">variableCount</span> <span class="o">=</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">)</span> <span class="o">/</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="c1">// Create the VariableArray object</span>
<span class="n">VariableArray</span> <span class="nf">varArray</span><span class="p">(</span><span class="n">variableCount</span><span class="p">,</span> <span class="n">variableList</span><span class="p">);</span></pre></section><section id="enu_variables_separate_uuids"><h4>Using Already-Created Variables</h4><p>If you are sending data to monitor my watershed, it is much easier to create the variables in an array and then to paste the UUID&#x27;s all together as copied from the &quot;View Token UUID List&quot; link for a site. If using this method, be very, very, very careful to make sure the order of your variables exactly matches the order of your UUID&#x27;s.</p><pre class="m-code"><span class="c1">// Version 2: Create two separate arrays, on for the variables and a separate</span>
<span class="c1">// one for the UUID&#39;s, then give both as input to the variable array</span>
<span class="c1">// constructor.  Be cautious when doing this though because order is CRUCIAL!</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">variableList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">new</span> <span class="n">ProcessorStats_SampleNumber</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_FreeRam</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_Battery</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">MaximDS3231_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds3231</span><span class="p">),</span>
    <span class="c1">//  ... Add all of your variables!</span>
    <span class="k">new</span> <span class="n">Modem_RSSI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_SignalPercent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span><span class="n">calculateVariableValue</span><span class="p">,</span> <span class="n">calculatedVarResolution</span><span class="p">,</span>
                 <span class="n">calculatedVarName</span><span class="p">,</span> <span class="n">calculatedVarUnit</span><span class="p">,</span> <span class="n">calculatedVarCode</span><span class="p">),</span>
<span class="p">};</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">UUIDs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span>
    <span class="c1">//  ... The number of UUID&#39;s must match the number of variables!</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="c1">// Count up the number of pointers in the array</span>
<span class="kr">int</span> <span class="n">variableCount</span> <span class="o">=</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">)</span> <span class="o">/</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="c1">// Create the VariableArray object and attach the UUID&#39;s</span>
<span class="n">VariableArray</span> <span class="nf">varArray</span><span class="p">(</span><span class="n">variableCount</span><span class="p">,</span> <span class="n">variableList</span><span class="p">,</span> <span class="n">UUIDs</span><span class="p">);</span></pre></section><section id="enu_variables_pre_named"><h4>Using Already-Created Variables</h4><p>You can also create and name variable pointer objects outside of the array (as is demonstrated in all of the code chunks here) and then reference those pointers inside of the array like so:</p><pre class="m-code"><span class="c1">// Version 3: Fill array with already created and named variable pointers</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">variableList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">mcuBoardSampNo</span><span class="p">,</span>
    <span class="n">mcuBoardAvailableRAM</span><span class="p">,</span>
    <span class="n">mcuBoardBatt</span><span class="p">,</span>
    <span class="n">calculatedVar</span><span class="p">,</span>
<span class="cp">#if defined ARDUINO_ARCH_AVR || defined MS_SAMD_DS3231</span>
    <span class="n">ds3231Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_AM2315 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">am2315Humid</span><span class="p">,</span>
    <span class="n">am2315Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_DHT || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">dhtHumid</span><span class="p">,</span>
    <span class="n">dhtTemp</span><span class="p">,</span>
    <span class="n">dhtHI</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_SQ212 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">sq212PAR</span><span class="p">,</span>
    <span class="n">sq212voltage</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASCO2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasCO2CO2</span><span class="p">,</span>
    <span class="n">atlasCO2Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASDO || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasDOconc</span><span class="p">,</span>
    <span class="n">atlasDOpct</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASORP || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasORPot</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASPH || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlaspHpH</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASRTD || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasTemp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASEC || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasCond</span><span class="p">,</span>
    <span class="n">atlasTDS</span><span class="p">,</span>
    <span class="n">atlasSal</span><span class="p">,</span>
    <span class="n">atlasGrav</span><span class="p">,</span>
    <span class="n">atlasSpCond</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_BME280 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">bme280Temp</span><span class="p">,</span>
    <span class="n">bme280Humid</span><span class="p">,</span>
    <span class="n">bme280Press</span><span class="p">,</span>
    <span class="n">bme280Alt</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_OBS3 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">obs3TurbLow</span><span class="p">,</span>
    <span class="n">obs3VoltLow</span><span class="p">,</span>
    <span class="n">obs3TurbHigh</span><span class="p">,</span>
    <span class="n">obs3VoltHigh</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_CTD || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ctdCond</span><span class="p">,</span>
    <span class="n">ctdTemp</span><span class="p">,</span>
    <span class="n">ctdDepth</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ES2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">es2Cond</span><span class="p">,</span>
    <span class="n">es2Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_VOLTAGE || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">extvoltV</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_MPL115A2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">mplTemp</span><span class="p">,</span>
    <span class="n">mplPress</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_INSITURDO || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">rdoTemp</span><span class="p">,</span>
    <span class="n">rdoDOpct</span><span class="p">,</span>
    <span class="n">rdoDOmgL</span><span class="p">,</span>
    <span class="n">rdoO2pp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ACCULEVEL || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">acculevPress</span><span class="p">,</span>
    <span class="n">acculevTemp</span><span class="p">,</span>
    <span class="n">acculevHeight</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_NANOLEVEL || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">nanolevPress</span><span class="p">,</span>
    <span class="n">nanolevTemp</span><span class="p">,</span>
    <span class="n">nanolevHeight</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_MAXBOTIX || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">sonar1Range</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_DS18 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ds18Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_MS5803 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ms5803Temp</span><span class="p">,</span>
    <span class="n">ms5803Press</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_5TM || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">fivetmEa</span><span class="p">,</span>
    <span class="n">fivetmVWC</span><span class="p">,</span>
    <span class="n">fivetmTemp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_HYDROS21 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">hydros21Cond</span><span class="p">,</span>
    <span class="n">hydros21Temp</span><span class="p">,</span>
    <span class="n">hydros21Depth</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_TEROS11 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">teros11Ea</span><span class="p">,</span>
    <span class="n">teros11Temp</span><span class="p">,</span>
    <span class="n">teros11VWC</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_PALEOTERRA || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ptVolt</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_RAINI2C || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">tbi2cTips</span><span class="p">,</span>
    <span class="n">tbi2cDepth</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_TALLY || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">tallyEvents</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_INA219 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">inaVolt</span><span class="p">,</span>
    <span class="n">inaCurrent</span><span class="p">,</span>
    <span class="n">inaPower</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_CYCLOPS || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">cyclopsVoltage</span><span class="p">,</span>
    <span class="n">cyclopsChloro</span><span class="p">,</span>
    <span class="n">cyclopsRWT</span><span class="p">,</span>
    <span class="n">cyclopsFluoroscein</span><span class="p">,</span>
    <span class="n">cyclopsPhycocyanin</span><span class="p">,</span>
    <span class="n">cyclopsPhycoerythrin</span><span class="p">,</span>
    <span class="n">cyclopsCDOM</span><span class="p">,</span>
    <span class="n">cyclopsCrudeOil</span><span class="p">,</span>
    <span class="n">cyclopsBrighteners</span><span class="p">,</span>
    <span class="n">cyclopsTurbidity</span><span class="p">,</span>
    <span class="n">cyclopsPTSA</span><span class="p">,</span>
    <span class="n">cyclopsBTEX</span><span class="p">,</span>
    <span class="n">cyclopsTryptophan</span><span class="p">,</span>
    <span class="n">cyclopsRedChloro</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ANALOGEC || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">analogEc_cond</span><span class="p">,</span>
    <span class="n">analogEc_spcond</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y504 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y504DOpct</span><span class="p">,</span>
    <span class="n">y504DOmgL</span><span class="p">,</span>
    <span class="n">y504Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y510 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y510Turb</span><span class="p">,</span>
    <span class="n">y510Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y511 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y511Turb</span><span class="p">,</span>
    <span class="n">y511Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y514 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y514Chloro</span><span class="p">,</span>
    <span class="n">y514Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y520 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y520Cond</span><span class="p">,</span>
    <span class="n">y520Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y532 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y532Voltage</span><span class="p">,</span>
    <span class="n">y532pH</span><span class="p">,</span>
    <span class="n">y532Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y533 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y533Voltage</span><span class="p">,</span>
    <span class="n">y533pH</span><span class="p">,</span>
    <span class="n">y533Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y550 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y550COD</span><span class="p">,</span>
    <span class="n">y550Turbid</span><span class="p">,</span>
    <span class="n">y550Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y4000 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y4000DO</span><span class="p">,</span>
    <span class="n">y4000Turb</span><span class="p">,</span>
    <span class="n">y4000Cond</span><span class="p">,</span>
    <span class="n">y4000pH</span><span class="p">,</span>
    <span class="n">y4000Temp</span><span class="p">,</span>
    <span class="n">y4000ORP</span><span class="p">,</span>
    <span class="n">y4000Chloro</span><span class="p">,</span>
    <span class="n">y4000BGA</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_DOPTO || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">dOptoDOpct</span><span class="p">,</span>
    <span class="n">dOptoDOmgL</span><span class="p">,</span>
    <span class="n">dOptoTemp</span><span class="p">,</span>
<span class="cp">#endif</span>
    <span class="n">modemRSSI</span><span class="p">,</span>
    <span class="n">modemSignalPct</span><span class="p">,</span>
<span class="cp">#ifdef TINY_GSM_MODEM_HAS_BATTERY</span>
    <span class="n">modemBatteryState</span><span class="p">,</span>
    <span class="n">modemBatteryPct</span><span class="p">,</span>
    <span class="n">modemBatteryVoltage</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef TINY_GSM_MODEM_HAS_TEMPERATURE</span>
    <span class="n">modemTemperature</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>
<span class="c1">// Count up the number of pointers in the array</span>
<span class="kr">int</span> <span class="n">variableCount</span> <span class="o">=</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">)</span> <span class="o">/</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="c1">// Create the VariableArray object</span>
<span class="n">VariableArray</span> <span class="nf">varArray</span><span class="p">(</span><span class="n">variableCount</span><span class="p">,</span> <span class="n">variableList</span><span class="p">);</span></pre><hr/></section></section><section id="enu_logger_obj"><h3>The Logger Object</h3><p>Now that we&#x27;ve created the array, we can actually create the <a href="class_logger.html" class="m-doc">Logger</a> object.</p><pre class="m-code"><span class="c1">// Create a new logger instance</span>
<span class="n">Logger</span> <span class="nf">dataLogger</span><span class="p">(</span><span class="n">LoggerID</span><span class="p">,</span> <span class="n">loggingInterval</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">varArray</span><span class="p">);</span></pre><hr/></section><section id="enu_data_publisher"><h3>Data Publisher</h3><p>Here we set up all three possible data publisers and link all of them to the same <a href="class_logger.html" class="m-doc">Logger</a> object.</p><section id="enu_mmw_publisher"><h4>Monitor My Watershed</h4><p>To publish data to the Monitor My Watershed / EnviroDIY Data Sharing Portal first you must register yourself as a user at <a href="https://monitormywatershed.org">https:/<wbr />/<wbr />monitormywatershed.org</a> or <a href="https://data.envirodiy.org">https:/<wbr />/<wbr />data.envirodiy.org</a>. Then you must register your site. After registering your site, a sampling feature and registration token for that site should be visible on the site page.</p><pre class="m-code"><span class="c1">// Device registration and sampling feature information can be obtained after</span>
<span class="c1">// registration at https://monitormywatershed.org or https://data.envirodiy.org</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">registrationToken</span> <span class="o">=</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>  <span class="c1">// Device registration token</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">samplingFeature</span> <span class="o">=</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>  <span class="c1">// Sampling feature UUID</span>

<span class="c1">// Create a data publisher for the Monitor My Watershed/EnviroDIY POST endpoint</span>
<span class="cp">#include</span> <span class="cpf">&lt;publishers/EnviroDIYPublisher.h&gt;</span><span class="cp"></span>
<span class="n">EnviroDIYPublisher</span> <span class="nf">EnviroDIYPOST</span><span class="p">(</span><span class="n">dataLogger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">modem</span><span class="p">.</span><span class="n">gsmClient</span><span class="p">,</span>
                                 <span class="n">registrationToken</span><span class="p">,</span> <span class="n">samplingFeature</span><span class="p">);</span></pre><hr/></section><section id="enu_dh_publisher"><h4>DreamHost</h4><p>It is extrmemly unlikely you will use this. You should ignore this section.</p><pre class="m-code"><span class="c1">// NOTE:  This is an outdated data collection tool used by the Stroud Center.</span>
<span class="c1">// It very, very unlikely that you will use this.</span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">DreamHostPortalRX</span> <span class="o">=</span> <span class="s">&quot;xxxx&quot;</span><span class="p">;</span>

<span class="c1">// Create a data publisher to DreamHost</span>
<span class="cp">#include</span> <span class="cpf">&lt;publishers/DreamHostPublisher.h&gt;</span><span class="cp"></span>
<span class="n">DreamHostPublisher</span> <span class="nf">DreamHostGET</span><span class="p">(</span><span class="n">dataLogger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">modem</span><span class="p">.</span><span class="n">gsmClient</span><span class="p">,</span>
                                <span class="n">DreamHostPortalRX</span><span class="p">);</span></pre><hr/></section><section id="enu_thingspeak_publisher"><h4>ThingSpeak</h4><p>After you have set up channels on ThingSpeak, you can use this code to publish your data to it.</p><p>Keep in mind that the order of variables in the <a href="class_variable_array.html" class="m-doc">VariableArray</a> is <strong>crucial</strong> when publishing to ThingSpeak.</p><pre class="m-code"><span class="c1">// NOTE:  This is an outdated data collection tool used by the Stroud Center.</span>
<span class="c1">// It very, very unlikely that you will use this.</span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">DreamHostPortalRX</span> <span class="o">=</span> <span class="s">&quot;xxxx&quot;</span><span class="p">;</span>

<span class="c1">// Create a data publisher to DreamHost</span>
<span class="cp">#include</span> <span class="cpf">&lt;publishers/DreamHostPublisher.h&gt;</span><span class="cp"></span>
<span class="n">DreamHostPublisher</span> <span class="nf">DreamHostGET</span><span class="p">(</span><span class="n">dataLogger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">modem</span><span class="p">.</span><span class="n">gsmClient</span><span class="p">,</span>
                                <span class="n">DreamHostPortalRX</span><span class="p">);</span></pre><hr/></section></section></section><section id="enu_working"><h2>Extra Working Functions</h2><p>Here we&#x27;re creating a few extra functions on the global scope. The flash function is used at board start up just to give an indication that the board has restarted. The battery function calls the <a href="class_processor_stats.html" class="m-doc">ProcessorStats</a> sensor to check the battery level before attempting to log or publish data.</p><pre class="m-code"><span class="c1">// Flashes the LED&#39;s on the primary board</span>
<span class="kr">void</span> <span class="nf">greenredflash</span><span class="p">(</span><span class="kr">uint8_t</span> <span class="n">numFlash</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="kr">uint8_t</span> <span class="n">rate</span> <span class="o">=</span> <span class="mi">75</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kr">uint8_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numFlash</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">HIGH</span><span class="p">);</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
        <span class="nf">delay</span><span class="p">(</span><span class="n">rate</span><span class="p">);</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">HIGH</span><span class="p">);</span>
        <span class="nf">delay</span><span class="p">(</span><span class="n">rate</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Uses the processor sensor object to read the battery voltage</span>
<span class="c1">// NOTE: This will actually return the battery level from the previous update!</span>
<span class="kr">float</span> <span class="nf">getBatteryVoltage</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">mcuBoard</span><span class="p">.</span><span class="n">sensorValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">-9999</span><span class="p">)</span> <span class="n">mcuBoard</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">mcuBoard</span><span class="p">.</span><span class="n">sensorValues</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span></pre><hr/></section><section id="enu_setup"><h2>Arduino Setup Function</h2><p>This is our setup function. In Arduino coding, the classic &quot;main&quot; function is replaced by two functions: setup() and loop(). The setup() function runs once when the board boots or restarts. It usually contains many functions that set the mode of input and output pins and prints out some debugging information to the serial port. These functions are frequently named &quot;begin&quot;. Because we have a <em>lot</em> of parts to set up, there&#x27;s a lot going on in this function!</p><p>Let&#x27;s break it down.</p><section id="enu_setup_open"><h3>Starting the Function</h3><p>First we just open the function definitions:</p><pre class="m-code"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span></pre></section><section id="enu_setup_wait"><h3>Wait for USB</h3><p>Next we wait for the USB debugging port to initialize. This only applies to SAMD and 32U4 boards that have built-in USB support. This code should not be used for deployed loggers; it&#x27;s only for using a USB for debugging.</p><pre class="m-code"><span class="c1">// Wait for USB connection to be established by PC</span>
<span class="c1">// NOTE:  Only use this when debugging - if not connected to a PC, this</span>
<span class="c1">// could prevent the script from starting</span>
<span class="cp">#if defined SERIAL_PORT_USBVIRTUAL</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">SERIAL_PORT_USBVIRTUAL</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nf">millis</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">10000L</span><span class="p">))</span> <span class="p">{}</span>
<span class="cp">#endif</span></pre></section><section id="enu_setup_prints"><h3>Printing a Hello</h3><p>Next we print a message out to the debugging port. This is also just for debugging - it&#x27;s very helpful when connected to the logger via USB to see a clear indication that the board is starting</p><pre class="m-code">    <span class="c1">// Start the primary serial connection</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">serialBaud</span><span class="p">);</span>

    <span class="c1">// Print a start-up note to the first serial port</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Now running &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">sketchName</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot; on Logger &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">LoggerID</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">();</span>

    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Using ModularSensors Library version &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">MODULAR_SENSORS_VERSION</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;TinyGSM Library version &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">TINYGSM_VERSION</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">();</span></pre></section><section id="enu_setup_serial_interrupts"><h3>Serial Interrupts</h3><p>If we&#x27;re using either NeoSWSerial or SoftwareSerial_ExtInts we need to assign the data receiver pins to interrupt functionality here in the setup.</p><p>The <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_neoswserial">NeoSWSerial</a> and <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_softwareseraial">SoftwareSerial_<wbr />ExtInts</a> objects were created way up in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_serial_ports">Extra Serial Ports</a> section.</p><p>NOTE:** If you create more than one NeoSWSerial or Software serial object, you need to call the enableInterrupt function for each Rx pin!</p><p>For NeoSWSerial we use: <code class="m-code"><span class="n">enableInterrupt</span><span class="p">(</span><span class="n">neoSSerial1Rx</span><span class="p">,</span> <span class="n">neoSSerial1ISR</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span></code></p><p>For SoftwareSerial with External interrupts we use:</p><pre class="m-code"><span class="n">enableInterrupt</span><span class="p">(</span><span class="n">softSerialRx</span><span class="p">,</span> <span class="n">SoftwareSerial_ExtInts</span><span class="o">::</span><span class="n">handle_interrupt</span><span class="p">,</span>
                <span class="n">CHANGE</span><span class="p">);</span></pre></section><section id="enu_setup_serial_begin"><h3>Serial Begin</h3><p>Every serial port setup and used in the program must be &quot;begun&quot; in the setup function. This section calls the begin functions for all of the various ports defined in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_serial_ports">Extra Serial Ports</a> section</p><pre class="m-code">    <span class="c1">// Start the serial connection with the modem</span>
    <span class="n">modemSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">modemBaud</span><span class="p">);</span>

    <span class="c1">// Start the stream for the modbus sensors;</span>
    <span class="c1">// all currently supported modbus sensors use 9600 baud</span>
    <span class="n">modbusSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="cp">#if defined MS_BUILD_TEST_MAXBOTIX || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="c1">// Start the SoftwareSerial stream for the sonar; it will always be at 9600</span>
    <span class="c1">// baud</span>
    <span class="n">sonarSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="cp">#endif</span></pre></section><section id="enu_setup_pin_periph"><h3>SAMD Pin Peripherals</h3><p>After beginning all of the serial ports, we need to set the pin peripheral settings for any SERCOM&#x27;s we assigned to serial functionality on the SAMD boards. These were created in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_samd_serial_ports">Extra Serial Ports</a> section above. This does not need to be done for an AVR board (like the Mayfly).</p><pre class="m-code"><span class="cp">#if defined ARDUINO_ARCH_SAMD</span>
<span class="cp">#ifndef ENABLE_SERIAL2</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial2 Tx/Dout = SERCOM1 Pad #2</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial2 Rx/Din = SERCOM1 Pad #0</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef ENABLE_SERIAL3</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial3 Tx/Dout = SERCOM2 Pad #2</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial3 Rx/Din = SERCOM2 Pad #3</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span></pre></section><section id="enu_setup_flash"><h3>Flash the LEDs</h3><p>Like printing debugging information to the serial port, flashing the board LED&#x27;s is a very helpful indication that the board just restarted. Here we set the pin modes for the LED pins and flash them back and forth using the greenredflash() function we created back in the <a href="https://envirodiy.github.io/ModularSensors/menu_a_la_carte_8ino-example.html#enu_working">working functions</a> section.</p><pre class="m-code">    <span class="c1">// Set up pins for the LED&#39;s</span>
    <span class="nf">pinMode</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">OUTPUT</span><span class="p">);</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
    <span class="nf">pinMode</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">OUTPUT</span><span class="p">);</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
    <span class="c1">// Blink the LEDs to show the board is on and starting up</span>
    <span class="n">greenredflash</span><span class="p">();</span></pre></section><section id="enu_setup_logger"><h3>Begin the Logger</h3><p>Next get ready and begin the logger. We set the logger time zone and the clock time zone. The clock time zone is what the RTC will report; the logger time zone is what will be written to the SD card and all data publishers. The values are set with the <code><a href="class_logger.html" class="m-doc">Logger</a>::</code> prefix because they are static variables of the <a href="class_logger.html" class="m-doc">Logger</a> class rather than member variables. Here we also tie the logger and modem together and set all the logger pins. Then we finally run the logger&#x27;s begin function.</p><pre class="m-code">    <span class="c1">// Set the timezones for the logger/data and the RTC</span>
    <span class="c1">// Logging in the given time zone</span>
    <span class="n">Logger</span><span class="o">::</span><span class="n">setLoggerTimeZone</span><span class="p">(</span><span class="n">timeZone</span><span class="p">);</span>
    <span class="c1">// It is STRONGLY RECOMMENDED that you set the RTC to be in UTC (UTC+0)</span>
    <span class="n">Logger</span><span class="o">::</span><span class="n">setRTCTimeZone</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Attach the modem and information pins to the logger</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">attachModem</span><span class="p">(</span><span class="n">modem</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemLED</span><span class="p">(</span><span class="n">modemLEDPin</span><span class="p">);</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">setLoggerPins</span><span class="p">(</span><span class="n">wakePin</span><span class="p">,</span> <span class="n">sdCardSSPin</span><span class="p">,</span> <span class="n">sdCardPwrPin</span><span class="p">,</span> <span class="n">buttonPin</span><span class="p">,</span>
                             <span class="n">greenLED</span><span class="p">);</span>

    <span class="c1">// Begin the logger</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span></pre></section><section id="enu_setup_sensors"><h3>Setup the Sensors</h3><p>After beginning the logger, we setup all the sensors. Unlike all the previous chuncks of the setup that are preparation steps only requiring the mcu processor, this might involve powering up the sensors. To prevent a low power restart loop, we put a battery voltage condition on the sensor setup. This prevents a solar powered board whose battery has died from continuously restarting as soon as it gains any power on sunrise. Without the condition the board would boot with power, try to power hungry sensors, brown out, and restart over and over.</p><pre class="m-code">    <span class="c1">// Note:  Please change these battery voltages to match your battery</span>
    <span class="c1">// Set up the sensors, except at lowest battery level</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Setting up sensors...&quot;</span><span class="p">));</span>
        <span class="n">varArray</span><span class="p">.</span><span class="n">setupSensors</span><span class="p">();</span>
    <span class="p">}</span></pre></section><section id="enu_setup_modem"><h3>Custom Modem Setup</h3><p>Next we can opt to do some special setup needed for a few of the modems. You should only use the one chunk that applies to your specific modem configuration and delete the others.</p><section id="enu_setup_esp"><h4>ESP8266 Baud Rate</h4><p>This chunk of code reduces the baud rate of the ESP8266 from its default of 115200 to 9600. This is only needed for 8MHz boards (like the Mayfly) that cannot communicate at 115200 baud.</p><pre class="m-code">    <span class="k">if</span> <span class="p">(</span><span class="n">modemBaud</span> <span class="o">&gt;</span> <span class="mi">57600</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">modem</span><span class="p">.</span><span class="n">modemWake</span><span class="p">();</span>  <span class="c1">// NOTE:  This will also set up the modem</span>
        <span class="n">modemSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">modemBaud</span><span class="p">);</span>
        <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+UART_DEF=9600,8,1,0,0&quot;</span><span class="p">));</span>
        <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
        <span class="n">modemSerial</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
        <span class="n">modemSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="p">}</span></pre></section><section id="enu_setup_skywire"><h4>Skywire Pin Inversions</h4><p>This chunk of code inverts the pin levels for status, wake, and reset of the modem. This is necessary for the Skywire development board and some other breakouts.</p><pre class="m-code">    <span class="n">modem</span><span class="p">.</span><span class="n">setModemStatusLevel</span><span class="p">(</span><span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// If using CTS, LOW</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemWakeLevel</span><span class="p">(</span><span class="kr">HIGH</span><span class="p">);</span>   <span class="c1">// Skywire dev board inverts the signal</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemResetLevel</span><span class="p">(</span><span class="kr">HIGH</span><span class="p">);</span>  <span class="c1">// Skywire dev board inverts the signal</span></pre></section><section id="enu_setup_xbeec_carrier"><h4>XBee Cellular Carrier</h4><p>This chunk of code sets the carrier profile and network technology for a Digi XBee or XBee3. You should change the lines with the <code>CP</code> and <code>N#</code> commands to the proper number to match your SIM card.</p><pre class="m-code">    <span class="c1">// Extra modem set-up</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Waking modem and setting Cellular Carrier Options...&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">modemWake</span><span class="p">();</span>  <span class="c1">// NOTE:  This will also set up the modem</span>
    <span class="c1">// Go back to command mode to set carrier options</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">commandMode</span><span class="p">();</span>
    <span class="c1">// Carrier Profile - 0 = Automatic selection</span>
    <span class="c1">//                 - 1 = No profile/SIM ICCID selected</span>
    <span class="c1">//                 - 2 = AT&amp;T</span>
    <span class="c1">//                 - 3 = Verizon</span>
    <span class="c1">// NOTE:  To select T-Mobile, you must enter bypass mode!</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;CP&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Cellular network technology - 0 = LTE-M with NB-IoT fallback</span>
    <span class="c1">//                             - 1 = NB-IoT with LTE-M fallback</span>
    <span class="c1">//                             - 2 = LTE-M only</span>
    <span class="c1">//                             - 3 = NB-IoT only</span>
    <span class="c1">// NOTE:  As of 2020 in the USA, AT&amp;T and Verizon only use LTE-M</span>
    <span class="c1">// T-Mobile uses NB-IOT</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;N#&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Write changes to flash and apply them</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Wait while applying changes...&quot;</span><span class="p">));</span>
    <span class="c1">// Write changes to flash</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">writeChanges</span><span class="p">();</span>
    <span class="c1">// Reset the cellular component to ensure network settings are changed</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;!R&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">(</span><span class="mf">30000L</span><span class="p">);</span>
    <span class="c1">// Force reset of the Digi component as well</span>
    <span class="c1">// This effectively exits command mode</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;FR&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">(</span><span class="mf">5000L</span><span class="p">);</span></pre></section><section id="etup_r4_carrrier"><h4>SARA R4 Cellular Carrier</h4><p>This chunk of code sets the carrier profile and network technology for a u-blox SARA R4 or N4 module, including a Sodaq R410 UBee or a Digi XBee3 LTE-M in bypass mode.. You should change the lines with the <code>UMNOPROF</code> and <code>URAT</code> commands to the proper number to match your SIM card.</p><pre class="m-code">    <span class="c1">// Extra modem set-up</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Waking modem and setting Cellular Carrier Options...&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">modemWake</span><span class="p">();</span>  <span class="c1">// NOTE:  This will also set up the modem</span>
    <span class="c1">// Turn off the cellular radio while making network changes</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+CFUN=0&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Mobile Network Operator Profile - 0 = SW default</span>
    <span class="c1">//                                 - 1 = SIM ICCID selected</span>
    <span class="c1">//                                 - 2: ATT</span>
    <span class="c1">//                                 - 6: China Telecom</span>
    <span class="c1">//                                 - 100: Standard Europe</span>
    <span class="c1">//                                 - 4: Telstra</span>
    <span class="c1">//                                 - 5: T-Mobile US</span>
    <span class="c1">//                                 - 19: Vodafone</span>
    <span class="c1">//                                 - 3: Verizon</span>
    <span class="c1">//                                 - 31: Deutsche Telekom</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+UMNOPROF=&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Selected network technology - 7: LTE Cat.M1</span>
    <span class="c1">//                             - 8: LTE Cat.NB1</span>
    <span class="c1">// Fallback network technology - 7: LTE Cat.M1</span>
    <span class="c1">//                              - 8: LTE Cat.NB1</span>
    <span class="c1">// NOTE:  As of 2020 in the USA, AT&amp;T and Verizon only use LTE-M</span>
    <span class="c1">// T-Mobile uses NB-IOT</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+URAT=&quot;</span><span class="p">),</span> <span class="mi">7</span><span class="p">,</span> <span class="sc">&#39;,&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Restart the module to apply changes</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+CFUN=1,1&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">(</span><span class="mf">10000L</span><span class="p">);</span></pre></section></section><section id="enu_setup_rtc"><h3>Sync the Real Time Clock</h3><p>After any special modem options, we can opt to use the modem to synchronize the real time clock with the NIST time servers. This is very helpful in keeping the clock from drifting or resetting it if it lost time due to power loss. Like the sensor setup, we also apply a battery voltage voltage condition before attempting the clock sync. (All of the supported modems are large power eaters.) Unlike the sensor setup, we have an additional check for &quot;sanity&quot; of the clock time. To be considered &quot;sane&quot; the clock has to set somewhere between 2020 and 2025. It&#x27;s a broad range, but it will automatically flag values like Jan 1, 2000 - which are the default start value of the clock on power up.</p><pre class="m-code">    <span class="c1">// Sync the clock if it isn&#39;t valid or we have battery to spare</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.55</span> <span class="o">||</span> <span class="o">!</span><span class="n">dataLogger</span><span class="p">.</span><span class="n">isRTCSane</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// Synchronize the RTC with NIST</span>
        <span class="c1">// This will also set up the modem</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">syncRTC</span><span class="p">();</span>
    <span class="p">}</span></pre></section><section id="enu_setup_file"><h3>Setup a File on the SD card</h3><p>We&#x27;re getting close to the end of the setup function! This section verifies that the SD card is communicating with the MCU and sets up a file on it for saved data. Like with the sensors and the modem, we check for battery level before attempting to communicate with the SD card.</p><pre class="m-code">    <span class="c1">// Create the log file, adding the default header to it</span>
    <span class="c1">// Do this last so we have the best chance of getting the time correct and</span>
    <span class="c1">// all sensor names correct</span>
    <span class="c1">// Writing to the SD card can be power intensive, so if we&#39;re skipping</span>
    <span class="c1">// the sensor setup we&#39;ll skip this too.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Setting up file on SD card&quot;</span><span class="p">));</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOnSDcard</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span>
        <span class="c1">// true = wait for card to settle after power up</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">createLogFile</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span>  <span class="c1">// true = write a new header</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOffSDcard</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span>
        <span class="c1">// true = wait for internal housekeeping after write</span>
    <span class="p">}</span></pre></section><section id="enu_setup_sleep"><h3>Sleep until the First Data Collection Time</h3><p>We&#x27;re finally fished with setup! This chunk puts the system into low power deep sleep until the next logging interval.</p><pre class="m-code">    <span class="c1">// Call the processor sleep</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Putting processor to sleep</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">systemSleep</span><span class="p">();</span></pre></section><section id="enu_setup_done"><h3>Setup Complete</h3><p>Set up is done! This setup function is <em>really</em> long. But don&#x27;t forget you need to close it with a final curly brace.</p><pre class="m-code"><span class="p">}</span></pre><hr/></section></section><section id="enu_loop"><h2>Arduino Loop Function</h2><p>This is the loop function which will run repeatedly as long as the board is turned on. NOTE:** This example has code for both a typical simple loop and a complex loop that calls lower level logger functions. You should only pick <em>one</em> loop function and delete the other.</p><section id="enu_simple_loop"><h3>A Typical Loop</h3><p>After the incredibly long setup function, we can do the vast majority of all logger work in a very simple loop function. Every time the logger wakes we check the battery voltage and do 1 of three things:</p><ol><li>If the battery is very low, go immediately back to sleep and hope the sun comes back out</li><li>If the battery is at a moderate level, attempt to collect data from sensors, but do not attempt to publish data. The modem the biggest power user of the whole system. 3. At full power, do everything.</li></ol><pre class="m-code"><span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Note:  Please change these battery voltages to match your battery</span>
    <span class="c1">// At very low battery, just go back to sleep</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">systemSleep</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">3.55</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// At moderate voltage, log data but don&#39;t send it over the modem</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">logData</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// If the battery is good, send the data to the world</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">logDataAndPublish</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></pre></section><section id="enu_complex_loop"><h3>A Complex Loop</h3><p>If you need finer control over the steps of the logging function, this code demonstrates how the loop should be constructed.</p><p>Here are some guidelines for writing a loop function:</p><ul><li>If you want to log on an even interval, use <code>if (checkInterval())</code> or <code>if (checkMarkedInterval())</code> to verify that the current or marked time is an even interval of the logging interval..</li><li>Call the <code>markTime()</code> function if you want associate with a two iterations of sensor updates with the same timestamp. This allows you to use <code>checkMarkedInterval()</code> to check if an action should be preformed based on the exact time when the logger woke rather than upto several seconds later when iterating through sensors.</li><li>Either:<ul><li>Power up all of your sensors with <code>sensorsPowerUp()</code>.</li><li>Wake up all your sensors with <code>sensorsWake()</code>.</li><li>Update the values all the sensors in your <a href="class_variable_array.html" class="m-doc">VariableArray</a> together with <code>updateAllSensors()</code>.</li><li>Immediately after running <code>updateAllSensors()</code>, put sensors to sleep to save power with <code>sensorsSleep()</code>.</li><li>Power down all of your sensors with <code>sensorsPowerDown()</code>.</li></ul></li><li>Or:<ul><li>Do a full update loop of all sensors, including powering them with <code>completeUpdate()</code>. (This combines the previous 5 functions.)</li></ul></li><li>After updating the sensors, then call any functions you want to send/print/save data.</li><li>Finish by putting the logger back to sleep, if desired, with <code>systemSleep()</code>.</li></ul><p>All together, this gives:</p><pre class="m-code"><span class="c1">// Use this long loop when you want to do something special</span>
<span class="c1">// Because of the way alarms work on the RTC, it will wake the processor and</span>
<span class="c1">// start the loop every minute exactly on the minute.</span>
<span class="c1">// The processor may also be woken up by another interrupt or level change on a</span>
<span class="c1">// pin - from a button or some other input.</span>
<span class="c1">// The &quot;if&quot; statements in the loop determine what will happen - whether the</span>
<span class="c1">// sensors update, testing mode starts, or it goes back to sleep.</span>
<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Reset the watchdog</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

    <span class="c1">// Assuming we were woken up by the clock, check if the current time is an</span>
    <span class="c1">// even interval of the logging interval</span>
    <span class="c1">// We&#39;re only doing anything at all if the battery is above 3.4V</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dataLogger</span><span class="p">.</span><span class="n">checkInterval</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Flag to notify that we&#39;re in already awake and logging a point</span>
        <span class="n">Logger</span><span class="o">::</span><span class="n">isLoggingNow</span> <span class="o">=</span> <span class="kr">true</span><span class="p">;</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Print a line to show new reading</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;------------------------------------------&quot;</span><span class="p">));</span>
        <span class="c1">// Turn on the LED to show we&#39;re taking a reading</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">alertOn</span><span class="p">();</span>
        <span class="c1">// Power up the SD Card, but skip any waits after power up</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOnSDcard</span><span class="p">(</span><span class="kr">false</span><span class="p">);</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Turn on the modem to let it start searching for the network</span>
        <span class="c1">// Only turn the modem on if the battery at the last interval was high</span>
        <span class="c1">// enough</span>
        <span class="c1">// NOTE:  if the modemPowerUp function is not run before the</span>
        <span class="c1">// completeUpdate</span>
        <span class="c1">// function is run, the modem will not be powered and will not</span>
        <span class="c1">// return a signal strength reading.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.6</span><span class="p">)</span> <span class="n">modem</span><span class="p">.</span><span class="n">modemPowerUp</span><span class="p">();</span>

        <span class="c1">// Start the stream for the modbus sensors, if your RS485 adapter bleeds</span>
        <span class="c1">// current from data pins when powered off &amp; you stop modbus serial</span>
        <span class="c1">// connection with digitalWrite(5, LOW), below.</span>
        <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
        <span class="n">altSoftSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

        <span class="c1">// Do a complete update on the variable array.</span>
        <span class="c1">// This this includes powering all of the sensors, getting updated</span>
        <span class="c1">// values, and turing them back off.</span>
        <span class="c1">// NOTE:  The wake function for each sensor should force sensor setup</span>
        <span class="c1">// to run if the sensor was not previously set up.</span>
        <span class="n">varArray</span><span class="p">.</span><span class="n">completeUpdate</span><span class="p">();</span>

        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Reset modbus serial pins to LOW, if your RS485 adapter bleeds power</span>
        <span class="c1">// on sleep, because Modbus Stop bit leaves these pins HIGH.</span>
        <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Tx pin to LOW</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Rx pin to LOW</span>

        <span class="c1">// Create a csv data record and save it to the log file</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">logToSD</span><span class="p">();</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Connect to the network</span>
        <span class="c1">// Again, we&#39;re only doing this if the battery is doing well</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.55</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">modem</span><span class="p">.</span><span class="n">connectInternet</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                <span class="c1">// Publish data to remotes</span>
                <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Modem connected to internet.&quot;</span><span class="p">));</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">publishDataToRemotes</span><span class="p">();</span>

                <span class="c1">// Sync the clock at midnight</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">markedEpochTime</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
                    <span class="n">Logger</span><span class="o">::</span><span class="n">markedEpochTime</span> <span class="o">%</span> <span class="mi">86400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Running a daily clock sync...&quot;</span><span class="p">));</span>
                    <span class="n">dataLogger</span><span class="p">.</span><span class="n">setRTClock</span><span class="p">(</span><span class="n">modem</span><span class="p">.</span><span class="n">getNISTTime</span><span class="p">());</span>
                    <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                    <span class="n">modem</span><span class="p">.</span><span class="n">updateModemMetadata</span><span class="p">();</span>
                    <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="c1">// Disconnect from the network</span>
                <span class="n">modem</span><span class="p">.</span><span class="n">disconnectInternet</span><span class="p">();</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="c1">// Turn the modem off</span>
            <span class="n">modem</span><span class="p">.</span><span class="n">modemSleepPowerDown</span><span class="p">();</span>
            <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="c1">// Cut power from the SD card - without additional housekeeping wait</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOffSDcard</span><span class="p">(</span><span class="kr">false</span><span class="p">);</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
        <span class="c1">// Turn off the LED</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">alertOff</span><span class="p">();</span>
        <span class="c1">// Print a line to show reading ended</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span>

        <span class="c1">// Unset flag</span>
        <span class="n">Logger</span><span class="o">::</span><span class="n">isLoggingNow</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Check if it was instead the testing interrupt that woke us up</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">startTesting</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Start the stream for the modbus sensors, if your RS485 adapter bleeds</span>
        <span class="c1">// current from data pins when powered off &amp; you stop modbus serial</span>
        <span class="c1">// connection with digitalWrite(5, LOW), below.</span>
        <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
        <span class="n">altSoftSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

        <span class="n">dataLogger</span><span class="p">.</span><span class="n">testingMode</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Reset modbus serial pins to LOW, if your RS485 adapter bleeds power</span>
    <span class="c1">// on sleep, because Modbus Stop bit leaves these pins HIGH.</span>
    <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Tx pin to LOW</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Rx pin to LOW</span>

    <span class="c1">// Call the processor sleep</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">systemSleep</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span></pre><aside class="m-note m-dim"><h4><a href="todo.html#_todo000005" class="m-doc">Todo</a></h4><p>fix links</p></aside><p>If you need more help in writing a complex loop, the <a href="https://github.com/EnviroDIY/ModularSensors/tree/master/examples/double_logger">double_<wbr />logger example program</a> demonstrates using a custom loop function in order to log two different groups of sensors at different logging intervals. The <a href="https://github.com/EnviroDIY/ModularSensors/tree/master/examples/data_saving">data_<wbr />saving example program</a> shows using a custom loop in order to save cellular data by saving data from many variables on the SD card, but only sending a portion of the data to the EnviroDIY data portal.</p></section></section><section id="xample_menu_pio_config"><h2>PlatformIO Configuration</h2><pre class="m-code"><span class="c1">; PlatformIO Project Configuration File</span>
<span class="c1">;</span>
<span class="c1">;   Build options: build flags, source filter</span>
<span class="c1">;   Upload options: custom upload port, speed and extra flags</span>
<span class="c1">;   Library options: dependencies, extra library storages</span>
<span class="c1">;   Advanced options: extra scripting</span>
<span class="c1">;</span>
<span class="c1">; Please visit documentation for the other options and examples</span>
<span class="c1">; http://docs.platformio.org/page/projectconf.html</span>

<span class="k">[platformio]</span>
<span class="na">description</span> <span class="o">=</span> <span class="s">ModularSensors example menu_a_la_carte</span>

<span class="k">[env:mayfly]</span>
<span class="na">monitor_speed</span> <span class="o">=</span> <span class="s">115200</span>
<span class="na">board</span> <span class="o">=</span> <span class="s">mayfly</span>
<span class="na">platform</span> <span class="o">=</span> <span class="s">atmelavr</span>
<span class="na">framework</span> <span class="o">=</span> <span class="s">arduino</span>
<span class="na">lib_ldf_mode</span> <span class="o">=</span> <span class="s">deep+</span>
<span class="na">lib_ignore</span> <span class="o">=</span>
    <span class="na">RTCZero</span>
    <span class="na">Adafruit NeoPixel</span>
    <span class="na">Adafruit GFX Library</span>
    <span class="na">Adafruit SSD1306</span>
    <span class="na">Adafruit ADXL343</span>
    <span class="na">Adafruit STMPE610</span>
    <span class="na">Adafruit TouchScreen</span>
    <span class="na">Adafruit ILI9341</span>
<span class="na">build_flags</span> <span class="o">=</span>
    <span class="na">-DSDI12_EXTERNAL_PCINT</span>
    <span class="na">-DNEOSWSERIAL_EXTERNAL_PCINT</span>
    <span class="na">-DMQTT_MAX_PACKET_SIZE</span><span class="o">=</span><span class="s">240</span>
    <span class="na">-DTINY_GSM_RX_BUFFER</span><span class="o">=</span><span class="s">64</span>
    <span class="na">-DTINY_GSM_YIELD_MS</span><span class="o">=</span><span class="s">2</span>
    <span class="na">-DENABLE_SERIAL2</span>
    <span class="na">-DENABLE_SERIAL3</span>
    <span class="c1">; -D MS_BUILD_TEST_XBEE_CELLULAR  ; Turn on first time w/ a Digi LTE-M module</span>
    <span class="c1">; -D MS_LOGGERBASE_DEBUG</span>
    <span class="c1">; -D MS_DATAPUBLISHERBASE_DEBUG</span>
    <span class="c1">; -D MS_ENVIRODIYPUBLISHER_DEBUG</span>
<span class="na">lib_deps</span> <span class="o">=</span>
    <span class="na">envirodiy/EnviroDIY_ModularSensors</span>
<span class="c1">;  ^^ Use this when working from a tagged release of the library</span>
<span class="c1">;     See tags at https://platformio.org/lib/show/1648/EnviroDIY_ModularSensors</span>

<span class="c1">;    https://github.com/EnviroDIY/ModularSensors.git#develop</span>
<span class="c1">;  ^^ Use this when if you want to pull from the develop branch</span>

    <span class="na">https://github.com/PaulStoffregen/AltSoftSerial.git</span>
    <span class="na">https://github.com/SRGDamia1/NeoSWSerial.git</span>
    <span class="na">https://github.com/EnviroDIY/SoftwareSerial_ExternalInts.git</span>
<span class="c1">;  ^^ These are software serial port emulator libraries, you may not need them</span></pre></section><section id="xample_menu_code"><h2>The Complete Code</h2><pre class="m-code"><span class="cm">/** =========================================================================</span>
<span class="cm"> * @file menu_a_la_carte.ino</span>
<span class="cm"> * @brief Example with all possible functionality.</span>
<span class="cm"> *</span>
<span class="cm"> * @author Sara Geleskie Damiano &lt;sdamiano@stroudcenter.org&gt;</span>
<span class="cm"> * @copyright (c) 2017-2020 Stroud Water Research Center (SWRC)</span>
<span class="cm"> *                          and the EnviroDIY Development Team</span>
<span class="cm"> *            This example is published under the BSD-3 license.</span>
<span class="cm"> *</span>
<span class="cm"> * Build Environment: Visual Studios Code with PlatformIO</span>
<span class="cm"> * Hardware Platform: EnviroDIY Mayfly Arduino Datalogger</span>
<span class="cm"> *</span>
<span class="cm"> * DISCLAIMER:</span>
<span class="cm"> * THIS CODE IS PROVIDED &quot;AS IS&quot; - NO WARRANTY IS GIVEN.</span>
<span class="cm"> * ======================================================================= */</span>

<span class="c1">// ==========================================================================</span>
<span class="c1">//  Defines for the Arduino IDE</span>
<span class="c1">//  NOTE:  These are ONLY needed to compile with the Arduino IDE.</span>
<span class="c1">//         If you use PlatformIO, you should set these build flags in your</span>
<span class="c1">//         platformio.ini</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [defines] */</span>
<span class="cp">#ifndef TINY_GSM_RX_BUFFER</span>
<span class="cp">#define TINY_GSM_RX_BUFFER 64</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef TINY_GSM_YIELD_MS</span>
<span class="cp">#define TINY_GSM_YIELD_MS 2</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef MQTT_MAX_PACKET_SIZE</span>
<span class="cp">#define MQTT_MAX_PACKET_SIZE 240</span>
<span class="cp">#endif</span>
<span class="cm">/** End [defines] */</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Include the libraries required for any data logger</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [includes] */</span>
<span class="c1">// The Arduino library is needed for every Arduino program.</span>
<span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp"></span>

<span class="c1">// EnableInterrupt is used by ModularSensors for external and pin change</span>
<span class="c1">// interrupts and must be explicitly included in the main program.</span>
<span class="cp">#include</span> <span class="cpf">&lt;EnableInterrupt.h&gt;</span><span class="cp"></span>

<span class="c1">// To get all of the base classes for ModularSensors, include LoggerBase.</span>
<span class="c1">// NOTE:  Individual sensor definitions must be included separately.</span>
<span class="cp">#include</span> <span class="cpf">&lt;LoggerBase.h&gt;</span><span class="cp"></span>
<span class="cm">/** End [includes] */</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Creating Additional Serial Ports</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">// The modem and a number of sensors communicate over UART/TTL - often called</span>
<span class="c1">// &quot;serial&quot;. &quot;Hardware&quot; serial ports (automatically controlled by the MCU) are</span>
<span class="c1">// generally the most accurate and should be configured and used for as many</span>
<span class="c1">// peripherals as possible.  In some cases (ie, modbus communication) many</span>
<span class="c1">// sensors can share the same serial port.</span>

<span class="cp">#if defined(ARDUINO_ARCH_AVR) || defined(__AVR__)  </span><span class="c1">// For AVR boards</span>
<span class="c1">// Unfortunately, most AVR boards have only one or two hardware serial ports,</span>
<span class="c1">// so we&#39;ll set up three types of extra software serial ports to use</span>

<span class="cp">#ifdef MS_BUILD_TEST_ALTSOFTSERIAL</span>
<span class="c1">// AltSoftSerial by Paul Stoffregen</span>
<span class="c1">// (https://github.com/PaulStoffregen/AltSoftSerial) is the most accurate</span>
<span class="c1">// software serial port for AVR boards. AltSoftSerial can only be used on one</span>
<span class="c1">// set of pins on each board so only one AltSoftSerial port can be used. Not all</span>
<span class="c1">// AVR boards are supported by AltSoftSerial.</span>
<span class="cm">/** Start [altsoftserial] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;AltSoftSerial.h&gt;</span><span class="cp"></span>
<span class="n">AltSoftSerial</span> <span class="n">altSoftSerial</span><span class="p">;</span>
<span class="cm">/** End [altsoftserial] */</span>
<span class="cp">#endif  </span><span class="c1">// #ifdef MS_BUILD_TEST_ALTSOFTSERIAL</span>

<span class="cp">#ifdef MS_BUILD_TEST_NEOSWSERIAL</span>
<span class="c1">// NeoSWSerial (https://github.com/SRGDamia1/NeoSWSerial) is the best software</span>
<span class="c1">// serial that can be used on any pin supporting interrupts.</span>
<span class="c1">// You can use as many instances of NeoSWSerial as you need.</span>
<span class="c1">// Not all AVR boards are supported by NeoSWSerial.</span>
<span class="cm">/** Start [neoswserial] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;NeoSWSerial.h&gt;</span><span class="c1">          // for the stream communication</span><span class="cp"></span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">neoSSerial1Rx</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>  <span class="c1">// data in pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">neoSSerial1Tx</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// data out pin</span>
<span class="n">NeoSWSerial</span>  <span class="nf">neoSSerial1</span><span class="p">(</span><span class="n">neoSSerial1Rx</span><span class="p">,</span> <span class="n">neoSSerial1Tx</span><span class="p">);</span>
<span class="c1">// To use NeoSWSerial in this library, we define a function to receive data</span>
<span class="c1">// This is just a short-cut for later</span>
<span class="kr">void</span> <span class="nf">neoSSerial1ISR</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">NeoSWSerial</span><span class="o">::</span><span class="n">rxISR</span><span class="p">(</span><span class="o">*</span><span class="n">portInputRegister</span><span class="p">(</span><span class="n">digitalPinToPort</span><span class="p">(</span><span class="n">neoSSerial1Rx</span><span class="p">)));</span>
<span class="p">}</span>
<span class="cm">/** End [neoswserial] */</span>
<span class="cp">#endif  </span><span class="c1">// #ifdef MS_BUILD_TEST_NEOSWSERIAL</span>

<span class="cp">#ifdef MS_BUILD_TEST_SOFTSERIAL</span>
<span class="c1">// The &quot;standard&quot; software serial library uses interrupts that conflict</span>
<span class="c1">// with several other libraries used within this program.  I&#39;ve created a</span>
<span class="c1">// [version of software serial that has been stripped of</span>
<span class="c1">// interrupts](https://github.com/EnviroDIY/SoftwareSerial_ExtInts) but it is</span>
<span class="c1">// still far from ideal.</span>
<span class="c1">// NOTE:  Only use if necessary.  This is not a very accurate serial port!</span>
<span class="c1">// You can use as many instances of SoftwareSerial as you need.</span>
<span class="cm">/** Start [softwareserial] */</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softSerialRx</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// data in pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softSerialTx</span> <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>  <span class="c1">// data out pin</span>

<span class="cp">#include</span> <span class="cpf">&lt;SoftwareSerial_ExtInts.h&gt;</span><span class="c1">  // for the stream communication</span><span class="cp"></span>
<span class="n">SoftwareSerial_ExtInts</span> <span class="nf">softSerial1</span><span class="p">(</span><span class="n">softSerialRx</span><span class="p">,</span> <span class="n">softSerialTx</span><span class="p">);</span>
<span class="cm">/** End [softwareserial] */</span>
<span class="cp">#endif  </span><span class="c1">// #ifdef MS_BUILD_TEST_SOFTSERIAL</span>


<span class="cp">#if defined MS_PALEOTERRA_SOFTWAREWIRE || defined MS_ATLAS_SOFTWAREWIRE || \</span>
<span class="cp">    defined                                       MS_RAIN_SOFTWAREWIRE</span>
<span class="cm">/** Start [softwarewire] */</span>
<span class="c1">// A software I2C (Wire) instance using Testato&#39;s SoftwareWire</span>
<span class="c1">// To use SoftwareWire, you must also set a define for the sensor you want to</span>
<span class="c1">// use Software I2C for, ie:</span>
<span class="c1">//   `#define MS_ATLAS_SOFTWAREWIRE`</span>
<span class="c1">//   `#define MS_RAIN_SOFTWAREWIRE`</span>
<span class="c1">//   `#define MS_PALEOTERRA_SOFTWAREWIRE`</span>
<span class="c1">// or set the build flag(s):</span>
<span class="c1">//   `-D MS_ATLAS_SOFTWAREWIRE`</span>
<span class="c1">//   `-D MS_RAIN_SOFTWAREWIRE`</span>
<span class="c1">//   `-D MS_PALEOTERRA_SOFTWAREWIRE`</span>
<span class="cp">#include</span> <span class="cpf">&lt;SoftwareWire.h&gt;</span><span class="c1">  // Testato&#39;s Software I2C</span><span class="cp"></span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softwareSDA</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">softwareSCL</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">SoftwareWire</span> <span class="nf">softI2C</span><span class="p">(</span><span class="n">softwareSDA</span><span class="p">,</span> <span class="n">softwareSCL</span><span class="p">);</span>
<span class="cm">/** End [softwarewire] */</span>
<span class="cp">#endif  </span><span class="c1">//  #if defined MS_PALEOTERRA_SOFTWAREWIRE ...</span>

<span class="cp">#endif  </span><span class="c1">// End software serial for avr boards</span>

<span class="cp">#if defined ARDUINO_ARCH_SAMD</span>
<span class="cm">/** Start [serial_ports_SAMD] */</span>
<span class="c1">// The SAMD21 has 6 &quot;SERCOM&quot; ports, any of which can be used for UART</span>
<span class="c1">// communication.  The &quot;core&quot; code for most boards defines one or more UART</span>
<span class="c1">// (Serial) ports with the SERCOMs and uses others for I2C and SPI.  We can</span>
<span class="c1">// create new UART ports on any available SERCOM.  The table below shows</span>
<span class="c1">// definitions for select boards.</span>

<span class="c1">// Board =&gt;   Arduino Zero       Adafruit Feather    Sodaq Boards</span>
<span class="c1">// -------    ---------------    ----------------    ----------------</span>
<span class="c1">// SERCOM0    Serial1 (D0/D1)    Serial1 (D0/D1)     Serial (D0/D1)</span>
<span class="c1">// SERCOM1    Available          Available           Serial3 (D12/D13)</span>
<span class="c1">// SERCOM2    Available          Available           I2C (A4/A5)</span>
<span class="c1">// SERCOM3    I2C (D20/D21)      I2C (D20/D21)       SPI (D11/12/13)</span>
<span class="c1">// SERCOM4    SPI (D21/22/23)    SPI (D21/22/23)     SPI1/Serial2</span>
<span class="c1">// SERCOM5    EDBG/Serial        Available           Serial1</span>

<span class="c1">// If using a Sodaq board, do not define the new sercoms, instead:</span>
<span class="c1">// #define ENABLE_SERIAL2</span>
<span class="c1">// #define ENABLE_SERIAL3</span>

<span class="cp">#include</span> <span class="cpf">&lt;wiring_private.h&gt;</span><span class="c1">  // Needed for SAMD pinPeripheral() function</span><span class="cp"></span>

<span class="cp">#ifndef ENABLE_SERIAL2</span>
<span class="c1">// Set up a &#39;new&#39; UART using SERCOM1</span>
<span class="c1">// The Rx will be on digital pin 11, which is SERCOM1&#39;s Pad #0</span>
<span class="c1">// The Tx will be on digital pin 10, which is SERCOM1&#39;s Pad #2</span>
<span class="c1">// NOTE:  SERCOM1 is undefinied on a &quot;standard&quot; Arduino Zero and many clones,</span>
<span class="c1">//        but not all!  Please check the variant.cpp file for you individual</span>
<span class="c1">//        board! Sodaq Autonomo&#39;s and Sodaq One&#39;s do NOT follow the &#39;standard&#39;</span>
<span class="c1">//        SERCOM definitions!</span>
<span class="n">Uart</span> <span class="nf">Serial2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sercom1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">SERCOM_RX_PAD_0</span><span class="p">,</span> <span class="n">UART_TX_PAD_2</span><span class="p">);</span>
<span class="c1">// Hand over the interrupts to the sercom port</span>
<span class="kr">void</span> <span class="nf">SERCOM1_Handler</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial2</span><span class="p">.</span><span class="n">IrqHandler</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef ENABLE_SERIAL3</span>
<span class="c1">// Set up a &#39;new&#39; UART using SERCOM2</span>
<span class="c1">// The Rx will be on digital pin 5, which is SERCOM2&#39;s Pad #3</span>
<span class="c1">// The Tx will be on digital pin 2, which is SERCOM2&#39;s Pad #2</span>
<span class="c1">// NOTE:  SERCOM2 is undefinied on a &quot;standard&quot; Arduino Zero and many clones,</span>
<span class="c1">//        but not all!  Please check the variant.cpp file for you individual</span>
<span class="c1">//        board! Sodaq Autonomo&#39;s and Sodaq One&#39;s do NOT follow the &#39;standard&#39;</span>
<span class="c1">//        SERCOM definitions!</span>
<span class="n">Uart</span> <span class="nf">Serial3</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sercom2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SERCOM_RX_PAD_3</span><span class="p">,</span> <span class="n">UART_TX_PAD_2</span><span class="p">);</span>
<span class="c1">// Hand over the interrupts to the sercom port</span>
<span class="kr">void</span> <span class="nf">SERCOM2_Handler</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial3</span><span class="p">.</span><span class="n">IrqHandler</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/** End [serial_ports_SAMD] */</span>
<span class="cp">#endif  </span><span class="c1">// End hardware serial on SAMD21 boards</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Assigning Serial Port Functionality</span>
<span class="c1">// ==========================================================================</span>
<span class="cp">#if defined ARDUINO_ARCH_SAMD || defined ATMEGA2560 || \</span>
<span class="cp">    defined                              ARDUINO_AVR_MEGA2560</span>
<span class="cm">/** Start [assign_ports_hw] */</span>
<span class="c1">// If there are additional hardware Serial ports possible - use them!</span>

<span class="c1">// We give the modem first priority and assign it to hardware serial</span>
<span class="c1">// All of the supported processors have a hardware port available named Serial1</span>
<span class="cp">#define modemSerial Serial1</span>

<span class="c1">// Define the serial port for modbus</span>
<span class="c1">// Modbus (at 9600 8N1) is used by the Keller level loggers and Yosemitech</span>
<span class="c1">// sensors</span>
<span class="cp">#define modbusSerial Serial2</span>

<span class="c1">// The Maxbotix sonar is the only sensor that communicates over a serial port</span>
<span class="c1">// but does not use modbus</span>
<span class="cp">#define sonarSerial Serial3</span>

<span class="cm">/** End [assign_ports_hw] */</span>
<span class="cp">#else</span>
<span class="cm">/** Start [assign_ports_sw] */</span>

<span class="c1">// We give the modem first priority and assign it to hardware serial</span>
<span class="c1">// All of the supported processors have a hardware port available named Serial1</span>
<span class="cp">#define modemSerial Serial1</span>

<span class="c1">// Define the serial port for modbus</span>
<span class="c1">// Modbus (at 9600 8N1) is used by the Keller level loggers and Yosemitech</span>
<span class="c1">// sensors</span>
<span class="c1">// Since AltSoftSerial is the best software option, we use it for modbus</span>
<span class="c1">// If AltSoftSerial (or its pins) aren&#39;t avaiable, use NeoSWSerial</span>
<span class="c1">// SoftwareSerial **WILL NOT** work for modbus!</span>
<span class="cp">#define modbusSerial altSoftSerial  </span><span class="c1">// For AltSoftSerial</span>
<span class="c1">// #define modbusSerial neoSSerial1  // For Neo software serial</span>
<span class="c1">// #define modbusSerial softSerial1  // For software serial</span>

<span class="c1">// The Maxbotix sonar is the only sensor that communicates over a serial port</span>
<span class="c1">// but does not use modbus</span>
<span class="c1">// Since the Maxbotix only needs one-way communication and sends a simple text</span>
<span class="c1">// string repeatedly, almost any software serial port will do for it.</span>
<span class="c1">// #define sonarSerial altSoftSerial  // For AltSoftSerial</span>
<span class="cp">#define sonarSerial neoSSerial1     </span><span class="c1">// For Neo software serial</span>
<span class="c1">// #define sonarSerial softSerial1  // For software serial</span>

<span class="cm">/** End [assign_ports_sw] */</span>
<span class="cp">#endif</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Data Logging Options</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [logging_options] */</span>
<span class="c1">// The name of this program file</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">sketchName</span> <span class="o">=</span> <span class="s">&quot;menu_a_la_carte.ino&quot;</span><span class="p">;</span>
<span class="c1">// Logger ID, also becomes the prefix for the name of the data file on SD card</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">LoggerID</span> <span class="o">=</span> <span class="s">&quot;XXXXX&quot;</span><span class="p">;</span>
<span class="c1">// How frequently (in minutes) to log data</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">loggingInterval</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// Your logger&#39;s timezone.</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">timeZone</span> <span class="o">=</span> <span class="mi">-5</span><span class="p">;</span>  <span class="c1">// Eastern Standard Time</span>
<span class="c1">// NOTE:  Daylight savings time will not be applied!  Please use standard time!</span>

<span class="c1">// Set the input and output pins for the logger</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">serialBaud</span> <span class="o">=</span> <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Baud rate for debugging</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">greenLED</span>   <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>       <span class="c1">// Pin for the green LED</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">redLED</span>     <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>       <span class="c1">// Pin for the red LED</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">buttonPin</span>  <span class="o">=</span> <span class="mi">21</span><span class="p">;</span>      <span class="c1">// Pin for debugging mode (ie, button pin)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">wakePin</span>    <span class="o">=</span> <span class="n">A7</span><span class="p">;</span>  <span class="c1">// MCU interrupt/alarm pin to wake from sleep</span>
<span class="c1">// Set the wake pin to -1 if you do not want the main processor to sleep.</span>
<span class="c1">// In a SAMD system where you are using the built-in rtc, set wakePin to 1</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">sdCardPwrPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU SD card power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">sdCardSSPin</span>    <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>  <span class="c1">// SD card chip select/slave select pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">sensorPowerPin</span> <span class="o">=</span> <span class="mi">22</span><span class="p">;</span>  <span class="c1">// MCU pin controlling main sensor power</span>
<span class="cm">/** End [logging_options] */</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Wifi/Cellular Modem Options</span>
<span class="c1">//    NOTE:  DON&#39;T USE MORE THAN ONE MODEM OBJECT!</span>
<span class="c1">//           Delete the sections you are not using!</span>
<span class="c1">// ==========================================================================</span>

<span class="cp">#if defined MS_BUILD_TEST_XBEE_CELLULAR</span>
<span class="cm">/** Start [xbee_cell_transparent] */</span>
<span class="c1">// For any Digi Cellular XBee&#39;s</span>
<span class="c1">// NOTE:  The u-blox based Digi XBee&#39;s (3G global and LTE-M global) can be used</span>
<span class="c1">// in either bypass or transparent mode, each with pros and cons</span>
<span class="c1">// The Telit based Digi XBees (LTE Cat1) can only use this mode.</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBeeCellularTransparent.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee with a Mayfly and LTE adapter</span>
<span class="c1">// For options https://github.com/EnviroDIY/LTEbee-Adapter/edit/master/README.md</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>     <span class="c1">// MCU pin controlling modem power</span>
                                   <span class="c1">// Option: modemVccPin = A5, if Mayfly SJ7 is</span>
                                   <span class="c1">// connected to the ASSOC pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>     <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>     <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>     <span class="c1">// MCU pin connected an LED to show modem</span>
                                       <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBeeCellularTransparent</span> <span class="nf">modemXBCT</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                                      <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span>
                                      <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBeeCellularTransparent</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXBCT</span><span class="p">;</span>
<span class="cm">/** End [xbee_cell_transparent] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_XBEE_LTE_B</span>
<span class="cm">/** Start [xbee3_ltem_bypass] */</span>
<span class="c1">// For the u-blox SARA R410M based Digi LTE-M XBee3</span>
<span class="c1">// NOTE:  According to the manual, this should be less stable than transparent</span>
<span class="c1">// mode, but my experience is the complete reverse.</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBeeLTEBypass.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee with a Mayfly and LTE adapter</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>    <span class="o">=</span> <span class="n">A5</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>     <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>     <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>     <span class="c1">// MCU pin connected an LED to show modem</span>
                                       <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBeeLTEBypass</span> <span class="nf">modemXBLTEB</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                              <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span>
                              <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBeeLTEBypass</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXBLTEB</span><span class="p">;</span>
<span class="cm">/** End [xbee3_ltem_bypass] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_XBEE_3G_B</span>
<span class="cm">/** Start [xbee_3g_bypass] */</span>
<span class="c1">// For the u-blox SARA U201 based Digi 3G XBee with 2G fallback</span>
<span class="c1">// NOTE:  According to the manual, this should be less stable than transparent</span>
<span class="c1">// mode, but my experience is the complete reverse.</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBee3GBypass.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee with a Mayfly and LTE adapter</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>    <span class="o">=</span> <span class="n">A5</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>     <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>     <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>     <span class="c1">// MCU pin connected an LED to show modem</span>
                                       <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBee3GBypass</span> <span class="nf">modemXB3GB</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                            <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span>
                            <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBee3GBypass</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXB3GB</span><span class="p">;</span>
<span class="cm">/** End [xbee_3g_bypass] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_XBEE_WIFI</span>
<span class="cm">/** Start [xbee_wifi] */</span>
<span class="c1">// For the Digi Wifi XBee (S6B)</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/DigiXBeeWifi.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">// All XBee&#39;s use 9600 by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// The pin numbers here are for a Digi XBee direcly connected to a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>    <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="c1">// NOTE:  If possible, use the `STATUS/SLEEP_not` (XBee pin 13) for status, but</span>
<span class="c1">// the CTS pin can also be used if necessary</span>
<span class="kr">const</span> <span class="kr">bool</span>   <span class="n">useCTSforStatus</span> <span class="o">=</span> <span class="kr">true</span><span class="p">;</span>  <span class="c1">// Flag to use the CTS pin for status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>    <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>    <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>    <span class="c1">// MCU pin connected an LED to show modem</span>
                                      <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiId</span>  <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi access point name</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiPwd</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi password (WPA2)</span>

<span class="c1">// Create the modem object</span>
<span class="n">DigiXBeeWifi</span> <span class="nf">modemXBWF</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                       <span class="n">useCTSforStatus</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">wifiId</span><span class="p">,</span>
                       <span class="n">wifiPwd</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">DigiXBeeWifi</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemXBWF</span><span class="p">;</span>
<span class="cm">/** End [xbee_wifi] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_ESP8266</span>
<span class="cm">/** Start [esp8266] */</span>
<span class="c1">// For almost anything based on the Espressif ESP8266 using the</span>
<span class="c1">// AT command firmware</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/EspressifESP8266.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Communication speed of the modem</span>
<span class="c1">// NOTE:  This baud rate too fast for an 8MHz board, like the Mayfly!  The</span>
<span class="c1">// module should be programmed to a slower baud rate or set to auto-baud using</span>
<span class="c1">// the AT+UART_CUR or AT+UART_DEF command.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins here are for a DFRobot ESP8266 Bee with Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-2</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin for wake from light sleep</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>
<span class="c1">// Pins for light sleep on the ESP8266. For power savings, I recommend</span>
<span class="c1">// NOT using these if it&#39;s possible to use deep sleep.</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">espSleepRqPin</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>  <span class="c1">// GPIO# ON THE ESP8266 to assign for light</span>
                                  <span class="c1">// sleep request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">espStatusPin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>   <span class="c1">// GPIO# ON THE ESP8266 to assign for light</span>
                                  <span class="c1">// sleep status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiId</span>  <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi access point name</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">wifiPwd</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// WiFi password (WPA2)</span>

<span class="c1">// Create the modem object</span>
<span class="n">EspressifESP8266</span> <span class="nf">modemESP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                          <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">wifiId</span><span class="p">,</span> <span class="n">wifiPwd</span><span class="p">,</span>
                          <span class="n">espSleepRqPin</span><span class="p">,</span>
                          <span class="n">espStatusPin</span>  <span class="c1">// Optional arguments</span>
<span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">EspressifESP8266</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemESP</span><span class="p">;</span>
<span class="cm">/** End [esp8266] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_BG96</span>
<span class="cm">/** Start [bg96] */</span>
<span class="c1">// For the Dragino, Nimbelink or other boards based on the Quectel BG96</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/QuectelBG96.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Communication speed of the modem</span>
<span class="c1">// NOTE:  This baud rate too fast for an 8MHz board, like the Mayfly!  The</span>
<span class="c1">// module should be programmed to a slower baud rate or set to auto-baud using</span>
<span class="c1">// the AT+IPR=9600 command.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins here are for a modified Mayfly and a Dragino IoT Bee</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">QuectelBG96</span> <span class="nf">modemBG96</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span>
                      <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">QuectelBG96</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemBG96</span><span class="p">;</span>
<span class="cm">/** End [bg96] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_MONARCH</span>
<span class="cm">/** Start [monarch] */</span>
<span class="c1">// For the Nimbelink LTE-M Verizon/Sequans or other boards based on the Sequans</span>
<span class="c1">// Monarch series</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SequansMonarch.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">921600</span><span class="p">;</span>  <span class="c1">// Default baud rate of SVZM20 is 921600</span>
<span class="c1">// NOTE:  This baud rate is much too fast for many Arduinos!  The module should</span>
<span class="c1">// be programmed to a slower baud rate or set to auto-baud using the AT+IPR</span>
<span class="c1">// command.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Nimbelink Skywire (NOT directly connectable to a Mayfly!)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SequansMonarch</span> <span class="nf">modemSVZM</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                         <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SequansMonarch</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemSVZM</span><span class="p">;</span>
<span class="cm">/** End [monarch] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_SIM800</span>
<span class="cm">/** Start [sim800] */</span>
<span class="c1">// For almost anything based on the SIMCom SIM800 EXCEPT the Sodaq 2GBee R6 and</span>
<span class="c1">// higher</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SIMComSIM800.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SIM800 does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq GPRSBee R4 with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SIMComSIM800</span> <span class="nf">modemS800</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span> <span class="n">modemResetPin</span><span class="p">,</span>
                       <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SIMComSIM800</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemS800</span><span class="p">;</span>
<span class="cm">/** End [sim800] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_SIM7000</span>
<span class="cm">/** Start [sim7000] */</span>
<span class="c1">// For almost anything based on the SIMCom SIM7000</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SIMComSIM7000.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SIM7000 does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SIMComSIM7000</span> <span class="nf">modem7000</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                        <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SIMComSIM7000</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modem7000</span><span class="p">;</span>
<span class="cm">/** End [sim7000] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_S2GB</span>
<span class="cm">/** Start [gprsbee] */</span>
<span class="c1">// For the Sodaq 2GBee R6 and R7 based on the SIMCom SIM800</span>
<span class="c1">// NOTE:  The Sodaq GPRSBee doesn&#39;t expose the SIM800&#39;s reset pin</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/Sodaq2GBeeR6.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span> <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SIM800 does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq GPRSBee R6 or R7 with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">Sodaq2GBeeR6</span> <span class="nf">modem2GB</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">Sodaq2GBeeR6</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modem2GB</span><span class="p">;</span>
<span class="cm">/** End [gprsbee] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_UBEE_R410M</span>
<span class="cm">/** Start [sara_r410m] */</span>
<span class="c1">// For the Sodaq UBee based on the 4G LTE-M u-blox SARA R410M</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SodaqUBeeR410M.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span>
    <span class="mi">115200</span><span class="p">;</span>  <span class="c1">// Default baud rate of the SARA R410M is 115200</span>
<span class="c1">// NOTE:  The SARA R410N DOES NOT save baud rate to non-volatile memory.  After</span>
<span class="c1">// every power loss, the module will return to the default baud rate of 115200.</span>
<span class="c1">// NOTE:  115200 is TOO FAST for an 8MHz Arduino.  This library attempts to</span>
<span class="c1">// compensate by sending a baud rate change command in the wake function when</span>
<span class="c1">// compiled for a 8MHz board. Because of this, 8MHz boards, LIKE THE MAYFLY,</span>
<span class="c1">// *MUST* use a HardwareSerial instance as modemSerial.</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq uBee R410M with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SodaqUBeeR410M</span> <span class="nf">modemR410</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                         <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SodaqUBeeR410M</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemR410</span><span class="p">;</span>
<span class="cm">/** End [sara_r410m] */</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#elif defined MS_BUILD_TEST_UBEE_U201</span>
<span class="cm">/** Start [sara_u201] */</span>
<span class="c1">// For the Sodaq UBee based on the 3G u-blox SARA U201</span>
<span class="cp">#include</span> <span class="cpf">&lt;modems/SodaqUBeeU201.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>
<span class="kr">const</span> <span class="kr">int32_t</span> <span class="n">modemBaud</span> <span class="o">=</span>
    <span class="mi">9600</span><span class="p">;</span>  <span class="c1">//  SARA U2xx module does auto-bauding by default</span>

<span class="c1">// Modem Pins - Describe the physical pin connection of your modem to your board</span>
<span class="c1">// NOTE:  Use -1 for pins that do not apply</span>
<span class="c1">// Example pins are for a Sodaq uBee U201 with a Mayfly</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemVccPin</span>     <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// MCU pin controlling modem power</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemStatusPin</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>  <span class="c1">// MCU pin used to read modem status</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemResetPin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// MCU pin connected to modem reset pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemSleepRqPin</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">// MCU pin for modem sleep/wake request</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">modemLEDPin</span> <span class="o">=</span> <span class="n">redLED</span><span class="p">;</span>  <span class="c1">// MCU pin connected an LED to show modem</span>
                                    <span class="c1">// status</span>

<span class="c1">// Network connection information</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">apn</span> <span class="o">=</span> <span class="s">&quot;xxxxx&quot;</span><span class="p">;</span>  <span class="c1">// APN for GPRS connection</span>

<span class="c1">// Create the modem object</span>
<span class="n">SodaqUBeeU201</span> <span class="nf">modemU201</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modemSerial</span><span class="p">,</span> <span class="n">modemVccPin</span><span class="p">,</span> <span class="n">modemStatusPin</span><span class="p">,</span>
                        <span class="n">modemResetPin</span><span class="p">,</span> <span class="n">modemSleepRqPin</span><span class="p">,</span> <span class="n">apn</span><span class="p">);</span>
<span class="c1">// Create an extra reference to the modem by a generic name</span>
<span class="n">SodaqUBeeU201</span> <span class="n">modem</span> <span class="o">=</span> <span class="n">modemU201</span><span class="p">;</span>
<span class="cm">/** End [sara_u201] */</span>
<span class="c1">// ==========================================================================</span>
<span class="cp">#endif</span>


<span class="cm">/** Start [modem_variables] */</span>
<span class="c1">// Create RSSI and signal strength variable pointers for the modem</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemRSSI</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Modem_RSSI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="nf">RSSI</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemSignalPct</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_SignalPercent</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;signalPercent&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemBatteryState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_BatteryState</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemBatteryCS&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemBatteryPct</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_BatteryPercent</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemBatteryPct&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemBatteryVoltage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modem_BatteryVoltage</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemBatterymV&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">modemTemperature</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Modem_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;modemTemp&quot;</span><span class="p">);</span>
<span class="cm">/** End [modem_variables] */</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Using the Processor as a Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [processor_sensor] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/ProcessorStats.h&gt;</span><span class="cp"></span>

<span class="c1">// Create the main processor chip &quot;sensor&quot; - for general metadata</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>    <span class="n">mcuBoardVersion</span> <span class="o">=</span> <span class="s">&quot;v0.5b&quot;</span><span class="p">;</span>
<span class="n">ProcessorStats</span> <span class="nf">mcuBoard</span><span class="p">(</span><span class="n">mcuBoardVersion</span><span class="p">);</span>

<span class="c1">// Create sample number, battery voltage, and free RAM variable pointers for the</span>
<span class="c1">// processor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mcuBoardBatt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessorStats_Battery</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mcuBoardAvailableRAM</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessorStats_FreeRam</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mcuBoardSampNo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessorStats_SampleNumber</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [processor_sensor] */</span>


<span class="cp">#if defined ARDUINO_ARCH_AVR || defined MS_SAMD_DS3231</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Maxim DS3231 RTC (Real Time Clock)</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [ds3231] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/MaximDS3231.h&gt;</span><span class="cp"></span>

<span class="c1">// Create a DS3231 sensor object</span>
<span class="n">MaximDS3231</span> <span class="nf">ds3231</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// Create a temperature variable pointer for the DS3231</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ds3231Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MaximDS3231_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds3231</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [ds3231] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_AM2315 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  AOSong AM2315 Digital Humidity and Temperature Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [am2315] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AOSongAM2315.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AM2315Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>

<span class="c1">// Create an AOSong AM2315 sensor object</span>
<span class="n">AOSongAM2315</span> <span class="nf">am2315</span><span class="p">(</span><span class="n">AM2315Power</span><span class="p">);</span>

<span class="c1">// Create humidity and temperature variable pointers for the AM2315</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">am2315Humid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongAM2315_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">am2315</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">am2315Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongAM2315_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">am2315</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [am2315] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_DHT || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  AOSong DHT 11/21 (AM2301)/22 (AM2302) Digital Humidity and Temperature</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [dht] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AOSongDHT.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">DHTPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">DHTPin</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>              <span class="c1">// DHT data pin</span>
<span class="n">DHTtype</span>      <span class="n">dhtType</span>  <span class="o">=</span> <span class="n">DHT11</span><span class="p">;</span>  <span class="c1">// DHT type, either DHT11, DHT21, or DHT22</span>

<span class="c1">// Create an AOSong DHT sensor object</span>
<span class="n">AOSongDHT</span> <span class="nf">dht</span><span class="p">(</span><span class="n">DHTPower</span><span class="p">,</span> <span class="n">DHTPin</span><span class="p">,</span> <span class="n">dhtType</span><span class="p">);</span>

<span class="c1">// Create humidity, temperature, and heat index variable pointers for the DHT</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtHumid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AOSongDHT_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AOSongDHT_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span>
                                       <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dhtHI</span>   <span class="o">=</span> <span class="k">new</span> <span class="n">AOSongDHT_HI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dht</span><span class="p">,</span>
                                   <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [dht] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_SQ212 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Apogee SQ-212 Photosynthetically Active Radiation (PAR) Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [sq212] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/ApogeeSQ212.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">SQ212Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">SQ212ADSChannel</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>         <span class="c1">// The ADS channel for the SQ212</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">SQ212ADSi2c_addr</span> <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>

<span class="c1">// Create an Apogee SQ212 sensor object</span>
<span class="n">ApogeeSQ212</span> <span class="nf">SQ212</span><span class="p">(</span><span class="n">SQ212Power</span><span class="p">,</span> <span class="n">SQ212ADSChannel</span><span class="p">,</span> <span class="n">SQ212ADSi2c_addr</span><span class="p">);</span>

<span class="c1">// Create PAR and raw voltage variable pointers for the SQ212</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">sq212PAR</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ApogeeSQ212_PAR</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SQ212</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">sq212voltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ApogeeSQ212_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SQ212</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [sq212] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ATLASCO2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Atlas Scientific EZO-CO2 Embedded NDIR Carbon Dioxide Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [atlas_co2] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificCO2.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasCO2Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasCO2i2c_addr</span> <span class="o">=</span> <span class="mh">0x69</span><span class="p">;</span>  <span class="c1">// Default for CO2-EZO is 0x69 (105)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific CO2 sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="c1">// AtlasScientificCO2 atlasCO2(AtlasCO2Power, softwareSDA, softwareSCL,</span>
<span class="c1">//                             AtlasCO2i2c_addr);</span>
<span class="n">AtlasScientificCO2</span> <span class="nf">atlasCO2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasCO2Power</span><span class="p">,</span> <span class="n">AtlasCO2i2c_addr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificCO2 atlasCO2(AtlasCO2Power, AtlasCO2i2c_addr);</span>
<span class="n">AtlasScientificCO2</span> <span class="nf">atlasCO2</span><span class="p">(</span><span class="n">AtlasCO2Power</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create concentration and temperature variable pointers for the EZO-CO2</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasCO2CO2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificCO2_CO2</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasCO2</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasCO2Temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificCO2_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasCO2</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [atlas_co2] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ATLASDO || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Atlas Scientific EZO-DO Dissolved Oxygen Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [atlas_do] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificDO.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasDOPower</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasDOi2c_addr</span> <span class="o">=</span> <span class="mh">0x61</span><span class="p">;</span>            <span class="c1">// Default for DO is 0x61 (97)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific DO sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="c1">// AtlasScientificDO atlasDO(AtlasDOPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                           AtlasDOi2c_addr);</span>
<span class="n">AtlasScientificDO</span> <span class="nf">atlasDO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasDOPower</span><span class="p">,</span> <span class="n">AtlasDOi2c_addr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificDO atlasDO(AtlasDOPower, AtlasDOi2c_addr);</span>
<span class="n">AtlasScientificDO</span> <span class="nf">atlasDO</span><span class="p">(</span><span class="n">AtlasDOPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create concentration and percent saturation variable pointers for the EZO-DO</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasDOconc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificDO_DOmgL</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasDOpct</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificDO_DOpct</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [atlas_do] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ATLASORP || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Atlas Scientific EZO-ORP Oxidation/Reduction Potential Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [atlas_orp] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificORP.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasORPPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasORPi2c_addr</span> <span class="o">=</span> <span class="mh">0x62</span><span class="p">;</span>         <span class="c1">// Default for ORP is 0x62 (98)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific ORP sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="n">AtlasScientificORP</span> <span class="nf">atlasORP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasORPPower</span><span class="p">,</span> <span class="n">AtlasORPi2c_addr</span><span class="p">);</span>
<span class="c1">// AtlasScientificORP atlasORP(AtlasORPPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                             AtlasORPi2c_addr);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificORP atlasORP(AtlasORPPower, AtlasORPi2c_addr);</span>
<span class="n">AtlasScientificORP</span> <span class="nf">atlasORP</span><span class="p">(</span><span class="n">AtlasORPPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create a potential variable pointer for the ORP</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasORPot</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificORP_Potential</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasORP</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [atlas_orp] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ATLASPH || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Atlas Scientific EZO-pH Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [atlas_ph] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificpH.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlaspHPower</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlaspHi2c_addr</span> <span class="o">=</span> <span class="mh">0x63</span><span class="p">;</span>            <span class="c1">// Default for pH is 0x63 (99)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific pH sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="n">AtlasScientificpH</span> <span class="nf">atlaspH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlaspHPower</span><span class="p">,</span> <span class="n">AtlaspHi2c_addr</span><span class="p">);</span>
<span class="c1">// AtlasScientificpH atlaspH(AtlaspHPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                           AtlaspHi2c_addr);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificpH atlaspH(AtlaspHPower, AtlaspHi2c_addr);</span>
<span class="n">AtlasScientificpH</span> <span class="nf">atlaspH</span><span class="p">(</span><span class="n">AtlaspHPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create a pH variable pointer for the pH sensor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlaspHpH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AtlasScientificpH_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">atlaspH</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [atlas_ph] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ATLASRTD || defined MS_BUILD_TEST_ATLASEC || \</span>
<span class="cp">    defined                                   MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Atlas Scientific EZO-RTD Temperature Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [atlas_rtd] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificRTD.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasRTDPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasRTDi2c_addr</span> <span class="o">=</span> <span class="mh">0x66</span><span class="p">;</span>         <span class="c1">// Default for RTD is 0x66 (102)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific RTD sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="n">AtlasScientificRTD</span> <span class="nf">atlasRTD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasRTDPower</span><span class="p">,</span> <span class="n">AtlasRTDi2c_addr</span><span class="p">);</span>
<span class="c1">// AtlasScientificRTD atlasRTD(AtlasRTDPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                             AtlasRTDi2c_addr);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificRTD atlasRTD(AtlasRTDPower, AtlasRTDi2c_addr);</span>
<span class="n">AtlasScientificRTD</span> <span class="nf">atlasRTD</span><span class="p">(</span><span class="n">AtlasRTDPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create a temperature variable pointer for the RTD</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificRTD_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasRTD</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [atlas_rtd] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ATLASEC || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Atlas Scientific EZO-EC Conductivity Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [atlas_ec] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AtlasScientificEC.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">AtlasECPower</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">AtlasECi2c_addr</span> <span class="o">=</span> <span class="mh">0x64</span><span class="p">;</span>            <span class="c1">// Default for EC is 0x64 (100)</span>
<span class="c1">// All Atlas sensors have different default I2C addresses, but any of them can</span>
<span class="c1">// be re-addressed to any 8 bit number.  If using the default address for any</span>
<span class="c1">// Atlas Scientific sensor, you may omit this argument.</span>

<span class="c1">// Create an Atlas Scientific Conductivity sensor object</span>
<span class="cp">#ifdef MS_ATLAS_SOFTWAREWIRE</span>
<span class="c1">// AtlasScientificEC atlasEC(AtlasECPower, softwareSDA, softwareSCL,</span>
<span class="c1">//                           AtlasECi2c_addr);</span>
<span class="n">AtlasScientificEC</span> <span class="nf">atlasEC</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">AtlasECPower</span><span class="p">,</span> <span class="n">AtlasECi2c_addr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="c1">// AtlasScientificEC atlasEC(AtlasECPower, AtlasECi2c_addr);</span>
<span class="n">AtlasScientificEC</span> <span class="nf">atlasEC</span><span class="p">(</span><span class="n">AtlasECPower</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create four variable pointers for the EZO-ES</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasCond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificEC_Cond</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasTDS</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AtlasScientificEC_TDS</span><span class="p">(</span><span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasSal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificEC_Salinity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasGrav</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtlasScientificEC_SpecificGravity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">atlasEC</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// Create a calculated variable for the temperature compensated conductivity</span>
<span class="c1">// (that is, the specific conductance).  For this example, we will use the</span>
<span class="c1">// temperature measured by the Atlas RTD above this.  You could use the</span>
<span class="c1">// temperature returned by any other water temperature sensor if desired.</span>
<span class="c1">// **DO NOT** use your logger board temperature (ie, from the DS3231) to</span>
<span class="c1">// calculate specific conductance!</span>
<span class="kr">float</span> <span class="nf">calculateAtlasSpCond</span><span class="p">(</span><span class="kr">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">spCond</span>    <span class="o">=</span> <span class="mi">-9999</span><span class="p">;</span>  <span class="c1">// Always safest to start with a bad value</span>
    <span class="kr">float</span> <span class="n">waterTemp</span> <span class="o">=</span> <span class="n">atlasTemp</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="kr">float</span> <span class="n">rawCond</span>   <span class="o">=</span> <span class="n">atlasCond</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="c1">// ^^ Linearized temperature correction coefficient per degrees Celsius.</span>
    <span class="c1">// The value of 0.019 comes from measurements reported here:</span>
    <span class="c1">// Hayashi M. Temperature-electrical conductivity relation of water for</span>
    <span class="c1">// environmental monitoring and geophysical data inversion. Environ Monit</span>
    <span class="c1">// Assess. 2004 Aug-Sep;96(1-3):119-28.</span>
    <span class="c1">// doi: 10.1023/b:emas.0000031719.83065.68. PMID: 15327152.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">!=</span> <span class="mi">-9999</span> <span class="o">&amp;&amp;</span> <span class="n">rawCond</span> <span class="o">!=</span> <span class="mi">-9999</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// make sure both inputs are good</span>
        <span class="kr">float</span> <span class="n">temperatureCoef</span> <span class="o">=</span> <span class="mf">0.019</span><span class="p">;</span>
        <span class="n">spCond</span> <span class="o">=</span> <span class="n">rawCond</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">temperatureCoef</span> <span class="o">*</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">-</span> <span class="mf">25.0</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">spCond</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties of the calculated variable</span>
<span class="c1">// The number of digits after the decimal place</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">atlasSpCondResolution</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/variablename/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondName</span> <span class="o">=</span> <span class="s">&quot;specificConductance&quot;</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/units/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondUnit</span> <span class="o">=</span> <span class="s">&quot;microsiemenPerCentimeter&quot;</span><span class="p">;</span>
<span class="c1">// A short code for the variable</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondCode</span> <span class="o">=</span> <span class="s">&quot;atlasSpCond&quot;</span><span class="p">;</span>
<span class="c1">// The (optional) universallly unique identifier</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">atlasSpCondUUID</span> <span class="o">=</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>

<span class="c1">// Finally, create the specific conductance variable and return a pointer to it</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">atlasSpCond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span><span class="n">calculateAtlasSpCond</span><span class="p">,</span> <span class="n">atlasSpCondResolution</span><span class="p">,</span> <span class="n">atlasSpCondName</span><span class="p">,</span>
                 <span class="n">atlasSpCondUnit</span><span class="p">,</span> <span class="n">atlasSpCondCode</span><span class="p">,</span> <span class="n">atlasSpCondUUID</span><span class="p">);</span>
<span class="cm">/** End [atlas_ec] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_BME280 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Bosch BME280 Environmental Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [bme280] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/BoschBME280.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">BME280Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">BMEi2c_addr</span> <span class="o">=</span> <span class="mh">0x76</span><span class="p">;</span>
<span class="c1">// The BME280 can be addressed either as 0x77 (Adafruit default) or 0x76 (Grove</span>
<span class="c1">// default) Either can be physically mofidied for the other address</span>

<span class="c1">// Create a Bosch BME280 sensor object</span>
<span class="n">BoschBME280</span> <span class="nf">bme280</span><span class="p">(</span><span class="n">BME280Power</span><span class="p">,</span> <span class="n">BMEi2c_addr</span><span class="p">);</span>

<span class="c1">// Create four variable pointers for the BME280</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Humid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Humidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Press</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">bme280Alt</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">BoschBME280_Altitude</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bme280</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [bme280] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_OBS3 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Campbell OBS 3 / OBS 3+ Analog Turbidity Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [obs3] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/CampbellOBS3.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">OBS3Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">OBS3NumberReadings</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">OBS3ADSi2c_addr</span>    <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">OBSLowADSChannel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// ADS channel for *low* range output</span>

<span class="c1">// Campbell OBS 3+ *Low* Range Calibration in Volts</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSLow_A</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;A&quot; value (X^2) [*low* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSLow_B</span> <span class="o">=</span> <span class="mf">1.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;B&quot; value (X) [*low* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSLow_C</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;C&quot; value [*low* range]</span>

<span class="c1">// Create a Campbell OBS3+ *low* range sensor object</span>
<span class="n">CampbellOBS3</span> <span class="nf">osb3low</span><span class="p">(</span><span class="n">OBS3Power</span><span class="p">,</span> <span class="n">OBSLowADSChannel</span><span class="p">,</span> <span class="n">OBSLow_A</span><span class="p">,</span> <span class="n">OBSLow_B</span><span class="p">,</span> <span class="n">OBSLow_C</span><span class="p">,</span>
                     <span class="n">OBS3ADSi2c_addr</span><span class="p">,</span> <span class="n">OBS3NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and voltage variable pointers for the low range  of the OBS3</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3TurbLow</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3low</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbLow&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3VoltLow</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Voltage</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3low</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbLowV&quot;</span><span class="p">);</span>


<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">OBSHighADSChannel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// ADS channel for *high* range output</span>

<span class="c1">// Campbell OBS 3+ *High* Range Calibration in Volts</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSHigh_A</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;A&quot; value (X^2) [*high* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSHigh_B</span> <span class="o">=</span> <span class="mf">1.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;B&quot; value (X) [*high* range]</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">OBSHigh_C</span> <span class="o">=</span> <span class="mf">0.000E+00</span><span class="p">;</span>  <span class="c1">// &quot;C&quot; value [*high* range]</span>

<span class="c1">// Create a Campbell OBS3+ *high* range sensor object</span>
<span class="n">CampbellOBS3</span> <span class="nf">osb3high</span><span class="p">(</span><span class="n">OBS3Power</span><span class="p">,</span> <span class="n">OBSHighADSChannel</span><span class="p">,</span> <span class="n">OBSHigh_A</span><span class="p">,</span> <span class="n">OBSHigh_B</span><span class="p">,</span>
                      <span class="n">OBSHigh_C</span><span class="p">,</span> <span class="n">OBS3ADSi2c_addr</span><span class="p">,</span> <span class="n">OBS3NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and voltage variable pointers for the high range of the OBS3</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3TurbHigh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3high</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbHigh&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">obs3VoltHigh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CampbellOBS3_Voltage</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">osb3high</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span> <span class="s">&quot;TurbHighV&quot;</span><span class="p">);</span>
<span class="cm">/** End [obs3] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_CTD || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Decagon CTD-10 Conductivity, Temperature, and Depth Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [decagonCTD] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/DecagonCTD.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">CTDSDI12address</span>   <span class="o">=</span> <span class="s">&quot;1&quot;</span><span class="p">;</span>    <span class="c1">// The SDI-12 Address of the CTD</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">CTDNumberReadings</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>      <span class="c1">// The number of readings to average</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">CTDPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">CTDData</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Decagon CTD sensor object</span>
<span class="n">DecagonCTD</span> <span class="nf">ctd</span><span class="p">(</span><span class="o">*</span><span class="n">CTDSDI12address</span><span class="p">,</span> <span class="n">CTDPower</span><span class="p">,</span> <span class="n">CTDData</span><span class="p">,</span> <span class="n">CTDNumberReadings</span><span class="p">);</span>

<span class="c1">// Create conductivity, temperature, and depth variable pointers for the CTD</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ctdCond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecagonCTD_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctd</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ctdTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecagonCTD_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctd</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ctdDepth</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">DecagonCTD_Depth</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctd</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [decagonCTD] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ES2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Decagon ES2 Conductivity and Temperature Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [es2] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/DecagonES2.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">ES2SDI12address</span> <span class="o">=</span> <span class="s">&quot;3&quot;</span><span class="p">;</span>      <span class="c1">// The SDI-12 Address of the ES2</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ES2Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ES2Data</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">ES2NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="c1">// Create a Decagon ES2 sensor object</span>
<span class="n">DecagonES2</span> <span class="nf">es2</span><span class="p">(</span><span class="o">*</span><span class="n">ES2SDI12address</span><span class="p">,</span> <span class="n">ES2Power</span><span class="p">,</span> <span class="n">ES2Data</span><span class="p">,</span> <span class="n">ES2NumberReadings</span><span class="p">);</span>

<span class="c1">// Create specific conductance and temperature variable pointers for the ES2</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">es2Cond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecagonES2_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">es2</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">es2Temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DecagonES2_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">es2</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [es2] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_VOLTAGE || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  External Voltage via TI ADS1115</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [ext_volt] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/ExternalVoltage.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ADSPower</span>       <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ADSChannel</span>     <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>               <span class="c1">// The ADS channel of interest</span>
<span class="kr">const</span> <span class="kr">float</span>   <span class="n">dividerGain</span>    <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>  <span class="c1">//  Gain setting if using a voltage divider</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">evADSi2c_addr</span>  <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">VoltReadsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>     <span class="c1">// Only read one sample</span>

<span class="c1">// Create an External Voltage sensor object</span>
<span class="n">ExternalVoltage</span> <span class="nf">extvolt</span><span class="p">(</span><span class="n">ADSPower</span><span class="p">,</span> <span class="n">ADSChannel</span><span class="p">,</span> <span class="n">dividerGain</span><span class="p">,</span> <span class="n">evADSi2c_addr</span><span class="p">,</span>
                        <span class="n">VoltReadsToAvg</span><span class="p">);</span>

<span class="c1">// Create a voltage variable pointer</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">extvoltV</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ExternalVoltage_Volt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">extvolt</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [ext_volt] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_MPL115A2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Freescale Semiconductor MPL115A2 Barometer</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [mpl115a2] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/FreescaleMPL115A2.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">MPLPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">MPL115A2ReadingsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Create an MPL115A2 barometer sensor object</span>
<span class="n">MPL115A2</span> <span class="nf">mpl115a2</span><span class="p">(</span><span class="n">MPLPower</span><span class="p">,</span> <span class="n">MPL115A2ReadingsToAvg</span><span class="p">);</span>

<span class="c1">// Create pressure and temperature variable pointers for the MPL</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mplPress</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MPL115A2_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mpl115a2</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">mplTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MPL115A2_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mpl115a2</span><span class="p">,</span>
                                      <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [mpl115a2] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_INSITURDO || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  InSitu RDO PRO-X Rugged Dissolved Oxygen Probe</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [insitu_rdo] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/InSituRDO.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">RDOSDI12address</span> <span class="o">=</span> <span class="s">&quot;5&quot;</span><span class="p">;</span>      <span class="c1">// The SDI-12 Address of the RDO PRO-X</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">RDOPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">RDOData</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">RDONumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="c1">// Create an In-Situ RDO PRO-X dissolved oxygen sensor object</span>
<span class="n">InSituRDO</span> <span class="nf">insituRDO</span><span class="p">(</span><span class="o">*</span><span class="n">RDOSDI12address</span><span class="p">,</span> <span class="n">RDOPower</span><span class="p">,</span> <span class="n">RDOData</span><span class="p">,</span> <span class="n">RDONumberReadings</span><span class="p">);</span>

<span class="c1">// Create dissolved oxygen percent, dissolved oxygen concentration, temperature,</span>
<span class="c1">// and oxygen partial pressure variable pointers for the RDO PRO-X</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">rdoDOpct</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">InSituRDO_DOpct</span><span class="p">(</span><span class="o">&amp;</span><span class="n">insituRDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">rdoDOmgL</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">InSituRDO_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">insituRDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">rdoTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InSituRDO_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">insituRDO</span><span class="p">,</span>
                                       <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">rdoO2pp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">InSituRDO_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">insituRDO</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [insitu_rdo] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ACCULEVEL || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Keller Acculevel High Accuracy Submersible Level Transmitter</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [acculevel] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/KellerAcculevel.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span> <span class="n">acculevelModbusAddress</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>  <span class="c1">// The modbus address of KellerAcculevel</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">alAdapterPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                               <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">acculevelPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>             <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">al485EnablePin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">acculevelNumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends taking and averaging a few readings</span>

<span class="c1">// Create a Keller Acculevel sensor object</span>
<span class="n">KellerAcculevel</span> <span class="nf">acculevel</span><span class="p">(</span><span class="n">acculevelModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">alAdapterPower</span><span class="p">,</span>
                          <span class="n">acculevelPower</span><span class="p">,</span> <span class="n">al485EnablePin</span><span class="p">,</span>
                          <span class="n">acculevelNumberReadings</span><span class="p">);</span>

<span class="c1">// Create pressure, temperature, and height variable pointers for the Acculevel</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">acculevPress</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerAcculevel_Pressure</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">acculevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">acculevTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerAcculevel_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">acculevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">acculevHeight</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerAcculevel_Height</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">acculevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [acculevel] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_NANOLEVEL || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Keller Nanolevel High Accuracy Submersible Level Transmitter</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [nanolevel] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/KellerNanolevel.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span> <span class="n">nanolevelModbusAddress</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>  <span class="c1">// The modbus address of KellerNanolevel</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">nlAdapterPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                               <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">nanolevelPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>             <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">nl485EnablePin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">nanolevelNumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends taking and averaging a few readings</span>

<span class="c1">// Create a Keller Nanolevel sensor object</span>
<span class="n">KellerNanolevel</span> <span class="nf">nanolevel</span><span class="p">(</span><span class="n">nanolevelModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">nlAdapterPower</span><span class="p">,</span>
                          <span class="n">nanolevelPower</span><span class="p">,</span> <span class="n">nl485EnablePin</span><span class="p">,</span>
                          <span class="n">nanolevelNumberReadings</span><span class="p">);</span>

<span class="c1">// Create pressure, temperature, and height variable pointers for the Nanolevel</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">nanolevPress</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerNanolevel_Pressure</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">nanolevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">nanolevTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerNanolevel_Temp</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">nanolevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">nanolevHeight</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KellerNanolevel_Height</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">nanolevel</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [nanolevel] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_MAXBOTIX || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Maxbotix HRXL Ultrasonic Range Finder</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [maxbotics] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/MaxBotixSonar.h&gt;</span><span class="cp"></span>

<span class="c1">// A Maxbotix sonar with the trigger pin disconnect CANNOT share the serial port</span>
<span class="c1">// A Maxbotix sonar using the trigger may be able to share but YMMV</span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">SonarPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Excite (power) pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">Sonar1Trigger</span> <span class="o">=</span>
    <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Trigger pin (a unique negative number if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">sonar1NumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>  <span class="c1">// The number of readings to average</span>

<span class="c1">// Create a MaxBotix Sonar sensor object</span>
<span class="n">MaxBotixSonar</span> <span class="nf">sonar1</span><span class="p">(</span><span class="n">sonarSerial</span><span class="p">,</span> <span class="n">SonarPower</span><span class="p">,</span> <span class="n">Sonar1Trigger</span><span class="p">,</span>
                     <span class="n">sonar1NumberReadings</span><span class="p">);</span>

<span class="c1">// Create an ultrasonic range variable pointer</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">sonar1Range</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MaxBotixSonar_Range</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sonar1</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [maxbotics] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_DS18 || defined MS_BUILD_TEST_ANALOGEC || \</span>
<span class="cp">    defined                               MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Maxim DS18 One Wire Temperature Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [ds18] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/MaximDS18.h&gt;</span><span class="cp"></span>

<span class="c1">// OneWire Address [array of 8 hex characters]</span>
<span class="c1">// If only using a single sensor on the OneWire bus, you may omit the address</span>
<span class="n">DeviceAddress</span> <span class="n">OneWireAddress1</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x28</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xBD</span><span class="p">,</span> <span class="mh">0xBA</span><span class="p">,</span>
                                 <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x0C</span><span class="p">};</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">OneWirePower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">OneWireBus</span>   <span class="o">=</span> <span class="n">A0</span><span class="p">;</span>  <span class="c1">// OneWire Bus Pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">ds18NumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="c1">// Create a Maxim DS18 sensor objects (use this form for a known address)</span>
<span class="n">MaximDS18</span> <span class="nf">ds18</span><span class="p">(</span><span class="n">OneWireAddress1</span><span class="p">,</span> <span class="n">OneWirePower</span><span class="p">,</span> <span class="n">OneWireBus</span><span class="p">,</span> <span class="n">ds18NumberReadings</span><span class="p">);</span>

<span class="c1">// Create a Maxim DS18 sensor object (use this form for a single sensor on bus</span>
<span class="c1">// with an unknown address)</span>
<span class="c1">// MaximDS18 ds18(OneWirePower, OneWireBus);</span>

<span class="c1">// Create a temperature variable pointer for the DS18</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ds18Temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MaximDS18_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds18</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [ds18] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_MS5803 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Measurement Specialties MS5803-14BA pressure sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [ms5803] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/MeaSpecMS5803.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">MS5803Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">MS5803i2c_addr</span> <span class="o">=</span>
    <span class="mh">0x76</span><span class="p">;</span>  <span class="c1">// The MS5803 can be addressed either as 0x76 (default) or 0x77</span>
<span class="kr">const</span> <span class="kr">int16_t</span> <span class="n">MS5803maxPressure</span> <span class="o">=</span>
    <span class="mi">14</span><span class="p">;</span>  <span class="c1">// The maximum pressure measurable by the specific MS5803 model</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">MS5803ReadingsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Create a MeaSpec MS5803 pressure and temperature sensor object</span>
<span class="n">MeaSpecMS5803</span> <span class="nf">ms5803</span><span class="p">(</span><span class="n">MS5803Power</span><span class="p">,</span> <span class="n">MS5803i2c_addr</span><span class="p">,</span> <span class="n">MS5803maxPressure</span><span class="p">,</span>
                     <span class="n">MS5803ReadingsToAvg</span><span class="p">);</span>

<span class="c1">// Create pressure and temperature variable pointers for the MS5803</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ms5803Press</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeaSpecMS5803_Pressure</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ms5803</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ms5803Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeaSpecMS5803_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ms5803</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [ms5803] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_5TM || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Meter ECH2O Soil Moisture Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [fivetm] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/Decagon5TM.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>  <span class="n">TMSDI12address</span> <span class="o">=</span> <span class="s">&quot;2&quot;</span><span class="p">;</span>             <span class="c1">// The SDI-12 Address of the 5-TM</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">TMPower</span>        <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">TMData</span>         <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Decagon 5TM sensor object</span>
<span class="n">Decagon5TM</span> <span class="nf">fivetm</span><span class="p">(</span><span class="o">*</span><span class="n">TMSDI12address</span><span class="p">,</span> <span class="n">TMPower</span><span class="p">,</span> <span class="n">TMData</span><span class="p">);</span>

<span class="c1">// Create the matric potential, volumetric water content, and temperature</span>
<span class="c1">// variable pointers for the 5TM</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">fivetmEa</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Decagon5TM_Ea</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fivetm</span><span class="p">,</span>
                                       <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">fivetmVWC</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Decagon5TM_VWC</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fivetm</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">fivetmTemp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Decagon5TM_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fivetm</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [fivetm] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_HYDROS21 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Meter Hydros 21 Conductivity, Temperature, and Depth Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [hydros21] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/MeterHydros21.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">hydros21SDI12address</span> <span class="o">=</span> <span class="s">&quot;1&quot;</span><span class="p">;</span>  <span class="c1">// The SDI-12 Address of the Hydros21</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">hydros21NumberReadings</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>  <span class="c1">// The number of readings to average</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">hydros21Power</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">hydros21Data</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Decagon Hydros21 sensor object</span>
<span class="n">MeterHydros21</span> <span class="nf">hydros21</span><span class="p">(</span><span class="o">*</span><span class="n">hydros21SDI12address</span><span class="p">,</span> <span class="n">hydros21Power</span><span class="p">,</span> <span class="n">hydros21Data</span><span class="p">,</span>
                       <span class="n">hydros21NumberReadings</span><span class="p">);</span>

<span class="c1">// Create conductivity, temperature, and depth variable pointers for the</span>
<span class="c1">// Hydros21</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">hydros21Cond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterHydros21_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hydros21</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">hydros21Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterHydros21_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hydros21</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">hydros21Depth</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterHydros21_Depth</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hydros21</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [hydros21] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_TEROS11 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Meter Teros 11 Soil Moisture Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [teros] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/MeterTeros11.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>   <span class="n">teros11SDI12address</span> <span class="o">=</span> <span class="s">&quot;4&quot;</span><span class="p">;</span>  <span class="c1">// The SDI-12 Address of the Teros 11</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">terosPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">terosData</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">teros11NumberReadings</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>    <span class="c1">// The number of readings to average</span>

<span class="c1">// Create a METER TEROS 11 sensor object</span>
<span class="n">MeterTeros11</span> <span class="nf">teros11</span><span class="p">(</span><span class="o">*</span><span class="n">teros11SDI12address</span><span class="p">,</span> <span class="n">terosPower</span><span class="p">,</span> <span class="n">terosData</span><span class="p">,</span>
                     <span class="n">teros11NumberReadings</span><span class="p">);</span>

<span class="c1">// Create the matric potential, volumetric water content, and temperature</span>
<span class="c1">// variable pointers for the Teros 11</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">teros11Ea</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterTeros11_Ea</span><span class="p">(</span><span class="o">&amp;</span><span class="n">teros11</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">teros11Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterTeros11_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">teros11</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">teros11VWC</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">MeterTeros11_VWC</span><span class="p">(</span><span class="o">&amp;</span><span class="n">teros11</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [teros] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_PALEOTERRA || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  PaleoTerra Redox Sensors</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [pt_redox] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/PaleoTerraRedox.h&gt;</span><span class="cp"></span>

<span class="kr">int8_t</span> <span class="n">paleoTerraPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Pin to switch RS485 adapter power</span>
                                          <span class="c1">// on and off (-1 if unconnected)</span>
<span class="kr">uint8_t</span> <span class="n">paleoI2CAddress</span> <span class="o">=</span> <span class="mh">0x68</span><span class="p">;</span>           <span class="c1">// the I2C address of the redox sensor</span>

<span class="c1">// Create the PaleoTerra sensor object</span>
<span class="cp">#ifdef MS_PALEOTERRA_SOFTWAREWIRE</span>
<span class="n">PaleoTerraRedox</span> <span class="nf">ptRedox</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">paleoTerraPower</span><span class="p">,</span> <span class="n">paleoI2CAddress</span><span class="p">);</span>
<span class="c1">// PaleoTerraRedox ptRedox(paleoTerraPower, softwareSDA, softwareSCL,</span>
<span class="c1">// paleoI2CAddress);</span>
<span class="cp">#else</span>
<span class="n">PaleoTerraRedox</span>   <span class="nf">ptRedox</span><span class="p">(</span><span class="n">paleoTerraPower</span><span class="p">,</span> <span class="n">paleoI2CAddress</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create the voltage variable for the redox sensor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">ptVolt</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">PaleoTerraRedox_Volt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ptRedox</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [pt_redox] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_RAINI2C || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  External I2C Rain Tipping Bucket Counter</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [i2c_rain] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/RainCounterI2C.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">RainCounterI2CAddress</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
<span class="c1">// I2C Address for EnviroDIY external tip counter; 0x08 by default</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">depthPerTipEvent</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span>  <span class="c1">// rain depth in mm per tip event</span>

<span class="c1">// Create a Rain Counter sensor object</span>
<span class="cp">#ifdef MS_RAIN_SOFTWAREWIRE</span>
<span class="n">RainCounterI2C</span> <span class="nf">tbi2c</span><span class="p">(</span><span class="o">&amp;</span><span class="n">softI2C</span><span class="p">,</span> <span class="n">RainCounterI2CAddress</span><span class="p">,</span> <span class="n">depthPerTipEvent</span><span class="p">);</span>
<span class="c1">// RainCounterI2C tbi2c(softwareSDA, softwareSCL, RainCounterI2CAddress,</span>
<span class="c1">//                      depthPerTipEvent);</span>
<span class="cp">#else</span>
<span class="n">RainCounterI2C</span>    <span class="nf">tbi2c</span><span class="p">(</span><span class="n">RainCounterI2CAddress</span><span class="p">,</span> <span class="n">depthPerTipEvent</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="c1">// Create number of tips and rain depth variable pointers for the tipping bucket</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">tbi2cTips</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">RainCounterI2C_Tips</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tbi2c</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">tbi2cDepth</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">RainCounterI2C_Depth</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tbi2c</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [i2c_rain] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_TALLY || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//    Tally I2C Event Counter for rain or wind reed-switch sensors</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [i2c_wind_tally] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/TallyCounterI2C.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">TallyPower</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="c1">// NorthernWidget Tally I2CPower is -1 by default because it is often deployed</span>
<span class="c1">// with power always on, but Tally also has a super capacitor that enables it</span>
<span class="c1">// to be self powered between readings/recharge as described at</span>
<span class="c1">// https://github.com/NorthernWidget-Skunkworks/Project-Tally</span>

<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">TallyCounterI2CAddress</span> <span class="o">=</span> <span class="mh">0x33</span><span class="p">;</span>
<span class="c1">// NorthernWidget Tally I2C address is 0x33 by default</span>

<span class="c1">// Create a Tally Counter sensor object</span>
<span class="n">TallyCounterI2C</span> <span class="nf">tallyi2c</span><span class="p">(</span><span class="n">TallyPower</span><span class="p">,</span> <span class="n">TallyCounterI2CAddress</span><span class="p">);</span>

<span class="c1">// Create variable pointers for the Tally event counter</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">tallyEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TallyCounterI2C_Events</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">tallyi2c</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// For  Wind Speed, create a Calculated Variable that converts, similar to:</span>
<span class="c1">// period = loggingInterval * 60.0;    // in seconds</span>
<span class="c1">// frequency = tallyEventCount/period; // average event frequency in Hz</span>
<span class="c1">// tallyWindSpeed = frequency * 2.5 * 1.60934;  // in km/h</span>
<span class="c1">// 2.5 mph/Hz &amp; 1.60934 kmph/mph and 2.5 mph/Hz conversion factor from</span>
<span class="c1">// web: Inspeed-Version-II-Reed-Switch-Anemometer-Sensor-Only-WS2R</span>
<span class="cm">/** End [i2c_wind_tally] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_INA219 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  TI INA219 High Side Current/Voltage Sensor (Current mA, Voltage, Power)</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [ina219] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/TIINA219.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">INA219Power</span>    <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">uint8_t</span>      <span class="n">INA219i2c_addr</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">;</span>            <span class="c1">// 1000000 (Board A0+A1=GND)</span>
<span class="c1">// The INA219 can have one of 16 addresses, depending on the connections of A0</span>
<span class="c1">// and A1</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">INA219ReadingsToAvg</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">// Create an INA219 sensor object</span>
<span class="n">TIINA219</span> <span class="nf">ina219</span><span class="p">(</span><span class="n">INA219Power</span><span class="p">,</span> <span class="n">INA219i2c_addr</span><span class="p">,</span> <span class="n">INA219ReadingsToAvg</span><span class="p">);</span>

<span class="c1">// Create current, voltage, and power variable pointers for the INA219</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">inaCurrent</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TIINA219_Current</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ina219</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">inaVolt</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">TIINA219_Volt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ina219</span><span class="p">,</span>
                                      <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">inaPower</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TIINA219_Power</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ina219</span><span class="p">,</span>
                                        <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [ina219] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_CYCLOPS || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Turner Cyclops-7F Submersible Fluorometer</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [cyclops] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/TurnerCyclops.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">cyclopsPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">cyclopsNumberReadings</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">cyclopsADSi2c_addr</span> <span class="o">=</span> <span class="mh">0x48</span><span class="p">;</span>  <span class="c1">// The I2C address of the ADS1115 ADC</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">cyclopsADSChannel</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>     <span class="c1">// ADS channel</span>

<span class="c1">// Cyclops calibration information</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">cyclopsStdConc</span> <span class="o">=</span> <span class="mf">1.000</span><span class="p">;</span>  <span class="c1">// Concentration of the standard used</span>
                                     <span class="c1">// for a 1-point sensor calibration.</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">cyclopsStdVolt</span> <span class="o">=</span>
    <span class="mf">1.000</span><span class="p">;</span>  <span class="c1">// The voltage (in volts) measured for the conc_std.</span>
<span class="kr">const</span> <span class="kr">float</span> <span class="n">cyclopsBlankVolt</span> <span class="o">=</span>
    <span class="mf">0.000</span><span class="p">;</span>  <span class="c1">// The voltage (in volts) measured for a blank.</span>

<span class="c1">// Create a Turner Cyclops sensor object</span>
<span class="n">TurnerCyclops</span> <span class="nf">cyclops</span><span class="p">(</span><span class="n">cyclopsPower</span><span class="p">,</span> <span class="n">cyclopsADSChannel</span><span class="p">,</span> <span class="n">cyclopsStdConc</span><span class="p">,</span>
                      <span class="n">cyclopsStdVolt</span><span class="p">,</span> <span class="n">cyclopsBlankVolt</span><span class="p">,</span> <span class="n">cyclopsADSi2c_addr</span><span class="p">,</span>
                      <span class="n">cyclopsNumberReadings</span><span class="p">);</span>

<span class="c1">// Create the voltage variable pointer - used for any type of Cyclops</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsVoltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// Create the variable pointer for the primary output parameter.  Only use</span>
<span class="c1">// **ONE** of these!  Which is possible depends on your specific sensor!</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsChloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Chlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsRWT</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Rhodamine</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsFluoroscein</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Fluorescein</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsPhycocyanin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Phycocyanin</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsPhycoerythrin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Phycoerythrin</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsCDOM</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_CDOM</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsCrudeOil</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_CrudeOil</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsBrighteners</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Brighteners</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsTurbidity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsPTSA</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_PTSA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsBTEX</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">TurnerCyclops_BTEX</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsTryptophan</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_Tryptophan</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">cyclopsRedChloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TurnerCyclops_RedChlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">cyclops</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [cyclops] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_ANALOGEC || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//   Analog Electrical Conductivity using the Processor&#39;s Analog Pins</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [analog_cond] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/AnalogElecConductivity.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ECpwrPin</span>   <span class="o">=</span> <span class="n">A4</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ECdataPin1</span> <span class="o">=</span> <span class="n">A0</span><span class="p">;</span>  <span class="c1">// Data pin (must be an analog pin, ie A#)</span>

<span class="c1">// Create an Analog Electrical Conductivity sensor object</span>
<span class="n">AnalogElecConductivity</span> <span class="nf">analogEC_phy</span><span class="p">(</span><span class="n">ECpwrPin</span><span class="p">,</span> <span class="n">ECdataPin1</span><span class="p">);</span>

<span class="c1">// Create a conductivity variable pointer for the analog sensor</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">analogEc_cond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnalogElecConductivity_EC</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">analogEC_phy</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>

<span class="c1">// Create a calculated variable for the temperature compensated conductivity</span>
<span class="c1">// (that is, the specific conductance).  For this example, we will use the</span>
<span class="c1">// temperature measured by the Maxim DS18 saved as ds18Temp several sections</span>
<span class="c1">// above this.  You could use the temperature returned by any other water</span>
<span class="c1">// temperature sensor if desired.  **DO NOT** use your logger board temperature</span>
<span class="c1">// (ie, from the DS3231) to calculate specific conductance!</span>
<span class="kr">float</span> <span class="nf">calculateAnalogSpCond</span><span class="p">(</span><span class="kr">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">spCond</span>          <span class="o">=</span> <span class="mi">-9999</span><span class="p">;</span>  <span class="c1">// Always safest to start with a bad value</span>
    <span class="kr">float</span> <span class="n">waterTemp</span>       <span class="o">=</span> <span class="n">ds18Temp</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="kr">float</span> <span class="n">rawCond</span>         <span class="o">=</span> <span class="n">analogEc_cond</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">();</span>
    <span class="kr">float</span> <span class="n">temperatureCoef</span> <span class="o">=</span> <span class="mf">0.019</span><span class="p">;</span>
    <span class="c1">// ^^ Linearized temperature correction coefficient per degrees Celsius.</span>
    <span class="c1">// The value of 0.019 comes from measurements reported here:</span>
    <span class="c1">// Hayashi M. Temperature-electrical conductivity relation of water for</span>
    <span class="c1">// environmental monitoring and geophysical data inversion. Environ Monit</span>
    <span class="c1">// Assess. 2004 Aug-Sep;96(1-3):119-28.</span>
    <span class="c1">// doi: 10.1023/b:emas.0000031719.83065.68. PMID: 15327152.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">!=</span> <span class="mi">-9999</span> <span class="o">&amp;&amp;</span> <span class="n">rawCond</span> <span class="o">!=</span> <span class="mi">-9999</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// make sure both inputs are good</span>
        <span class="n">spCond</span> <span class="o">=</span> <span class="n">rawCond</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">temperatureCoef</span> <span class="o">*</span> <span class="p">(</span><span class="n">waterTemp</span> <span class="o">-</span> <span class="mf">25.0</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">spCond</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties of the calculated variable</span>
<span class="c1">// The number of digits after the decimal place</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">analogSpCondResolution</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/variablename/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondName</span> <span class="o">=</span> <span class="s">&quot;specificConductance&quot;</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/units/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondUnit</span> <span class="o">=</span> <span class="s">&quot;microsiemenPerCentimeter&quot;</span><span class="p">;</span>
<span class="c1">// A short code for the variable</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondCode</span> <span class="o">=</span> <span class="s">&quot;anlgSpCond&quot;</span><span class="p">;</span>
<span class="c1">// The (optional) universallly unique identifier</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">analogSpCondUUID</span> <span class="o">=</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>

<span class="c1">// Finally, Create the specific conductance variable and return a pointer to it</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">analogEc_spcond</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span>
    <span class="n">calculateAnalogSpCond</span><span class="p">,</span> <span class="n">analogSpCondResolution</span><span class="p">,</span> <span class="n">analogSpCondName</span><span class="p">,</span>
    <span class="n">analogSpCondUnit</span><span class="p">,</span> <span class="n">analogSpCondCode</span><span class="p">,</span> <span class="n">analogSpCondUUID</span><span class="p">);</span>
<span class="cm">/** End [analog_cond] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y504 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y504 Dissolved Oxygen Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y504] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY504.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y504ModbusAddress</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y504</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y504AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y504SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y504EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y504NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Yosemitech Y504 dissolved oxygen sensor object</span>
<span class="n">YosemitechY504</span> <span class="nf">y504</span><span class="p">(</span><span class="n">y504ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y504AdapterPower</span><span class="p">,</span>
                    <span class="n">y504SensorPower</span><span class="p">,</span> <span class="n">y504EnablePin</span><span class="p">,</span> <span class="n">y504NumberReadings</span><span class="p">);</span>

<span class="c1">// Create the dissolved oxygen percent, dissolved oxygen concentration, and</span>
<span class="c1">// temperature variable pointers for the Y504</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y504DOpct</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY504_DOpct</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y504</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y504DOmgL</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY504_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y504</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y504Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY504_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y504</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y504] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y510 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y510 Turbidity Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y510] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY510.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y510ModbusAddress</span> <span class="o">=</span> <span class="mh">0x0B</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y510</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y510AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y510SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y510EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y510NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y510-B Turbidity sensor object</span>
<span class="n">YosemitechY510</span> <span class="nf">y510</span><span class="p">(</span><span class="n">y510ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y510AdapterPower</span><span class="p">,</span>
                    <span class="n">y510SensorPower</span><span class="p">,</span> <span class="n">y510EnablePin</span><span class="p">,</span> <span class="n">y510NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and temperature variable pointers for the Y510</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y510Turb</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY510_Turbidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y510</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y510Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY510_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y510</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y510] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y511 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y511 Turbidity Sensor with Wiper</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y511] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY511.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y511ModbusAddress</span> <span class="o">=</span> <span class="mh">0x1A</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y511</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y511AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y511SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y511EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y511NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y511-A Turbidity sensor object</span>
<span class="n">YosemitechY511</span> <span class="nf">y511</span><span class="p">(</span><span class="n">y511ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y511AdapterPower</span><span class="p">,</span>
                    <span class="n">y511SensorPower</span><span class="p">,</span> <span class="n">y511EnablePin</span><span class="p">,</span> <span class="n">y511NumberReadings</span><span class="p">);</span>

<span class="c1">// Create turbidity and temperature variable pointers for the Y511</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y511Turb</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY511_Turbidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y511</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y511Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY511_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y511</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y511] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y514 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y514 Chlorophyll Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y514] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY514.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y514ModbusAddress</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y514</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y514AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y514SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y514EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y514NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y514 chlorophyll sensor object</span>
<span class="n">YosemitechY514</span> <span class="nf">y514</span><span class="p">(</span><span class="n">y514ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y514AdapterPower</span><span class="p">,</span>
                    <span class="n">y514SensorPower</span><span class="p">,</span> <span class="n">y514EnablePin</span><span class="p">,</span> <span class="n">y514NumberReadings</span><span class="p">);</span>

<span class="c1">// Create chlorophyll concentration and temperature variable pointers for the</span>
<span class="c1">// Y514</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y514Chloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YosemitechY514_Chlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">y514</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y514Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY514_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y514</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y514] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y520 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y520 Conductivity Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y520] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY520.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y520ModbusAddress</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y520</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y520AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y520SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y520EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y520NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y520 conductivity sensor object</span>
<span class="n">YosemitechY520</span> <span class="nf">y520</span><span class="p">(</span><span class="n">y520ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y520AdapterPower</span><span class="p">,</span>
                    <span class="n">y520SensorPower</span><span class="p">,</span> <span class="n">y520EnablePin</span><span class="p">,</span> <span class="n">y520NumberReadings</span><span class="p">);</span>

<span class="c1">// Create specific conductance and temperature variable pointers for the Y520</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y520Cond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY520_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y520</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y520Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY520_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y520</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y520] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y532 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y532 pH</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y532] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY532.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y532ModbusAddress</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y532</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y532AdapterPower</span>  <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                                  <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y532SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>               <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y532EnablePin</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y532NumberReadings</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="c1">// The manufacturer actually doesn&#39;t mention averaging for this one</span>

<span class="c1">// Create a Yosemitech Y532 pH sensor object</span>
<span class="n">YosemitechY532</span> <span class="nf">y532</span><span class="p">(</span><span class="n">y532ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y532AdapterPower</span><span class="p">,</span>
                    <span class="n">y532SensorPower</span><span class="p">,</span> <span class="n">y532EnablePin</span><span class="p">,</span> <span class="n">y532NumberReadings</span><span class="p">);</span>

<span class="c1">// Create pH, electrical potential, and temperature variable pointers for the</span>
<span class="c1">// Y532</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y532Voltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY532_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y532</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y532pH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY532_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y532</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y532Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY532_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y532</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y532] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y533 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y533 Oxidation Reduction Potential (ORP)</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y533] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY533.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y533ModbusAddress</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y533</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y533AdapterPower</span>  <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin</span>
                                                  <span class="c1">// (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y533SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>               <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y533EnablePin</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y533NumberReadings</span> <span class="o">=</span>
    <span class="mi">1</span><span class="p">;</span>  <span class="c1">// The manufacturer actually doesn&#39;t mention averaging for this one</span>

<span class="c1">// Create a Yosemitech Y533 pH sensor object</span>
<span class="n">YosemitechY533</span> <span class="nf">y533</span><span class="p">(</span><span class="n">y533ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y533AdapterPower</span><span class="p">,</span>
                    <span class="n">y533SensorPower</span><span class="p">,</span> <span class="n">y533EnablePin</span><span class="p">,</span> <span class="n">y533NumberReadings</span><span class="p">);</span>

<span class="c1">// Create pH, electrical potential, and temperature variable pointers for the</span>
<span class="c1">// Y533</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y533Voltage</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY533_Voltage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y533</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y533pH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY533_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y533</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y533Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY533_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y533</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y533] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y550 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y550 COD Sensor with Wiper</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y550] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY550.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y550ModbusAddress</span> <span class="o">=</span> <span class="mh">0x50</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y550</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y550AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y550SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y550EnablePin</span>   <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y550NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Y550 conductivity sensor object</span>
<span class="n">YosemitechY550</span> <span class="nf">y550</span><span class="p">(</span><span class="n">y550ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y550AdapterPower</span><span class="p">,</span>
                    <span class="n">y550SensorPower</span><span class="p">,</span> <span class="n">y550EnablePin</span><span class="p">,</span> <span class="n">y550NumberReadings</span><span class="p">);</span>

<span class="c1">// Create COD, turbidity, and temperature variable pointers for the Y550</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y550COD</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY550_COD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y550</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y550Turbid</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY550_Turbidity</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y550</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y550Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY550_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y550</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y550] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_Y4000 || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Yosemitech Y4000 Multiparameter Sonde (DOmgL, Turbidity, Cond, pH, Temp,</span>
<span class="c1">//    ORP, Chlorophyll, BGA)</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [y4000] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/YosemitechY4000.h&gt;</span><span class="cp"></span>

<span class="c1">// NOTE: Extra hardware and software serial ports are created in the &quot;Settings</span>
<span class="c1">// for Additional Serial Ports&quot; section</span>

<span class="kr">byte</span>         <span class="n">y4000ModbusAddress</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>  <span class="c1">// The modbus address of the Y4000</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">y4000AdapterPower</span> <span class="o">=</span>
    <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// RS485 adapter power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y4000SensorPower</span> <span class="o">=</span> <span class="n">A3</span><span class="p">;</span>  <span class="c1">// Sensor power pin</span>
<span class="kr">const</span> <span class="kr">int8_t</span>  <span class="n">y4000EnablePin</span> <span class="o">=</span> <span class="mi">-1</span><span class="p">;</span>  <span class="c1">// Adapter RE/DE pin (-1 if not applicable)</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">y4000NumberReadings</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="c1">// The manufacturer recommends averaging 10 readings, but we take 5 to minimize</span>
<span class="c1">// power consumption</span>

<span class="c1">// Create a Yosemitech Y4000 multi-parameter sensor object</span>
<span class="n">YosemitechY4000</span> <span class="nf">y4000</span><span class="p">(</span><span class="n">y4000ModbusAddress</span><span class="p">,</span> <span class="n">modbusSerial</span><span class="p">,</span> <span class="n">y4000AdapterPower</span><span class="p">,</span>
                      <span class="n">y4000SensorPower</span><span class="p">,</span> <span class="n">y4000EnablePin</span><span class="p">,</span> <span class="n">y4000NumberReadings</span><span class="p">);</span>

<span class="c1">// Create all of the variable pointers for the Y4000</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000DO</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Turb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YosemitechY4000_Turbidity</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Cond</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_Cond</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000pH</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_pH</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Temp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000ORP</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_ORP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000Chloro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YosemitechY4000_Chlorophyll</span><span class="p">(</span>
    <span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">y4000BGA</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">YosemitechY4000_BGA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">y4000</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [y4000] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_DOPTO || defined MS_BUILD_TEST_ALL_SENSORS</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Zebra Tech D-Opto Dissolved Oxygen Sensor</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [dopto] */</span>
<span class="cp">#include</span> <span class="cpf">&lt;sensors/ZebraTechDOpto.h&gt;</span><span class="cp"></span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span>  <span class="n">DOptoSDI12address</span> <span class="o">=</span> <span class="s">&quot;5&quot;</span><span class="p">;</span>   <span class="c1">// The SDI-12 Address of the D-Opto</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ZTPower</span> <span class="o">=</span> <span class="n">sensorPowerPin</span><span class="p">;</span>  <span class="c1">// Power pin (-1 if unconnected)</span>
<span class="kr">const</span> <span class="kr">int8_t</span> <span class="n">ZTData</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>               <span class="c1">// The SDI12 data pin</span>

<span class="c1">// Create a Zebra Tech DOpto dissolved oxygen sensor object</span>
<span class="n">ZebraTechDOpto</span> <span class="nf">dopto</span><span class="p">(</span><span class="o">*</span><span class="n">DOptoSDI12address</span><span class="p">,</span> <span class="n">ZTPower</span><span class="p">,</span> <span class="n">ZTData</span><span class="p">);</span>

<span class="c1">// Create dissolved oxygen percent, dissolved oxygen concentration, and</span>
<span class="c1">// temperature variable pointers for the Zebra Tech</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dOptoDOpct</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ZebraTechDOpto_DOpct</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dopto</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dOptoDOmgL</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ZebraTechDOpto_DOmgL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dopto</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">dOptoTemp</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">ZebraTechDOpto_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dopto</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">);</span>
<span class="cm">/** End [dopto] */</span>
<span class="cp">#endif</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Calculated Variable[s]</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [calculated_variables] */</span>
<span class="c1">// Create the function to give your calculated result.</span>
<span class="c1">// The function should take no input (void) and return a float.</span>
<span class="c1">// You can use any named variable pointers to access values by way of</span>
<span class="c1">// variable-&gt;getValue()</span>

<span class="kr">float</span> <span class="nf">calculateVariableValue</span><span class="p">(</span><span class="kr">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">calculatedResult</span> <span class="o">=</span> <span class="mi">-9999</span><span class="p">;</span>  <span class="c1">// Always safest to start with a bad value</span>
    <span class="c1">// float inputVar1 = variable1-&gt;getValue();</span>
    <span class="c1">// float inputVar2 = variable2-&gt;getValue();</span>
    <span class="c1">// make sure both inputs are good</span>
    <span class="c1">// if (inputVar1 != -9999 &amp;&amp; inputVar2 != -9999) {</span>
    <span class="c1">//     calculatedResult = inputVar1 + inputVar2;</span>
    <span class="c1">// }</span>
    <span class="k">return</span> <span class="n">calculatedResult</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties of the calculated variable</span>
<span class="c1">// The number of digits after the decimal place</span>
<span class="kr">const</span> <span class="kr">uint8_t</span> <span class="n">calculatedVarResolution</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/variablename/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarName</span> <span class="o">=</span> <span class="s">&quot;varName&quot;</span><span class="p">;</span>
<span class="c1">// This must be a value from http://vocabulary.odm2.org/units/</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarUnit</span> <span class="o">=</span> <span class="s">&quot;varUnit&quot;</span><span class="p">;</span>
<span class="c1">// A short code for the variable</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarCode</span> <span class="o">=</span> <span class="s">&quot;calcVar&quot;</span><span class="p">;</span>
<span class="c1">// The (optional) universallly unique identifier</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">calculatedVarUUID</span> <span class="o">=</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>

<span class="c1">// Finally, Create a calculated variable and return a variable pointer to it</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">calculatedVar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span>
    <span class="n">calculateVariableValue</span><span class="p">,</span> <span class="n">calculatedVarResolution</span><span class="p">,</span> <span class="n">calculatedVarName</span><span class="p">,</span>
    <span class="n">calculatedVarUnit</span><span class="p">,</span> <span class="n">calculatedVarCode</span><span class="p">,</span> <span class="n">calculatedVarUUID</span><span class="p">);</span>
<span class="cm">/** End [calculated_variables] */</span>


<span class="cp">#if defined MS_BUILD_TEST_CREATE_IN_ARRAY</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  Creating the Variable Array[s] and Filling with Variable Objects</span>
<span class="c1">//  NOTE:  This shows three differnt ways of creating the same variable array</span>
<span class="c1">//         and filling it with variables</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [variables_create_in_array] */</span>
<span class="c1">// Version 1: Create pointers for all of the variables from the sensors,</span>
<span class="c1">// at the same time putting them into an array</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">variableList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">new</span> <span class="n">ProcessorStats_SampleNumber</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span>
                                    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_FreeRam</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span>
                               <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_Battery</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">,</span>
                               <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">MaximDS3231_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds3231</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="c1">//  ... Add more variables as needed!</span>
    <span class="k">new</span> <span class="n">Modem_RSSI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_SignalPercent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">,</span> <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span><span class="n">calculateVariableValue</span><span class="p">,</span> <span class="n">calculatedVarResolution</span><span class="p">,</span>
                 <span class="n">calculatedVarName</span><span class="p">,</span> <span class="n">calculatedVarUnit</span><span class="p">,</span> <span class="n">calculatedVarCode</span><span class="p">,</span>
                 <span class="n">calculatedVarUUID</span><span class="p">),</span>
<span class="p">};</span>
<span class="c1">// Count up the number of pointers in the array</span>
<span class="kr">int</span> <span class="n">variableCount</span> <span class="o">=</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">)</span> <span class="o">/</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="c1">// Create the VariableArray object</span>
<span class="n">VariableArray</span> <span class="nf">varArray</span><span class="p">(</span><span class="n">variableCount</span><span class="p">,</span> <span class="n">variableList</span><span class="p">);</span>
<span class="cm">/** End [variables_create_in_array] */</span>
<span class="cp">#endif</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#if defined MS_BUILD_TEST_SEPARATE_UUIDS</span>
<span class="cm">/** Start [variables_separate_uuids] */</span>
<span class="c1">// Version 2: Create two separate arrays, on for the variables and a separate</span>
<span class="c1">// one for the UUID&#39;s, then give both as input to the variable array</span>
<span class="c1">// constructor.  Be cautious when doing this though because order is CRUCIAL!</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">variableList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">new</span> <span class="n">ProcessorStats_SampleNumber</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_FreeRam</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">ProcessorStats_Battery</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mcuBoard</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">MaximDS3231_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ds3231</span><span class="p">),</span>
    <span class="c1">//  ... Add all of your variables!</span>
    <span class="k">new</span> <span class="n">Modem_RSSI</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_SignalPercent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Modem_Temp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modem</span><span class="p">),</span>
    <span class="k">new</span> <span class="n">Variable</span><span class="p">(</span><span class="n">calculateVariableValue</span><span class="p">,</span> <span class="n">calculatedVarResolution</span><span class="p">,</span>
                 <span class="n">calculatedVarName</span><span class="p">,</span> <span class="n">calculatedVarUnit</span><span class="p">,</span> <span class="n">calculatedVarCode</span><span class="p">),</span>
<span class="p">};</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">UUIDs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span>
    <span class="c1">//  ... The number of UUID&#39;s must match the number of variables!</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="c1">// Count up the number of pointers in the array</span>
<span class="kr">int</span> <span class="n">variableCount</span> <span class="o">=</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">)</span> <span class="o">/</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="c1">// Create the VariableArray object and attach the UUID&#39;s</span>
<span class="n">VariableArray</span> <span class="nf">varArray</span><span class="p">(</span><span class="n">variableCount</span><span class="p">,</span> <span class="n">variableList</span><span class="p">,</span> <span class="n">UUIDs</span><span class="p">);</span>
<span class="cm">/** End [variables_separate_uuids] */</span>
<span class="cp">#endif</span>
<span class="c1">// ==========================================================================</span>


<span class="cp">#if defined MS_BUILD_TEST_PRE_NAMED_VARS</span>
<span class="cm">/** Start [variables_pre_named] */</span>
<span class="c1">// Version 3: Fill array with already created and named variable pointers</span>
<span class="n">Variable</span><span class="o">*</span> <span class="n">variableList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">mcuBoardSampNo</span><span class="p">,</span>
    <span class="n">mcuBoardAvailableRAM</span><span class="p">,</span>
    <span class="n">mcuBoardBatt</span><span class="p">,</span>
    <span class="n">calculatedVar</span><span class="p">,</span>
<span class="cp">#if defined ARDUINO_ARCH_AVR || defined MS_SAMD_DS3231</span>
    <span class="n">ds3231Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_AM2315 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">am2315Humid</span><span class="p">,</span>
    <span class="n">am2315Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_DHT || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">dhtHumid</span><span class="p">,</span>
    <span class="n">dhtTemp</span><span class="p">,</span>
    <span class="n">dhtHI</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_SQ212 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">sq212PAR</span><span class="p">,</span>
    <span class="n">sq212voltage</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASCO2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasCO2CO2</span><span class="p">,</span>
    <span class="n">atlasCO2Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASDO || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasDOconc</span><span class="p">,</span>
    <span class="n">atlasDOpct</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASORP || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasORPot</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASPH || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlaspHpH</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASRTD || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasTemp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ATLASEC || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">atlasCond</span><span class="p">,</span>
    <span class="n">atlasTDS</span><span class="p">,</span>
    <span class="n">atlasSal</span><span class="p">,</span>
    <span class="n">atlasGrav</span><span class="p">,</span>
    <span class="n">atlasSpCond</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_BME280 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">bme280Temp</span><span class="p">,</span>
    <span class="n">bme280Humid</span><span class="p">,</span>
    <span class="n">bme280Press</span><span class="p">,</span>
    <span class="n">bme280Alt</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_OBS3 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">obs3TurbLow</span><span class="p">,</span>
    <span class="n">obs3VoltLow</span><span class="p">,</span>
    <span class="n">obs3TurbHigh</span><span class="p">,</span>
    <span class="n">obs3VoltHigh</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_CTD || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ctdCond</span><span class="p">,</span>
    <span class="n">ctdTemp</span><span class="p">,</span>
    <span class="n">ctdDepth</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ES2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">es2Cond</span><span class="p">,</span>
    <span class="n">es2Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_VOLTAGE || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">extvoltV</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_MPL115A2 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">mplTemp</span><span class="p">,</span>
    <span class="n">mplPress</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_INSITURDO || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">rdoTemp</span><span class="p">,</span>
    <span class="n">rdoDOpct</span><span class="p">,</span>
    <span class="n">rdoDOmgL</span><span class="p">,</span>
    <span class="n">rdoO2pp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ACCULEVEL || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">acculevPress</span><span class="p">,</span>
    <span class="n">acculevTemp</span><span class="p">,</span>
    <span class="n">acculevHeight</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_NANOLEVEL || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">nanolevPress</span><span class="p">,</span>
    <span class="n">nanolevTemp</span><span class="p">,</span>
    <span class="n">nanolevHeight</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_MAXBOTIX || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">sonar1Range</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_DS18 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ds18Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_MS5803 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ms5803Temp</span><span class="p">,</span>
    <span class="n">ms5803Press</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_5TM || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">fivetmEa</span><span class="p">,</span>
    <span class="n">fivetmVWC</span><span class="p">,</span>
    <span class="n">fivetmTemp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_HYDROS21 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">hydros21Cond</span><span class="p">,</span>
    <span class="n">hydros21Temp</span><span class="p">,</span>
    <span class="n">hydros21Depth</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_TEROS11 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">teros11Ea</span><span class="p">,</span>
    <span class="n">teros11Temp</span><span class="p">,</span>
    <span class="n">teros11VWC</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_PALEOTERRA || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">ptVolt</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_RAINI2C || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">tbi2cTips</span><span class="p">,</span>
    <span class="n">tbi2cDepth</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_TALLY || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">tallyEvents</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_INA219 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">inaVolt</span><span class="p">,</span>
    <span class="n">inaCurrent</span><span class="p">,</span>
    <span class="n">inaPower</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_CYCLOPS || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">cyclopsVoltage</span><span class="p">,</span>
    <span class="n">cyclopsChloro</span><span class="p">,</span>
    <span class="n">cyclopsRWT</span><span class="p">,</span>
    <span class="n">cyclopsFluoroscein</span><span class="p">,</span>
    <span class="n">cyclopsPhycocyanin</span><span class="p">,</span>
    <span class="n">cyclopsPhycoerythrin</span><span class="p">,</span>
    <span class="n">cyclopsCDOM</span><span class="p">,</span>
    <span class="n">cyclopsCrudeOil</span><span class="p">,</span>
    <span class="n">cyclopsBrighteners</span><span class="p">,</span>
    <span class="n">cyclopsTurbidity</span><span class="p">,</span>
    <span class="n">cyclopsPTSA</span><span class="p">,</span>
    <span class="n">cyclopsBTEX</span><span class="p">,</span>
    <span class="n">cyclopsTryptophan</span><span class="p">,</span>
    <span class="n">cyclopsRedChloro</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_ANALOGEC || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">analogEc_cond</span><span class="p">,</span>
    <span class="n">analogEc_spcond</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y504 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y504DOpct</span><span class="p">,</span>
    <span class="n">y504DOmgL</span><span class="p">,</span>
    <span class="n">y504Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y510 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y510Turb</span><span class="p">,</span>
    <span class="n">y510Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y511 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y511Turb</span><span class="p">,</span>
    <span class="n">y511Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y514 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y514Chloro</span><span class="p">,</span>
    <span class="n">y514Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y520 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y520Cond</span><span class="p">,</span>
    <span class="n">y520Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y532 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y532Voltage</span><span class="p">,</span>
    <span class="n">y532pH</span><span class="p">,</span>
    <span class="n">y532Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y533 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y533Voltage</span><span class="p">,</span>
    <span class="n">y533pH</span><span class="p">,</span>
    <span class="n">y533Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y550 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y550COD</span><span class="p">,</span>
    <span class="n">y550Turbid</span><span class="p">,</span>
    <span class="n">y550Temp</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_Y4000 || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">y4000DO</span><span class="p">,</span>
    <span class="n">y4000Turb</span><span class="p">,</span>
    <span class="n">y4000Cond</span><span class="p">,</span>
    <span class="n">y4000pH</span><span class="p">,</span>
    <span class="n">y4000Temp</span><span class="p">,</span>
    <span class="n">y4000ORP</span><span class="p">,</span>
    <span class="n">y4000Chloro</span><span class="p">,</span>
    <span class="n">y4000BGA</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined MS_BUILD_TEST_DOPTO || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="n">dOptoDOpct</span><span class="p">,</span>
    <span class="n">dOptoDOmgL</span><span class="p">,</span>
    <span class="n">dOptoTemp</span><span class="p">,</span>
<span class="cp">#endif</span>
    <span class="n">modemRSSI</span><span class="p">,</span>
    <span class="n">modemSignalPct</span><span class="p">,</span>
<span class="cp">#ifdef TINY_GSM_MODEM_HAS_BATTERY</span>
    <span class="n">modemBatteryState</span><span class="p">,</span>
    <span class="n">modemBatteryPct</span><span class="p">,</span>
    <span class="n">modemBatteryVoltage</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef TINY_GSM_MODEM_HAS_TEMPERATURE</span>
    <span class="n">modemTemperature</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>
<span class="c1">// Count up the number of pointers in the array</span>
<span class="kr">int</span> <span class="n">variableCount</span> <span class="o">=</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">)</span> <span class="o">/</span> <span class="kr">sizeof</span><span class="p">(</span><span class="n">variableList</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="c1">// Create the VariableArray object</span>
<span class="n">VariableArray</span> <span class="nf">varArray</span><span class="p">(</span><span class="n">variableCount</span><span class="p">,</span> <span class="n">variableList</span><span class="p">);</span>
<span class="cm">/** End [variables_pre_named] */</span>
<span class="cp">#endif</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  The Logger Object[s]</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [loggers] */</span>
<span class="c1">// Create a new logger instance</span>
<span class="n">Logger</span> <span class="nf">dataLogger</span><span class="p">(</span><span class="n">LoggerID</span><span class="p">,</span> <span class="n">loggingInterval</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">varArray</span><span class="p">);</span>
<span class="cm">/** End [loggers] */</span>


<span class="cp">#if defined MS_BUILD_TEST_MMW</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  A Publisher to Monitor My Watershed / EnviroDIY Data Sharing Portal</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [monitormw] */</span>
<span class="c1">// Device registration and sampling feature information can be obtained after</span>
<span class="c1">// registration at https://monitormywatershed.org or https://data.envirodiy.org</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">registrationToken</span> <span class="o">=</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>  <span class="c1">// Device registration token</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">samplingFeature</span> <span class="o">=</span>
    <span class="s">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class="p">;</span>  <span class="c1">// Sampling feature UUID</span>

<span class="c1">// Create a data publisher for the Monitor My Watershed/EnviroDIY POST endpoint</span>
<span class="cp">#include</span> <span class="cpf">&lt;publishers/EnviroDIYPublisher.h&gt;</span><span class="cp"></span>
<span class="n">EnviroDIYPublisher</span> <span class="nf">EnviroDIYPOST</span><span class="p">(</span><span class="n">dataLogger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">modem</span><span class="p">.</span><span class="n">gsmClient</span><span class="p">,</span>
                                 <span class="n">registrationToken</span><span class="p">,</span> <span class="n">samplingFeature</span><span class="p">);</span>
<span class="cm">/** End [monitormw] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_DREAMHOST</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  A Publisher to DreamHost</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [dreamhost] */</span>
<span class="c1">// NOTE:  This is an outdated data collection tool used by the Stroud Center.</span>
<span class="c1">// It very, very unlikely that you will use this.</span>

<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">DreamHostPortalRX</span> <span class="o">=</span> <span class="s">&quot;xxxx&quot;</span><span class="p">;</span>

<span class="c1">// Create a data publisher to DreamHost</span>
<span class="cp">#include</span> <span class="cpf">&lt;publishers/DreamHostPublisher.h&gt;</span><span class="cp"></span>
<span class="n">DreamHostPublisher</span> <span class="nf">DreamHostGET</span><span class="p">(</span><span class="n">dataLogger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">modem</span><span class="p">.</span><span class="n">gsmClient</span><span class="p">,</span>
                                <span class="n">DreamHostPortalRX</span><span class="p">);</span>
<span class="cm">/** End [dreamhost] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_THINGSPEAK</span>
<span class="c1">// ==========================================================================</span>
<span class="c1">//  ThingSpeak Data Publisher</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [thingspeak] */</span>
<span class="c1">// Create a channel with fields on ThingSpeak in advance.</span>
<span class="c1">// The fields will be sent in exactly the order they are in the variable array.</span>
<span class="c1">// Any custom name or identifier given to the field on ThingSpeak is irrelevant.</span>
<span class="c1">// No more than 8 fields of data can go to any one channel.  Any fields beyond</span>
<span class="c1">// the eighth in the array will be ignored.</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">thingSpeakMQTTKey</span> <span class="o">=</span>
    <span class="s">&quot;XXXXXXXXXXXXXXXX&quot;</span><span class="p">;</span>  <span class="c1">// Your MQTT API Key from Account &gt; MyProfile.</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">thingSpeakChannelID</span> <span class="o">=</span>
    <span class="s">&quot;######&quot;</span><span class="p">;</span>  <span class="c1">// The numeric channel id for your channel</span>
<span class="kr">const</span> <span class="kr">char</span><span class="o">*</span> <span class="n">thingSpeakChannelKey</span> <span class="o">=</span>
    <span class="s">&quot;XXXXXXXXXXXXXXXX&quot;</span><span class="p">;</span>  <span class="c1">// The Write API Key for your channel</span>

<span class="c1">// Create a data publisher for ThingSpeak</span>
<span class="cp">#include</span> <span class="cpf">&lt;publishers/ThingSpeakPublisher.h&gt;</span><span class="cp"></span>
<span class="n">ThingSpeakPublisher</span> <span class="nf">TsMqtt</span><span class="p">(</span><span class="n">dataLogger</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">modem</span><span class="p">.</span><span class="n">gsmClient</span><span class="p">,</span> <span class="n">thingSpeakMQTTKey</span><span class="p">,</span>
                           <span class="n">thingSpeakChannelID</span><span class="p">,</span> <span class="n">thingSpeakChannelKey</span><span class="p">);</span>
<span class="cm">/** End [thingspeak] */</span>
<span class="cp">#endif</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Working Functions</span>
<span class="c1">// ==========================================================================</span>
<span class="cm">/** Start [working_functions] */</span>
<span class="c1">// Flashes the LED&#39;s on the primary board</span>
<span class="kr">void</span> <span class="nf">greenredflash</span><span class="p">(</span><span class="kr">uint8_t</span> <span class="n">numFlash</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="kr">uint8_t</span> <span class="n">rate</span> <span class="o">=</span> <span class="mi">75</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kr">uint8_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numFlash</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">HIGH</span><span class="p">);</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
        <span class="nf">delay</span><span class="p">(</span><span class="n">rate</span><span class="p">);</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">HIGH</span><span class="p">);</span>
        <span class="nf">delay</span><span class="p">(</span><span class="n">rate</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Uses the processor sensor object to read the battery voltage</span>
<span class="c1">// NOTE: This will actually return the battery level from the previous update!</span>
<span class="kr">float</span> <span class="nf">getBatteryVoltage</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">mcuBoard</span><span class="p">.</span><span class="n">sensorValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">-9999</span><span class="p">)</span> <span class="n">mcuBoard</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">mcuBoard</span><span class="p">.</span><span class="n">sensorValues</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
<span class="cm">/** End [working_functions] */</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Arduino Setup Function</span>
<span class="c1">// ==========================================================================</span>
<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
<span class="cm">/** Start [setup_wait] */</span>
<span class="c1">// Wait for USB connection to be established by PC</span>
<span class="c1">// NOTE:  Only use this when debugging - if not connected to a PC, this</span>
<span class="c1">// could prevent the script from starting</span>
<span class="cp">#if defined SERIAL_PORT_USBVIRTUAL</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">SERIAL_PORT_USBVIRTUAL</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nf">millis</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">10000L</span><span class="p">))</span> <span class="p">{}</span>
<span class="cp">#endif</span>
    <span class="cm">/** End [setup_wait] */</span>

    <span class="cm">/** Start [setup_prints] */</span>
    <span class="c1">// Start the primary serial connection</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">serialBaud</span><span class="p">);</span>

    <span class="c1">// Print a start-up note to the first serial port</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Now running &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">sketchName</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot; on Logger &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">LoggerID</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">();</span>

    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Using ModularSensors Library version &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">MODULAR_SENSORS_VERSION</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;TinyGSM Library version &quot;</span><span class="p">));</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">TINYGSM_VERSION</span><span class="p">);</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">();</span>
<span class="cm">/** End [setup_prints] */</span>

<span class="cm">/** Start [setup_softserial] */</span>
<span class="c1">// Allow interrupts for software serial</span>
<span class="cp">#if defined SoftwareSerial_ExtInts_h</span>
    <span class="n">enableInterrupt</span><span class="p">(</span><span class="n">softSerialRx</span><span class="p">,</span> <span class="n">SoftwareSerial_ExtInts</span><span class="o">::</span><span class="n">handle_interrupt</span><span class="p">,</span>
                    <span class="n">CHANGE</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cp">#if defined NeoSWSerial_h</span>
    <span class="n">enableInterrupt</span><span class="p">(</span><span class="n">neoSSerial1Rx</span><span class="p">,</span> <span class="n">neoSSerial1ISR</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span>
<span class="cp">#endif</span>
    <span class="cm">/** End [setup_softserial] */</span>

    <span class="cm">/** Start [setup_serial_begins] */</span>
    <span class="c1">// Start the serial connection with the modem</span>
    <span class="n">modemSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">modemBaud</span><span class="p">);</span>

    <span class="c1">// Start the stream for the modbus sensors;</span>
    <span class="c1">// all currently supported modbus sensors use 9600 baud</span>
    <span class="n">modbusSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

<span class="cp">#if defined MS_BUILD_TEST_MAXBOTIX || defined MS_BUILD_TEST_ALL_SENSORS</span>
    <span class="c1">// Start the SoftwareSerial stream for the sonar; it will always be at 9600</span>
    <span class="c1">// baud</span>
    <span class="n">sonarSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cm">/** End [setup_serial_begins] */</span>

<span class="c1">// Assign pins SERCOM functionality for SAMD boards</span>
<span class="c1">// NOTE:  This must happen *after* the various serial.begin statements</span>
<span class="cm">/** Start [setup_samd_pins] */</span>
<span class="cp">#if defined ARDUINO_ARCH_SAMD</span>
<span class="cp">#ifndef ENABLE_SERIAL2</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial2 Tx/Dout = SERCOM1 Pad #2</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial2 Rx/Din = SERCOM1 Pad #0</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef ENABLE_SERIAL3</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial3 Tx/Dout = SERCOM2 Pad #2</span>
    <span class="n">pinPeripheral</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">PIO_SERCOM</span><span class="p">);</span>  <span class="c1">// Serial3 Rx/Din = SERCOM2 Pad #3</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
    <span class="cm">/** End [setup_samd_pins] */</span>

    <span class="cm">/** Start [setup_flashing_led] */</span>
    <span class="c1">// Set up pins for the LED&#39;s</span>
    <span class="nf">pinMode</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">OUTPUT</span><span class="p">);</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">greenLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
    <span class="nf">pinMode</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">OUTPUT</span><span class="p">);</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="n">redLED</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>
    <span class="c1">// Blink the LEDs to show the board is on and starting up</span>
    <span class="n">greenredflash</span><span class="p">();</span>
    <span class="cm">/** End [setup_flashing_led] */</span>

    <span class="cm">/** Start [setup_logger] */</span>
    <span class="c1">// Set the timezones for the logger/data and the RTC</span>
    <span class="c1">// Logging in the given time zone</span>
    <span class="n">Logger</span><span class="o">::</span><span class="n">setLoggerTimeZone</span><span class="p">(</span><span class="n">timeZone</span><span class="p">);</span>
    <span class="c1">// It is STRONGLY RECOMMENDED that you set the RTC to be in UTC (UTC+0)</span>
    <span class="n">Logger</span><span class="o">::</span><span class="n">setRTCTimeZone</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Attach the modem and information pins to the logger</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">attachModem</span><span class="p">(</span><span class="n">modem</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemLED</span><span class="p">(</span><span class="n">modemLEDPin</span><span class="p">);</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">setLoggerPins</span><span class="p">(</span><span class="n">wakePin</span><span class="p">,</span> <span class="n">sdCardSSPin</span><span class="p">,</span> <span class="n">sdCardPwrPin</span><span class="p">,</span> <span class="n">buttonPin</span><span class="p">,</span>
                             <span class="n">greenLED</span><span class="p">);</span>

    <span class="c1">// Begin the logger</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>
    <span class="cm">/** End [setup_logger] */</span>

    <span class="cm">/** Start [setup_sesors] */</span>
    <span class="c1">// Note:  Please change these battery voltages to match your battery</span>
    <span class="c1">// Set up the sensors, except at lowest battery level</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Setting up sensors...&quot;</span><span class="p">));</span>
        <span class="n">varArray</span><span class="p">.</span><span class="n">setupSensors</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="cm">/** End [setup_sesors] */</span>

<span class="cp">#if defined MS_BUILD_TEST_ESP8266 &amp;&amp; F_CPU == 8000000L</span>
    <span class="cm">/** Start [setup_esp] */</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">modemBaud</span> <span class="o">&gt;</span> <span class="mi">57600</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">modem</span><span class="p">.</span><span class="n">modemWake</span><span class="p">();</span>  <span class="c1">// NOTE:  This will also set up the modem</span>
        <span class="n">modemSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">modemBaud</span><span class="p">);</span>
        <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+UART_DEF=9600,8,1,0,0&quot;</span><span class="p">));</span>
        <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
        <span class="n">modemSerial</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
        <span class="n">modemSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="p">}</span>
<span class="cm">/** End [setup_esp] */</span>
<span class="cp">#endif</span>

<span class="cp">#if defined MS_BUILD_TEST_SKYWIRE</span>
    <span class="cm">/** Start [setup_skywire] */</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemStatusLevel</span><span class="p">(</span><span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// If using CTS, LOW</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemWakeLevel</span><span class="p">(</span><span class="kr">HIGH</span><span class="p">);</span>   <span class="c1">// Skywire dev board inverts the signal</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">setModemResetLevel</span><span class="p">(</span><span class="kr">HIGH</span><span class="p">);</span>  <span class="c1">// Skywire dev board inverts the signal</span>
    <span class="cm">/** End [setup_skywire] */</span>
<span class="cp">#endif</span>

<span class="cp">#if defined MS_BUILD_TEST_XBEE_CELLULAR</span>
    <span class="cm">/** Start [setup_xbeec_carrier] */</span>
    <span class="c1">// Extra modem set-up</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Waking modem and setting Cellular Carrier Options...&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">modemWake</span><span class="p">();</span>  <span class="c1">// NOTE:  This will also set up the modem</span>
    <span class="c1">// Go back to command mode to set carrier options</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">commandMode</span><span class="p">();</span>
    <span class="c1">// Carrier Profile - 0 = Automatic selection</span>
    <span class="c1">//                 - 1 = No profile/SIM ICCID selected</span>
    <span class="c1">//                 - 2 = AT&amp;T</span>
    <span class="c1">//                 - 3 = Verizon</span>
    <span class="c1">// NOTE:  To select T-Mobile, you must enter bypass mode!</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;CP&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Cellular network technology - 0 = LTE-M with NB-IoT fallback</span>
    <span class="c1">//                             - 1 = NB-IoT with LTE-M fallback</span>
    <span class="c1">//                             - 2 = LTE-M only</span>
    <span class="c1">//                             - 3 = NB-IoT only</span>
    <span class="c1">// NOTE:  As of 2020 in the USA, AT&amp;T and Verizon only use LTE-M</span>
    <span class="c1">// T-Mobile uses NB-IOT</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;N#&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Write changes to flash and apply them</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Wait while applying changes...&quot;</span><span class="p">));</span>
    <span class="c1">// Write changes to flash</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">writeChanges</span><span class="p">();</span>
    <span class="c1">// Reset the cellular component to ensure network settings are changed</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;!R&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">(</span><span class="mf">30000L</span><span class="p">);</span>
    <span class="c1">// Force reset of the Digi component as well</span>
    <span class="c1">// This effectively exits command mode</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;FR&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">(</span><span class="mf">5000L</span><span class="p">);</span>
<span class="cm">/** End [setup_xbeec_carrier] */</span>
<span class="cp">#endif</span>


<span class="cp">#if defined MS_BUILD_TEST_XBEE_LTE_B</span>
    <span class="cm">/** Start [setup_r4_carrrier] */</span>
    <span class="c1">// Extra modem set-up</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Waking modem and setting Cellular Carrier Options...&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">modemWake</span><span class="p">();</span>  <span class="c1">// NOTE:  This will also set up the modem</span>
    <span class="c1">// Turn off the cellular radio while making network changes</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+CFUN=0&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Mobile Network Operator Profile - 0 = SW default</span>
    <span class="c1">//                                 - 1 = SIM ICCID selected</span>
    <span class="c1">//                                 - 2: ATT</span>
    <span class="c1">//                                 - 6: China Telecom</span>
    <span class="c1">//                                 - 100: Standard Europe</span>
    <span class="c1">//                                 - 4: Telstra</span>
    <span class="c1">//                                 - 5: T-Mobile US</span>
    <span class="c1">//                                 - 19: Vodafone</span>
    <span class="c1">//                                 - 3: Verizon</span>
    <span class="c1">//                                 - 31: Deutsche Telekom</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+UMNOPROF=&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Selected network technology - 7: LTE Cat.M1</span>
    <span class="c1">//                             - 8: LTE Cat.NB1</span>
    <span class="c1">// Fallback network technology - 7: LTE Cat.M1</span>
    <span class="c1">//                              - 8: LTE Cat.NB1</span>
    <span class="c1">// NOTE:  As of 2020 in the USA, AT&amp;T and Verizon only use LTE-M</span>
    <span class="c1">// T-Mobile uses NB-IOT</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+URAT=&quot;</span><span class="p">),</span> <span class="mi">7</span><span class="p">,</span> <span class="sc">&#39;,&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">();</span>
    <span class="c1">// Restart the module to apply changes</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">sendAT</span><span class="p">(</span><span class="n">GF</span><span class="p">(</span><span class="s">&quot;+CFUN=1,1&quot;</span><span class="p">));</span>
    <span class="n">modem</span><span class="p">.</span><span class="n">gsmModem</span><span class="p">.</span><span class="n">waitResponse</span><span class="p">(</span><span class="mf">10000L</span><span class="p">);</span>
<span class="cm">/** End [setup_r4_carrrier] */</span>
<span class="cp">#endif</span>

    <span class="cm">/** Start [setup_clock] */</span>
    <span class="c1">// Sync the clock if it isn&#39;t valid or we have battery to spare</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.55</span> <span class="o">||</span> <span class="o">!</span><span class="n">dataLogger</span><span class="p">.</span><span class="n">isRTCSane</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// Synchronize the RTC with NIST</span>
        <span class="c1">// This will also set up the modem</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">syncRTC</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="cm">/** End [setup_clock] */</span>

    <span class="cm">/** Start [setup_file] */</span>
    <span class="c1">// Create the log file, adding the default header to it</span>
    <span class="c1">// Do this last so we have the best chance of getting the time correct and</span>
    <span class="c1">// all sensor names correct</span>
    <span class="c1">// Writing to the SD card can be power intensive, so if we&#39;re skipping</span>
    <span class="c1">// the sensor setup we&#39;ll skip this too.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Setting up file on SD card&quot;</span><span class="p">));</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOnSDcard</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span>
        <span class="c1">// true = wait for card to settle after power up</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">createLogFile</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span>  <span class="c1">// true = write a new header</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOffSDcard</span><span class="p">(</span><span class="kr">true</span><span class="p">);</span>
        <span class="c1">// true = wait for internal housekeeping after write</span>
    <span class="p">}</span>
    <span class="cm">/** End [setup_file] */</span>

    <span class="cm">/** Start [setup_sleep] */</span>
    <span class="c1">// Call the processor sleep</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Putting processor to sleep</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">systemSleep</span><span class="p">();</span>
    <span class="cm">/** End [setup_sleep] */</span>
<span class="p">}</span>


<span class="c1">// ==========================================================================</span>
<span class="c1">//  Arduino Loop Function</span>
<span class="c1">// ==========================================================================</span>
<span class="cp">#ifndef MS_USE_COMPLEX_LOOP</span>
<span class="c1">// Use this short loop for simple data logging and sending</span>
<span class="cm">/** Start [simple_loop] */</span>
<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Note:  Please change these battery voltages to match your battery</span>
    <span class="c1">// At very low battery, just go back to sleep</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">systemSleep</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">3.55</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// At moderate voltage, log data but don&#39;t send it over the modem</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">logData</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// If the battery is good, send the data to the world</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">logDataAndPublish</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/** End [simple_loop] */</span>

<span class="cp">#else</span>
<span class="cm">/** Start [complex_loop] */</span>
<span class="c1">// Use this long loop when you want to do something special</span>
<span class="c1">// Because of the way alarms work on the RTC, it will wake the processor and</span>
<span class="c1">// start the loop every minute exactly on the minute.</span>
<span class="c1">// The processor may also be woken up by another interrupt or level change on a</span>
<span class="c1">// pin - from a button or some other input.</span>
<span class="c1">// The &quot;if&quot; statements in the loop determine what will happen - whether the</span>
<span class="c1">// sensors update, testing mode starts, or it goes back to sleep.</span>
<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Reset the watchdog</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

    <span class="c1">// Assuming we were woken up by the clock, check if the current time is an</span>
    <span class="c1">// even interval of the logging interval</span>
    <span class="c1">// We&#39;re only doing anything at all if the battery is above 3.4V</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dataLogger</span><span class="p">.</span><span class="n">checkInterval</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.4</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Flag to notify that we&#39;re in already awake and logging a point</span>
        <span class="n">Logger</span><span class="o">::</span><span class="n">isLoggingNow</span> <span class="o">=</span> <span class="kr">true</span><span class="p">;</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Print a line to show new reading</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;------------------------------------------&quot;</span><span class="p">));</span>
        <span class="c1">// Turn on the LED to show we&#39;re taking a reading</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">alertOn</span><span class="p">();</span>
        <span class="c1">// Power up the SD Card, but skip any waits after power up</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOnSDcard</span><span class="p">(</span><span class="kr">false</span><span class="p">);</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Turn on the modem to let it start searching for the network</span>
        <span class="c1">// Only turn the modem on if the battery at the last interval was high</span>
        <span class="c1">// enough</span>
        <span class="c1">// NOTE:  if the modemPowerUp function is not run before the</span>
        <span class="c1">// completeUpdate</span>
        <span class="c1">// function is run, the modem will not be powered and will not</span>
        <span class="c1">// return a signal strength reading.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.6</span><span class="p">)</span> <span class="n">modem</span><span class="p">.</span><span class="n">modemPowerUp</span><span class="p">();</span>

        <span class="c1">// Start the stream for the modbus sensors, if your RS485 adapter bleeds</span>
        <span class="c1">// current from data pins when powered off &amp; you stop modbus serial</span>
        <span class="c1">// connection with digitalWrite(5, LOW), below.</span>
        <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
        <span class="n">altSoftSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

        <span class="c1">// Do a complete update on the variable array.</span>
        <span class="c1">// This this includes powering all of the sensors, getting updated</span>
        <span class="c1">// values, and turing them back off.</span>
        <span class="c1">// NOTE:  The wake function for each sensor should force sensor setup</span>
        <span class="c1">// to run if the sensor was not previously set up.</span>
        <span class="n">varArray</span><span class="p">.</span><span class="n">completeUpdate</span><span class="p">();</span>

        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Reset modbus serial pins to LOW, if your RS485 adapter bleeds power</span>
        <span class="c1">// on sleep, because Modbus Stop bit leaves these pins HIGH.</span>
        <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Tx pin to LOW</span>
        <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Rx pin to LOW</span>

        <span class="c1">// Create a csv data record and save it to the log file</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">logToSD</span><span class="p">();</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>

        <span class="c1">// Connect to the network</span>
        <span class="c1">// Again, we&#39;re only doing this if the battery is doing well</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">getBatteryVoltage</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">3.55</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">modem</span><span class="p">.</span><span class="n">connectInternet</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                <span class="c1">// Publish data to remotes</span>
                <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Modem connected to internet.&quot;</span><span class="p">));</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">publishDataToRemotes</span><span class="p">();</span>

                <span class="c1">// Sync the clock at midnight</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">markedEpochTime</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
                    <span class="n">Logger</span><span class="o">::</span><span class="n">markedEpochTime</span> <span class="o">%</span> <span class="mi">86400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Running a daily clock sync...&quot;</span><span class="p">));</span>
                    <span class="n">dataLogger</span><span class="p">.</span><span class="n">setRTClock</span><span class="p">(</span><span class="n">modem</span><span class="p">.</span><span class="n">getNISTTime</span><span class="p">());</span>
                    <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                    <span class="n">modem</span><span class="p">.</span><span class="n">updateModemMetadata</span><span class="p">();</span>
                    <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="c1">// Disconnect from the network</span>
                <span class="n">modem</span><span class="p">.</span><span class="n">disconnectInternet</span><span class="p">();</span>
                <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="c1">// Turn the modem off</span>
            <span class="n">modem</span><span class="p">.</span><span class="n">modemSleepPowerDown</span><span class="p">();</span>
            <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="c1">// Cut power from the SD card - without additional housekeeping wait</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">turnOffSDcard</span><span class="p">(</span><span class="kr">false</span><span class="p">);</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">watchDogTimer</span><span class="p">.</span><span class="n">resetWatchDog</span><span class="p">();</span>
        <span class="c1">// Turn off the LED</span>
        <span class="n">dataLogger</span><span class="p">.</span><span class="n">alertOff</span><span class="p">();</span>
        <span class="c1">// Print a line to show reading ended</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span>

        <span class="c1">// Unset flag</span>
        <span class="n">Logger</span><span class="o">::</span><span class="n">isLoggingNow</span> <span class="o">=</span> <span class="kr">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Check if it was instead the testing interrupt that woke us up</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">startTesting</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Start the stream for the modbus sensors, if your RS485 adapter bleeds</span>
        <span class="c1">// current from data pins when powered off &amp; you stop modbus serial</span>
        <span class="c1">// connection with digitalWrite(5, LOW), below.</span>
        <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
        <span class="n">altSoftSerial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

        <span class="n">dataLogger</span><span class="p">.</span><span class="n">testingMode</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Reset modbus serial pins to LOW, if your RS485 adapter bleeds power</span>
    <span class="c1">// on sleep, because Modbus Stop bit leaves these pins HIGH.</span>
    <span class="c1">// https://github.com/EnviroDIY/ModularSensors/issues/140#issuecomment-389380833</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Tx pin to LOW</span>
    <span class="nf">digitalWrite</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="kr">LOW</span><span class="p">);</span>  <span class="c1">// Reset AltSoftSerial Rx pin to LOW</span>

    <span class="c1">// Call the processor sleep</span>
    <span class="n">dataLogger</span><span class="p">.</span><span class="n">systemSleep</span><span class="p">();</span>
<span class="p">}</span>
<span class="cp">#endif</span>
<span class="cm">/** End [complex_loop] */</span></pre></section>
        <div class="m-note m-dim m-thin m-text-center"><a href="logging_to__thing_speak_8ino-example.html" class="m-doc">&laquo; logging_to_ThingSpeak.ino</a> | <a href="page_the_examples.html" class="m-doc">Examples</a> | <a href="simple_logging_8ino-example.html" class="m-doc">simple_logging.ino &raquo;</a></div>

                    </div>
                  </div>
                </div>
              </article>
            </main>

          </div>      </div></div><footer id="gp-footer">
      <div id="gp-copyright">
        <div class="gp-container">
          <div id="gp-copyright-text">
            <p>
              <a href="http://www.stroudcenter.org/" target="_blank"
                ><img
                  style="float: left; margin-right: 20px;"
                  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/uploads/2017/01/stroud-white-white-165px.png"
                  alt=""
                  width="165"
                  height="70" /></a
              >EnviroDIY™ is a community for do-it-yourself ideas for
              environmental science and monitoring. EnviroDIY is an
              initiative of
              <a href="http://www.stroudcenter.org/" target="_blank"
                >Stroud™ Water Research Center</a
              >, which seeks to advance knowledge and stewardship of
              freshwater systems through global research, education, and
              watershed restoration.
            </p>
            <p>
              All content on EnviroDIY is licensed as Creative Commons
              Attribution-ShareAlike 4.0 International (CC-BY-SA). Hardware
              designs on this website are released under the CERN Open
              Hardware License 1.2.
              <a href="https://envirodiy.org/licenses/"
                >Alternative licenses are available.</a
              >
              <a href="https://envirodiy.org/terms/">Terms of Use</a> |
              <a href="https://envirodiy.org/privacy/">Privacy Policy</a> |
              <a href="https://envirodiy.org/cookies/">Cookie Policy</a> |
              <a href="https://envirodiy.org/contact/">Contact</a>
            </p>
            <p>
              Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <div class="gp-clear"></div>

    </div></div><script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/modernizr.js?ver=5.6"
  id="modernizr-js"
></script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-includes/js/imagesloaded.min.js?ver=4.1.4"
  id="imagesloaded-js"
></script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/selectivizr.min.js?ver=5.6"
  id="selectivizr-js"
></script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/placeholders.min.js?ver=5.6"
  id="placeholder-js"
></script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/jquery.ui.totop.min.js?ver=5.6"
  id="jquery-totop-js"
></script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/jquery.flexslider-min.js?ver=5.6"
  id="jquery-flexslider-js"
></script>
<script type="text/javascript" id="ghostpool-custom-js-js-extra">
  /* <![CDATA[ */
  var ghostpool_script = {
    lightbox: "disabled",
    url: "https:\/\/www.envirodiy.org\/",
    related_items_in_view: "",
  };
  /* ]]> */
</script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/jquery.stellar.min.js?ver=5.6"
  id="jquery-stellar-js"
></script>
<script type="text/javascript" id="ghostpool-custom-js-js-extra">
  /* <![CDATA[ */
  var ghostpool_script = {
    lightbox: "disabled",
    url: "https:\/\/www.envirodiy.org\/",
    related_items_in_view: "",
  };
  /* ]]> */
</script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/custom.js?ver=5.6"
  id="ghostpool-custom-js-js"
></script>
<script type="text/javascript" id="ghostpool-ajax-loop-js-extra">
  /* <![CDATA[ */
  var ghostpoolAjax = {
    ajaxurl: "https:\/\/www.envirodiy.org\/wp-admin\/admin-ajax.php",
    ajaxnonce: "6049425e02",
    querystring: "",
  };
  /* ]]> */
</script>
<script
  type="text/javascript"
  src="https://3qzcxr28gq9vutx8scdn91zq-wpengine.netdna-ssl.com/wp-content/themes/socialize/lib/scripts/ajax-loop.js?ver=5.6"
  id="ghostpool-ajax-loop-js"
></script>
</body>
</html>
