{
  "version": "1.14.0",
  "compound": {
    "kind": "page",
    "id": "example_drwi_ediylte",
    "name": "DRWI Sites with EnviroDIY LTE Bees",
    "url_base": "example_drwi_ediylte",
    "url": "example_drwi_ediylte.html",
    "include": null,
    "has_template_details": false,
    "templates": null,
    "brief": "",
    "description": "<p><a name=\"md_examples_2_d_r_w_i___s_i_m7080_l_t_e_2_read_me\"></a></p><p>The DRWI EnviroDIY LTEbee example uses the sensors and equipment common to older stations (2016-2020) deployed by groups participating in the DRWI Citizen Science project with the Stroud Water Research Center. It includes a Meter Hydros 21 (CTD), a Campbell OBS3+, (Turbidity) and a SIM7080G-based EnviroDIY LTEbee for communication.</p><p>The exact hardware configuration used in this example:</p><ul><li>Mayfly v1.x board</li><li>EnviroDIY SIM7080 LTE module (with Hologram SIM card)</li><li>Hydros21 CTD sensor</li><li>Campbell Scientific OBS3+ Turbidity sensor</li></ul><p>An EnviroDIY LTE SIM7080 module can be used with the older Mayfly v0.5b boards if you change line 101 (for modemVccPin) from 18 to -1. This is because the Mayfly v1.0 board has a separate 3.3v regulator to power the Bee socket and is controlled by turning pin 18 on or off. Mayfly v0.5b has the Bee socket constantly powered, therefore using &quot;-1&quot; is the proper setting for that line of code.</p><p>The EnviroDIY LTE SIM7080 module includes 2 antennas in the package. The small thin one is the cellular antenna, and should be connected to the socket labeled &quot;CELL&quot;. The thicker block is the GPS antenna, and should be connected to the &quot;GPS&quot; socket, but only if you intend to use the GPS functionality of the module. ModularSensors does not currently support GPS functionality, but other libraries such as TinyGPS can work with the SIM7080 module.</p><p>The included cell antenna works best in high-signal-strength areas. For most remote areas and logger deployments, we suggest a larger LTE antenna, like the W3907B0100 from PulseLarsen (Digikey 1837-1003-ND or Mouser 673-W3907B0100)</p><hr/><hr/><section id=\"example_drwi_ediylte_unique\"><h2>Unique Features of the DRWI EnviroDIY LTE Example</h2><ul><li>Specifically for sites within the Delaware River Watershed Initiative.</li><li>Uses a EnviroDIY LTE Bee based on the SIMCom SIM7080G</li></ul></section><section id=\"example_drwi_ediylte_pio_config\"><h2>PlatformIO Configuration</h2><div class=\"m-code-pygments-default\"><div class=\"highlight\"><div class=\"line\"><a id=\"l-1\" name=\"l-1\"></a><span class=\"linenos\"> 1</span><span class=\"c1\">; PlatformIO Project Configuration File</span></div>\n<div class=\"line\"><a id=\"l-2\" name=\"l-2\"></a><span class=\"linenos\"> 2</span><span class=\"c1\">;</span></div>\n<div class=\"line\"><a id=\"l-3\" name=\"l-3\"></a><span class=\"linenos\"> 3</span><span class=\"c1\">;   Build options: build flags, source filter</span></div>\n<div class=\"line\"><a id=\"l-4\" name=\"l-4\"></a><span class=\"linenos\"> 4</span><span class=\"c1\">;   Upload options: custom upload port, speed and extra flags</span></div>\n<div class=\"line\"><a id=\"l-5\" name=\"l-5\"></a><span class=\"linenos\"> 5</span><span class=\"c1\">;   Library options: dependencies, extra library storages</span></div>\n<div class=\"line\"><a id=\"l-6\" name=\"l-6\"></a><span class=\"linenos\"> 6</span><span class=\"c1\">;   Advanced options: extra scripting</span></div>\n<div class=\"line\"><a id=\"l-7\" name=\"l-7\"></a><span class=\"linenos\"> 7</span><span class=\"c1\">;</span></div>\n<div class=\"line\"><a id=\"l-8\" name=\"l-8\"></a><span class=\"linenos\"> 8</span><span class=\"c1\">; Please visit documentation for the other options and examples</span></div>\n<div class=\"line\"><a id=\"l-9\" name=\"l-9\"></a><span class=\"linenos\"> 9</span><span class=\"c1\">; http://docs.platformio.org/page/projectconf.html</span></div>\n<div class=\"line\"><a id=\"l-10\" name=\"l-10\"></a><span class=\"linenos\">10</span></div>\n<div class=\"line\"><a id=\"l-11\" name=\"l-11\"></a><span class=\"linenos\">11</span><span class=\"k\">[platformio]</span></div>\n<div class=\"line\"><a id=\"l-12\" name=\"l-12\"></a><span class=\"linenos\">12</span><span class=\"na\">description</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">ModularSensors example intended for DRWI users with CTD, turbidity, and a EnviroDIY SIM7080G LTE modem</span></div>\n<div class=\"line\"><a id=\"l-13\" name=\"l-13\"></a><span class=\"linenos\">13</span></div>\n<div class=\"line\"><a id=\"l-14\" name=\"l-14\"></a><span class=\"linenos\">14</span><span class=\"k\">[env:mayfly]</span></div>\n<div class=\"line\"><a id=\"l-15\" name=\"l-15\"></a><span class=\"linenos\">15</span><span class=\"na\">monitor_speed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">57600</span></div>\n<div class=\"line\"><a id=\"l-16\" name=\"l-16\"></a><span class=\"linenos\">16</span><span class=\"na\">board</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">mayfly</span></div>\n<div class=\"line\"><a id=\"l-17\" name=\"l-17\"></a><span class=\"linenos\">17</span><span class=\"na\">platform</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">atmelavr</span></div>\n<div class=\"line\"><a id=\"l-18\" name=\"l-18\"></a><span class=\"linenos\">18</span><span class=\"na\">framework</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">arduino</span></div>\n<div class=\"line\"><a id=\"l-19\" name=\"l-19\"></a><span class=\"linenos\">19</span><span class=\"na\">lib_ldf_mode</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">deep+</span></div>\n<div class=\"line\"><a id=\"l-20\" name=\"l-20\"></a><span class=\"linenos\">20</span><span class=\"na\">lib_ignore</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-21\" name=\"l-21\"></a><span class=\"linenos\">21</span><span class=\"w\">    </span><span class=\"na\">RTCZero</span></div>\n<div class=\"line\"><a id=\"l-22\" name=\"l-22\"></a><span class=\"linenos\">22</span><span class=\"w\">    </span><span class=\"na\">Adafruit NeoPixel</span></div>\n<div class=\"line\"><a id=\"l-23\" name=\"l-23\"></a><span class=\"linenos\">23</span><span class=\"w\">    </span><span class=\"na\">Adafruit GFX Library</span></div>\n<div class=\"line\"><a id=\"l-24\" name=\"l-24\"></a><span class=\"linenos\">24</span><span class=\"w\">    </span><span class=\"na\">Adafruit SSD1306</span></div>\n<div class=\"line\"><a id=\"l-25\" name=\"l-25\"></a><span class=\"linenos\">25</span><span class=\"w\">    </span><span class=\"na\">Adafruit ADXL343</span></div>\n<div class=\"line\"><a id=\"l-26\" name=\"l-26\"></a><span class=\"linenos\">26</span><span class=\"w\">    </span><span class=\"na\">Adafruit STMPE610</span></div>\n<div class=\"line\"><a id=\"l-27\" name=\"l-27\"></a><span class=\"linenos\">27</span><span class=\"w\">    </span><span class=\"na\">Adafruit TouchScreen</span></div>\n<div class=\"line\"><a id=\"l-28\" name=\"l-28\"></a><span class=\"linenos\">28</span><span class=\"w\">    </span><span class=\"na\">Adafruit ILI9341</span></div>\n<div class=\"line\"><a id=\"l-29\" name=\"l-29\"></a><span class=\"linenos\">29</span><span class=\"na\">build_flags</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-30\" name=\"l-30\"></a><span class=\"linenos\">30</span><span class=\"w\">    </span><span class=\"na\">-DSDI12_EXTERNAL_PCINT</span></div>\n<div class=\"line\"><a id=\"l-31\" name=\"l-31\"></a><span class=\"linenos\">31</span><span class=\"na\">lib_deps</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-32\" name=\"l-32\"></a><span class=\"linenos\">32</span><span class=\"w\">    </span><span class=\"na\">envirodiy/EnviroDIY_ModularSensors</span></div>\n<div class=\"line\"><a id=\"l-33\" name=\"l-33\"></a><span class=\"linenos\">33</span><span class=\"c1\">;  ^^ Use this when working from an official release of the library</span></div>\n<div class=\"line\"><a id=\"l-34\" name=\"l-34\"></a><span class=\"linenos\">34</span><span class=\"c1\">;    https://github.com/EnviroDIY/ModularSensors.git#develop</span></div>\n<div class=\"line\"><a id=\"l-35\" name=\"l-35\"></a><span class=\"linenos\">35</span><span class=\"c1\">;  ^^ Use this when if you want to pull from the develop branch</span>\n</div></div></div></section><section id=\"example_drwi_ediylte_code\"><h2>The Complete Code</h2><div class=\"m-code-arduino\"><div class=\"highlight\"><div class=\"line\"><a id=\"l-1\" name=\"l-1\"></a><span class=\"linenos\">  1</span><span class=\"cm\">/** =========================================================================</span></div>\n<div class=\"line\"><a id=\"l-2\" name=\"l-2\"></a><span class=\"linenos\">  2</span><span class=\"cm\"> * @example{lineno} DRWI_SIM7080LTE.ino</span></div>\n<div class=\"line\"><a id=\"l-3\" name=\"l-3\"></a><span class=\"linenos\">  3</span><span class=\"cm\"> * @copyright Stroud Water Research Center</span></div>\n<div class=\"line\"><a id=\"l-4\" name=\"l-4\"></a><span class=\"linenos\">  4</span><span class=\"cm\"> * @license This example is published under the BSD-3 license.</span></div>\n<div class=\"line\"><a id=\"l-5\" name=\"l-5\"></a><span class=\"linenos\">  5</span><span class=\"cm\"> * @author Sara Geleskie Damiano &lt;sdamiano@stroudcenter.org&gt;</span></div>\n<div class=\"line\"><a id=\"l-6\" name=\"l-6\"></a><span class=\"linenos\">  6</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-7\" name=\"l-7\"></a><span class=\"linenos\">  7</span><span class=\"cm\"> * @brief Example for DRWI CitSci LTE sites.</span></div>\n<div class=\"line\"><a id=\"l-8\" name=\"l-8\"></a><span class=\"linenos\">  8</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-9\" name=\"l-9\"></a><span class=\"linenos\">  9</span><span class=\"cm\"> * This example shows proper settings for the following configuration:</span></div>\n<div class=\"line\"><a id=\"l-10\" name=\"l-10\"></a><span class=\"linenos\"> 10</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-11\" name=\"l-11\"></a><span class=\"linenos\"> 11</span><span class=\"cm\"> * Mayfly v1.0 board</span></div>\n<div class=\"line\"><a id=\"l-12\" name=\"l-12\"></a><span class=\"linenos\"> 12</span><span class=\"cm\"> * EnviroDIY SIM7080 LTE module (with Hologram SIM card)</span></div>\n<div class=\"line\"><a id=\"l-13\" name=\"l-13\"></a><span class=\"linenos\"> 13</span><span class=\"cm\"> * Hydros21 CTD sensor</span></div>\n<div class=\"line\"><a id=\"l-14\" name=\"l-14\"></a><span class=\"linenos\"> 14</span><span class=\"cm\"> * Campbell Scientific OBS3+ Turbidity sensor</span></div>\n<div class=\"line\"><a id=\"l-15\" name=\"l-15\"></a><span class=\"linenos\"> 15</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-16\" name=\"l-16\"></a><span class=\"linenos\"> 16</span><span class=\"cm\"> * See [the walkthrough page](@ref example_drwi_ediylte) for detailed</span></div>\n<div class=\"line\"><a id=\"l-17\" name=\"l-17\"></a><span class=\"linenos\"> 17</span><span class=\"cm\"> * instructions.</span></div>\n<div class=\"line\"><a id=\"l-18\" name=\"l-18\"></a><span class=\"linenos\"> 18</span><span class=\"cm\"> *</span></div>\n<div class=\"line\"><a id=\"l-19\" name=\"l-19\"></a><span class=\"linenos\"> 19</span><span class=\"cm\"> * @m_examplenavigation{example_drwi_ediylte,}</span></div>\n<div class=\"line\"><a id=\"l-20\" name=\"l-20\"></a><span class=\"linenos\"> 20</span><span class=\"cm\"> * ======================================================================= */</span></div>\n<div class=\"line\"><a id=\"l-21\" name=\"l-21\"></a><span class=\"linenos\"> 21</span></div>\n<div class=\"line\"><a id=\"l-22\" name=\"l-22\"></a><span class=\"linenos\"> 22</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-23\" name=\"l-23\"></a><span class=\"linenos\"> 23</span><span class=\"c1\">//  Defines for TinyGSM</span></div>\n<div class=\"line\"><a id=\"l-24\" name=\"l-24\"></a><span class=\"linenos\"> 24</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-25\" name=\"l-25\"></a><span class=\"linenos\"> 25</span><span class=\"cm\">/** Start [defines] */</span></div>\n<div class=\"line\"><a id=\"l-26\" name=\"l-26\"></a><span class=\"linenos\"> 26</span><span class=\"cp\">#ifndef TINY_GSM_RX_BUFFER</span></div>\n<div class=\"line\"><a id=\"l-27\" name=\"l-27\"></a><span class=\"linenos\"> 27</span><span class=\"cp\">#define TINY_GSM_RX_BUFFER 64</span></div>\n<div class=\"line\"><a id=\"l-28\" name=\"l-28\"></a><span class=\"linenos\"> 28</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-29\" name=\"l-29\"></a><span class=\"linenos\"> 29</span><span class=\"cp\">#ifndef TINY_GSM_YIELD_MS</span></div>\n<div class=\"line\"><a id=\"l-30\" name=\"l-30\"></a><span class=\"linenos\"> 30</span><span class=\"cp\">#define TINY_GSM_YIELD_MS 2</span></div>\n<div class=\"line\"><a id=\"l-31\" name=\"l-31\"></a><span class=\"linenos\"> 31</span><span class=\"cp\">#endif</span></div>\n<div class=\"line\"><a id=\"l-32\" name=\"l-32\"></a><span class=\"linenos\"> 32</span><span class=\"cm\">/** End [defines] */</span></div>\n<div class=\"line\"><a id=\"l-33\" name=\"l-33\"></a><span class=\"linenos\"> 33</span></div>\n<div class=\"line\"><a id=\"l-34\" name=\"l-34\"></a><span class=\"linenos\"> 34</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-35\" name=\"l-35\"></a><span class=\"linenos\"> 35</span><span class=\"c1\">//  Include the libraries required for any data logger</span></div>\n<div class=\"line\"><a id=\"l-36\" name=\"l-36\"></a><span class=\"linenos\"> 36</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-37\" name=\"l-37\"></a><span class=\"linenos\"> 37</span><span class=\"cm\">/** Start [includes] */</span></div>\n<div class=\"line\"><a id=\"l-38\" name=\"l-38\"></a><span class=\"linenos\"> 38</span><span class=\"c1\">// The Arduino library is needed for every Arduino program.</span></div>\n<div class=\"line\"><a id=\"l-39\" name=\"l-39\"></a><span class=\"linenos\"> 39</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;Arduino.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-40\" name=\"l-40\"></a><span class=\"linenos\"> 40</span></div>\n<div class=\"line\"><a id=\"l-41\" name=\"l-41\"></a><span class=\"linenos\"> 41</span><span class=\"c1\">// Include the main header for ModularSensors</span></div>\n<div class=\"line\"><a id=\"l-42\" name=\"l-42\"></a><span class=\"linenos\"> 42</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;ModularSensors.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-43\" name=\"l-43\"></a><span class=\"linenos\"> 43</span><span class=\"cm\">/** End [includes] */</span></div>\n<div class=\"line\"><a id=\"l-44\" name=\"l-44\"></a><span class=\"linenos\"> 44</span></div>\n<div class=\"line\"><a id=\"l-45\" name=\"l-45\"></a><span class=\"linenos\"> 45</span></div>\n<div class=\"line\"><a id=\"l-46\" name=\"l-46\"></a><span class=\"linenos\"> 46</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-47\" name=\"l-47\"></a><span class=\"linenos\"> 47</span><span class=\"c1\">//  Data Logging Options</span></div>\n<div class=\"line\"><a id=\"l-48\" name=\"l-48\"></a><span class=\"linenos\"> 48</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-49\" name=\"l-49\"></a><span class=\"linenos\"> 49</span><span class=\"cm\">/** Start [logging_options] */</span></div>\n<div class=\"line\"><a id=\"l-50\" name=\"l-50\"></a><span class=\"linenos\"> 50</span><span class=\"c1\">// The name of this program file</span></div>\n<div class=\"line\"><a id=\"l-51\" name=\"l-51\"></a><span class=\"linenos\"> 51</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">sketchName</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;DRWI_SIM7080LTE.ino&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-52\" name=\"l-52\"></a><span class=\"linenos\"> 52</span><span class=\"c1\">// Logger ID, also becomes the prefix for the name of the data file on SD card</span></div>\n<div class=\"line\"><a id=\"l-53\" name=\"l-53\"></a><span class=\"linenos\"> 53</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">LoggerID</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;XXXXX&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-54\" name=\"l-54\"></a><span class=\"linenos\"> 54</span><span class=\"c1\">// How frequently (in minutes) to log data</span></div>\n<div class=\"line\"><a id=\"l-55\" name=\"l-55\"></a><span class=\"linenos\"> 55</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">loggingInterval</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-56\" name=\"l-56\"></a><span class=\"linenos\"> 56</span><span class=\"c1\">// Your logger&#39;s timezone.</span></div>\n<div class=\"line\"><a id=\"l-57\" name=\"l-57\"></a><span class=\"linenos\"> 57</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">timeZone</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">-5</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Eastern Standard Time</span></div>\n<div class=\"line\"><a id=\"l-58\" name=\"l-58\"></a><span class=\"linenos\"> 58</span><span class=\"c1\">// NOTE:  Daylight savings time will not be applied!  Please use standard time!</span></div>\n<div class=\"line\"><a id=\"l-59\" name=\"l-59\"></a><span class=\"linenos\"> 59</span></div>\n<div class=\"line\"><a id=\"l-60\" name=\"l-60\"></a><span class=\"linenos\"> 60</span><span class=\"c1\">// Set the input and output pins for the logger</span></div>\n<div class=\"line\"><a id=\"l-61\" name=\"l-61\"></a><span class=\"linenos\"> 61</span><span class=\"c1\">// NOTE:  Use -1 for pins that do not apply</span></div>\n<div class=\"line\"><a id=\"l-62\" name=\"l-62\"></a><span class=\"linenos\"> 62</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int32_t</span><span class=\"w\"> </span><span class=\"n\">serialBaud</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">57600</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Baud rate for debugging</span></div>\n<div class=\"line\"><a id=\"l-63\" name=\"l-63\"></a><span class=\"linenos\"> 63</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">greenLED</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"p\">;</span><span class=\"w\">      </span><span class=\"c1\">// Pin for the green LED</span></div>\n<div class=\"line\"><a id=\"l-64\" name=\"l-64\"></a><span class=\"linenos\"> 64</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">redLED</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"p\">;</span><span class=\"w\">      </span><span class=\"c1\">// Pin for the red LED</span></div>\n<div class=\"line\"><a id=\"l-65\" name=\"l-65\"></a><span class=\"linenos\"> 65</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">buttonPin</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"p\">;</span><span class=\"w\">     </span><span class=\"c1\">// Pin for debugging mode (ie, button pin)</span></div>\n<div class=\"line\"><a id=\"l-66\" name=\"l-66\"></a><span class=\"linenos\"> 66</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">wakePin</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"p\">;</span><span class=\"w\">     </span><span class=\"c1\">// MCU interrupt/alarm pin to wake from sleep</span></div>\n<div class=\"line\"><a id=\"l-67\" name=\"l-67\"></a><span class=\"linenos\"> 67</span><span class=\"c1\">// Mayfly 0.x D31 = A7</span></div>\n<div class=\"line\"><a id=\"l-68\" name=\"l-68\"></a><span class=\"linenos\"> 68</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">sdCardPwrPin</span><span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">-1</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// MCU SD card power pin</span></div>\n<div class=\"line\"><a id=\"l-69\" name=\"l-69\"></a><span class=\"linenos\"> 69</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">sdCardSSPin</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// SD card chip select/slave select pin</span></div>\n<div class=\"line\"><a id=\"l-70\" name=\"l-70\"></a><span class=\"linenos\"> 70</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">sensorPowerPin</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// MCU pin controlling main sensor power</span></div>\n<div class=\"line\"><a id=\"l-71\" name=\"l-71\"></a><span class=\"linenos\"> 71</span><span class=\"cm\">/** End [logging_options] */</span></div>\n<div class=\"line\"><a id=\"l-72\" name=\"l-72\"></a><span class=\"linenos\"> 72</span></div>\n<div class=\"line\"><a id=\"l-73\" name=\"l-73\"></a><span class=\"linenos\"> 73</span></div>\n<div class=\"line\"><a id=\"l-74\" name=\"l-74\"></a><span class=\"linenos\"> 74</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-75\" name=\"l-75\"></a><span class=\"linenos\"> 75</span><span class=\"c1\">//  Wifi/Cellular Modem Options</span></div>\n<div class=\"line\"><a id=\"l-76\" name=\"l-76\"></a><span class=\"linenos\"> 76</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-77\" name=\"l-77\"></a><span class=\"linenos\"> 77</span><span class=\"cm\">/** Start [sim_com_sim7080] */</span></div>\n<div class=\"line\"><a id=\"l-78\" name=\"l-78\"></a><span class=\"linenos\"> 78</span><span class=\"c1\">// For almost anything based on the SIMCom SIM7080G</span></div>\n<div class=\"line\"><a id=\"l-79\" name=\"l-79\"></a><span class=\"linenos\"> 79</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;modems/SIMComSIM7080.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-80\" name=\"l-80\"></a><span class=\"linenos\"> 80</span></div>\n<div class=\"line\"><a id=\"l-81\" name=\"l-81\"></a><span class=\"linenos\"> 81</span><span class=\"c1\">// Create a reference to the serial port for the modem</span></div>\n<div class=\"line\"><a id=\"l-82\" name=\"l-82\"></a><span class=\"linenos\"> 82</span><span class=\"n\">HardwareSerial</span><span class=\"o\">&amp;</span><span class=\"w\"> </span><span class=\"n\">modemSerial</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Serial1</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Use hardware serial if possible</span></div>\n<div class=\"line\"><a id=\"l-83\" name=\"l-83\"></a><span class=\"linenos\"> 83</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int32_t</span><span class=\"w\">   </span><span class=\"n\">modemBaud</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">9600</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">//  SIM7080 does auto-bauding by default, but</span></div>\n<div class=\"line\"><a id=\"l-84\" name=\"l-84\"></a><span class=\"linenos\"> 84</span><span class=\"w\">                                   </span><span class=\"c1\">//  for simplicity we set to 9600</span></div>\n<div class=\"line\"><a id=\"l-85\" name=\"l-85\"></a><span class=\"linenos\"> 85</span></div>\n<div class=\"line\"><a id=\"l-86\" name=\"l-86\"></a><span class=\"linenos\"> 86</span><span class=\"c1\">// Modem Pins - Describe the physical pin connection of your modem to your board</span></div>\n<div class=\"line\"><a id=\"l-87\" name=\"l-87\"></a><span class=\"linenos\"> 87</span><span class=\"c1\">// NOTE:  Use -1 for pins that do not apply</span></div>\n<div class=\"line\"><a id=\"l-88\" name=\"l-88\"></a><span class=\"linenos\"> 88</span></div>\n<div class=\"line\"><a id=\"l-89\" name=\"l-89\"></a><span class=\"linenos\"> 89</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">modemVccPin</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-90\" name=\"l-90\"></a><span class=\"linenos\"> 90</span><span class=\"c1\">// MCU pin controlling modem power --- Pin 18 is the power enable pin for the</span></div>\n<div class=\"line\"><a id=\"l-91\" name=\"l-91\"></a><span class=\"linenos\"> 91</span><span class=\"c1\">// bee socket on Mayfly v1.0, use -1 if using Mayfly 0.5b or if the bee socket</span></div>\n<div class=\"line\"><a id=\"l-92\" name=\"l-92\"></a><span class=\"linenos\"> 92</span><span class=\"c1\">// is constantly powered (ie you changed SJ18 on Mayfly 1.x to 3.3v)</span></div>\n<div class=\"line\"><a id=\"l-93\" name=\"l-93\"></a><span class=\"linenos\"> 93</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">modemStatusPin</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// MCU pin used to read modem status</span></div>\n<div class=\"line\"><a id=\"l-94\" name=\"l-94\"></a><span class=\"linenos\"> 94</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">modemSleepRqPin</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// MCU pin for modem sleep/wake request</span></div>\n<div class=\"line\"><a id=\"l-95\" name=\"l-95\"></a><span class=\"linenos\"> 95</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">modemLEDPin</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">redLED</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// MCU pin connected an LED to show modem</span></div>\n<div class=\"line\"><a id=\"l-96\" name=\"l-96\"></a><span class=\"linenos\"> 96</span><span class=\"w\">                                    </span><span class=\"c1\">// status</span></div>\n<div class=\"line\"><a id=\"l-97\" name=\"l-97\"></a><span class=\"linenos\"> 97</span></div>\n<div class=\"line\"><a id=\"l-98\" name=\"l-98\"></a><span class=\"linenos\"> 98</span><span class=\"c1\">// Network connection information</span></div>\n<div class=\"line\"><a id=\"l-99\" name=\"l-99\"></a><span class=\"linenos\"> 99</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">apn</span><span class=\"w\"> </span><span class=\"o\">=</span></div>\n<div class=\"line\"><a id=\"l-100\" name=\"l-100\"></a><span class=\"linenos\">100</span><span class=\"w\">    </span><span class=\"s\">&quot;hologram&quot;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// APN connection name, typically Hologram unless you have a</span></div>\n<div class=\"line\"><a id=\"l-101\" name=\"l-101\"></a><span class=\"linenos\">101</span><span class=\"w\">                 </span><span class=\"c1\">// different provider&#39;s SIM card. Change as needed</span></div>\n<div class=\"line\"><a id=\"l-102\" name=\"l-102\"></a><span class=\"linenos\">102</span></div>\n<div class=\"line\"><a id=\"l-103\" name=\"l-103\"></a><span class=\"linenos\">103</span><span class=\"c1\">// Create the modem object</span></div>\n<div class=\"line\"><a id=\"l-104\" name=\"l-104\"></a><span class=\"linenos\">104</span><span class=\"n\">SIMComSIM7080</span><span class=\"w\"> </span><span class=\"nf\">modem7080</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">modemSerial</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">modemVccPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">modemStatusPin</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-105\" name=\"l-105\"></a><span class=\"linenos\">105</span><span class=\"w\">                        </span><span class=\"n\">modemSleepRqPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">apn</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-106\" name=\"l-106\"></a><span class=\"linenos\">106</span><span class=\"c1\">// Create an extra reference to the modem by a generic name</span></div>\n<div class=\"line\"><a id=\"l-107\" name=\"l-107\"></a><span class=\"linenos\">107</span><span class=\"n\">SIMComSIM7080</span><span class=\"w\"> </span><span class=\"n\">modem</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">modem7080</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-108\" name=\"l-108\"></a><span class=\"linenos\">108</span><span class=\"cm\">/** End [sim_com_sim7080] */</span></div>\n<div class=\"line\"><a id=\"l-109\" name=\"l-109\"></a><span class=\"linenos\">109</span></div>\n<div class=\"line\"><a id=\"l-110\" name=\"l-110\"></a><span class=\"linenos\">110</span></div>\n<div class=\"line\"><a id=\"l-111\" name=\"l-111\"></a><span class=\"linenos\">111</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-112\" name=\"l-112\"></a><span class=\"linenos\">112</span><span class=\"c1\">//  Using the Processor as a Sensor</span></div>\n<div class=\"line\"><a id=\"l-113\" name=\"l-113\"></a><span class=\"linenos\">113</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-114\" name=\"l-114\"></a><span class=\"linenos\">114</span><span class=\"cm\">/** Start [processor_sensor] */</span></div>\n<div class=\"line\"><a id=\"l-115\" name=\"l-115\"></a><span class=\"linenos\">115</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;sensors/ProcessorStats.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-116\" name=\"l-116\"></a><span class=\"linenos\">116</span></div>\n<div class=\"line\"><a id=\"l-117\" name=\"l-117\"></a><span class=\"linenos\">117</span><span class=\"c1\">// Create the main processor chip &quot;sensor&quot; - for general metadata</span></div>\n<div class=\"line\"><a id=\"l-118\" name=\"l-118\"></a><span class=\"linenos\">118</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\">    </span><span class=\"n\">mcuBoardVersion</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;v1.1&quot;</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-119\" name=\"l-119\"></a><span class=\"linenos\">119</span><span class=\"n\">ProcessorStats</span><span class=\"w\"> </span><span class=\"nf\">mcuBoard</span><span class=\"p\">(</span><span class=\"n\">mcuBoardVersion</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-120\" name=\"l-120\"></a><span class=\"linenos\">120</span><span class=\"cm\">/** End [processor_sensor] */</span></div>\n<div class=\"line\"><a id=\"l-121\" name=\"l-121\"></a><span class=\"linenos\">121</span></div>\n<div class=\"line\"><a id=\"l-122\" name=\"l-122\"></a><span class=\"linenos\">122</span></div>\n<div class=\"line\"><a id=\"l-123\" name=\"l-123\"></a><span class=\"linenos\">123</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-124\" name=\"l-124\"></a><span class=\"linenos\">124</span><span class=\"c1\">//  Maxim DS3231 RTC (Real Time Clock)</span></div>\n<div class=\"line\"><a id=\"l-125\" name=\"l-125\"></a><span class=\"linenos\">125</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-126\" name=\"l-126\"></a><span class=\"linenos\">126</span><span class=\"cm\">/** Start [ds3231] */</span></div>\n<div class=\"line\"><a id=\"l-127\" name=\"l-127\"></a><span class=\"linenos\">127</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;sensors/MaximDS3231.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-128\" name=\"l-128\"></a><span class=\"linenos\">128</span></div>\n<div class=\"line\"><a id=\"l-129\" name=\"l-129\"></a><span class=\"linenos\">129</span><span class=\"c1\">// Create a DS3231 sensor object</span></div>\n<div class=\"line\"><a id=\"l-130\" name=\"l-130\"></a><span class=\"linenos\">130</span><span class=\"n\">MaximDS3231</span><span class=\"w\"> </span><span class=\"nf\">ds3231</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-131\" name=\"l-131\"></a><span class=\"linenos\">131</span><span class=\"cm\">/** End [ds3231] */</span></div>\n<div class=\"line\"><a id=\"l-132\" name=\"l-132\"></a><span class=\"linenos\">132</span></div>\n<div class=\"line\"><a id=\"l-133\" name=\"l-133\"></a><span class=\"linenos\">133</span></div>\n<div class=\"line\"><a id=\"l-134\" name=\"l-134\"></a><span class=\"linenos\">134</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-135\" name=\"l-135\"></a><span class=\"linenos\">135</span><span class=\"c1\">//  Meter Hydros 21 Conductivity, Temperature, and Depth Sensor</span></div>\n<div class=\"line\"><a id=\"l-136\" name=\"l-136\"></a><span class=\"linenos\">136</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-137\" name=\"l-137\"></a><span class=\"linenos\">137</span><span class=\"cm\">/** Start [hydros21] */</span></div>\n<div class=\"line\"><a id=\"l-138\" name=\"l-138\"></a><span class=\"linenos\">138</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;sensors/MeterHydros21.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-139\" name=\"l-139\"></a><span class=\"linenos\">139</span></div>\n<div class=\"line\"><a id=\"l-140\" name=\"l-140\"></a><span class=\"linenos\">140</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\">   </span><span class=\"n\">hydrosSDI12address</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;1&quot;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// The SDI-12 Address of the Hydros 21</span></div>\n<div class=\"line\"><a id=\"l-141\" name=\"l-141\"></a><span class=\"linenos\">141</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">hydrosNumberReadings</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// The number of readings to average</span></div>\n<div class=\"line\"><a id=\"l-142\" name=\"l-142\"></a><span class=\"linenos\">142</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">SDI12Power</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sensorPowerPin</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Power pin (-1 if unconnected)</span></div>\n<div class=\"line\"><a id=\"l-143\" name=\"l-143\"></a><span class=\"linenos\">143</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">SDI12Data</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"p\">;</span><span class=\"w\">               </span><span class=\"c1\">// The SDI12 data pin</span></div>\n<div class=\"line\"><a id=\"l-144\" name=\"l-144\"></a><span class=\"linenos\">144</span></div>\n<div class=\"line\"><a id=\"l-145\" name=\"l-145\"></a><span class=\"linenos\">145</span><span class=\"c1\">// Create a Meter Hydros 21 sensor object</span></div>\n<div class=\"line\"><a id=\"l-146\" name=\"l-146\"></a><span class=\"linenos\">146</span><span class=\"n\">MeterHydros21</span><span class=\"w\"> </span><span class=\"nf\">hydros</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">hydrosSDI12address</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">SDI12Power</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">SDI12Data</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-147\" name=\"l-147\"></a><span class=\"linenos\">147</span><span class=\"w\">                     </span><span class=\"n\">hydrosNumberReadings</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-148\" name=\"l-148\"></a><span class=\"linenos\">148</span><span class=\"cm\">/** End [hydros21] */</span></div>\n<div class=\"line\"><a id=\"l-149\" name=\"l-149\"></a><span class=\"linenos\">149</span></div>\n<div class=\"line\"><a id=\"l-150\" name=\"l-150\"></a><span class=\"linenos\">150</span></div>\n<div class=\"line\"><a id=\"l-151\" name=\"l-151\"></a><span class=\"linenos\">151</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-152\" name=\"l-152\"></a><span class=\"linenos\">152</span><span class=\"c1\">//  Campbell OBS 3 / OBS 3+ Analog Turbidity Sensor</span></div>\n<div class=\"line\"><a id=\"l-153\" name=\"l-153\"></a><span class=\"linenos\">153</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-154\" name=\"l-154\"></a><span class=\"linenos\">154</span><span class=\"cm\">/** Start [obs3] */</span></div>\n<div class=\"line\"><a id=\"l-155\" name=\"l-155\"></a><span class=\"linenos\">155</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;sensors/CampbellOBS3.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-156\" name=\"l-156\"></a><span class=\"linenos\">156</span></div>\n<div class=\"line\"><a id=\"l-157\" name=\"l-157\"></a><span class=\"linenos\">157</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\">  </span><span class=\"n\">OBS3Power</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">sensorPowerPin</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Power pin (-1 if unconnected)</span></div>\n<div class=\"line\"><a id=\"l-158\" name=\"l-158\"></a><span class=\"linenos\">158</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">OBS3NumberReadings</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"p\">;</span></div>\n<div class=\"line\"><a id=\"l-159\" name=\"l-159\"></a><span class=\"linenos\">159</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">ADSi2c_addr</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x48</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// The I2C address of the ADS1115 ADC</span></div>\n<div class=\"line\"><a id=\"l-160\" name=\"l-160\"></a><span class=\"linenos\">160</span><span class=\"c1\">// Campbell OBS 3+ *Low* Range Calibration in Volts</span></div>\n<div class=\"line\"><a id=\"l-161\" name=\"l-161\"></a><span class=\"linenos\">161</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">OBSLowADSChannel</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// ADS channel for *low* range output</span></div>\n<div class=\"line\"><a id=\"l-162\" name=\"l-162\"></a><span class=\"linenos\">162</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">OBSLow_A</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.000E+00</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// &quot;A&quot; value (X^2) [*low* range]</span></div>\n<div class=\"line\"><a id=\"l-163\" name=\"l-163\"></a><span class=\"linenos\">163</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">OBSLow_B</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">1.000E+00</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// &quot;B&quot; value (X) [*low* range]</span></div>\n<div class=\"line\"><a id=\"l-164\" name=\"l-164\"></a><span class=\"linenos\">164</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">OBSLow_C</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.000E+00</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// &quot;C&quot; value [*low* range]</span></div>\n<div class=\"line\"><a id=\"l-165\" name=\"l-165\"></a><span class=\"linenos\">165</span></div>\n<div class=\"line\"><a id=\"l-166\" name=\"l-166\"></a><span class=\"linenos\">166</span><span class=\"c1\">// Create a Campbell OBS3+ *low* range sensor object</span></div>\n<div class=\"line\"><a id=\"l-167\" name=\"l-167\"></a><span class=\"linenos\">167</span><span class=\"n\">CampbellOBS3</span><span class=\"w\"> </span><span class=\"nf\">osb3low</span><span class=\"p\">(</span><span class=\"n\">OBS3Power</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSLowADSChannel</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSLow_A</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSLow_B</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSLow_C</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-168\" name=\"l-168\"></a><span class=\"linenos\">168</span><span class=\"w\">                     </span><span class=\"n\">ADSi2c_addr</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBS3NumberReadings</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-169\" name=\"l-169\"></a><span class=\"linenos\">169</span></div>\n<div class=\"line\"><a id=\"l-170\" name=\"l-170\"></a><span class=\"linenos\">170</span></div>\n<div class=\"line\"><a id=\"l-171\" name=\"l-171\"></a><span class=\"linenos\">171</span><span class=\"c1\">// Campbell OBS 3+ *High* Range Calibration in Volts</span></div>\n<div class=\"line\"><a id=\"l-172\" name=\"l-172\"></a><span class=\"linenos\">172</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">int8_t</span><span class=\"w\"> </span><span class=\"n\">OBSHighADSChannel</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// ADS channel for *high* range output</span></div>\n<div class=\"line\"><a id=\"l-173\" name=\"l-173\"></a><span class=\"linenos\">173</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">OBSHigh_A</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.000E+00</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// &quot;A&quot; value (X^2) [*high* range]</span></div>\n<div class=\"line\"><a id=\"l-174\" name=\"l-174\"></a><span class=\"linenos\">174</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">OBSHigh_B</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">1.000E+00</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// &quot;B&quot; value (X) [*high* range]</span></div>\n<div class=\"line\"><a id=\"l-175\" name=\"l-175\"></a><span class=\"linenos\">175</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">float</span><span class=\"w\">  </span><span class=\"n\">OBSHigh_C</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.000E+00</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// &quot;C&quot; value [*high* range]</span></div>\n<div class=\"line\"><a id=\"l-176\" name=\"l-176\"></a><span class=\"linenos\">176</span></div>\n<div class=\"line\"><a id=\"l-177\" name=\"l-177\"></a><span class=\"linenos\">177</span><span class=\"c1\">// Create a Campbell OBS3+ *high* range sensor object</span></div>\n<div class=\"line\"><a id=\"l-178\" name=\"l-178\"></a><span class=\"linenos\">178</span><span class=\"n\">CampbellOBS3</span><span class=\"w\"> </span><span class=\"nf\">osb3high</span><span class=\"p\">(</span><span class=\"n\">OBS3Power</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSHighADSChannel</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSHigh_A</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBSHigh_B</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-179\" name=\"l-179\"></a><span class=\"linenos\">179</span><span class=\"w\">                      </span><span class=\"n\">OBSHigh_C</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">ADSi2c_addr</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">OBS3NumberReadings</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-180\" name=\"l-180\"></a><span class=\"linenos\">180</span><span class=\"cm\">/** End [obs3] */</span></div>\n<div class=\"line\"><a id=\"l-181\" name=\"l-181\"></a><span class=\"linenos\">181</span></div>\n<div class=\"line\"><a id=\"l-182\" name=\"l-182\"></a><span class=\"linenos\">182</span></div>\n<div class=\"line\"><a id=\"l-183\" name=\"l-183\"></a><span class=\"linenos\">183</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-184\" name=\"l-184\"></a><span class=\"linenos\">184</span><span class=\"c1\">//  Creating the Variable Array[s] and Filling with Variable Objects</span></div>\n<div class=\"line\"><a id=\"l-185\" name=\"l-185\"></a><span class=\"linenos\">185</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-186\" name=\"l-186\"></a><span class=\"linenos\">186</span><span class=\"cm\">/** Start [variable_arrays] */</span></div>\n<div class=\"line\"><a id=\"l-187\" name=\"l-187\"></a><span class=\"linenos\">187</span><span class=\"n\">Variable</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">variableList</span><span class=\"p\">[]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-188\" name=\"l-188\"></a><span class=\"linenos\">188</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">MeterHydros21_Cond</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">hydros</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-189\" name=\"l-189\"></a><span class=\"linenos\">189</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">MeterHydros21_Depth</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">hydros</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-190\" name=\"l-190\"></a><span class=\"linenos\">190</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">MeterHydros21_Temp</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">hydros</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-191\" name=\"l-191\"></a><span class=\"linenos\">191</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">CampbellOBS3_Turbidity</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">osb3low</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;TurbLow&quot;</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-192\" name=\"l-192\"></a><span class=\"linenos\">192</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">CampbellOBS3_Turbidity</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">osb3high</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">&quot;TurbHigh&quot;</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-193\" name=\"l-193\"></a><span class=\"linenos\">193</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">ProcessorStats_Battery</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">mcuBoard</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-194\" name=\"l-194\"></a><span class=\"linenos\">194</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">MaximDS3231_Temp</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">ds3231</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-195\" name=\"l-195\"></a><span class=\"linenos\">195</span><span class=\"w\">    </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">Modem_SignalPercent</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">modem</span><span class=\"p\">),</span></div>\n<div class=\"line\"><a id=\"l-196\" name=\"l-196\"></a><span class=\"linenos\">196</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-197\" name=\"l-197\"></a><span class=\"linenos\">197</span></div>\n<div class=\"line\"><a id=\"l-198\" name=\"l-198\"></a><span class=\"linenos\">198</span><span class=\"c1\">// All UUID&#39;s, device registration, and sampling feature information can be</span></div>\n<div class=\"line\"><a id=\"l-199\" name=\"l-199\"></a><span class=\"linenos\">199</span><span class=\"c1\">// pasted directly from Monitor My Watershed.</span></div>\n<div class=\"line\"><a id=\"l-200\" name=\"l-200\"></a><span class=\"linenos\">200</span><span class=\"c1\">// To get the list, click the &quot;View  token UUID list&quot; button on the upper right</span></div>\n<div class=\"line\"><a id=\"l-201\" name=\"l-201\"></a><span class=\"linenos\">201</span><span class=\"c1\">// of the site page.</span></div>\n<div class=\"line\"><a id=\"l-202\" name=\"l-202\"></a><span class=\"linenos\">202</span></div>\n<div class=\"line\"><a id=\"l-203\" name=\"l-203\"></a><span class=\"linenos\">203</span><span class=\"c1\">// *** CAUTION --- CAUTION --- CAUTION --- CAUTION --- CAUTION ***</span></div>\n<div class=\"line\"><a id=\"l-204\" name=\"l-204\"></a><span class=\"linenos\">204</span><span class=\"c1\">// Check the order of your variables in the variable list!!!</span></div>\n<div class=\"line\"><a id=\"l-205\" name=\"l-205\"></a><span class=\"linenos\">205</span><span class=\"c1\">// Be VERY certain that they match the order of your UUID&#39;s!</span></div>\n<div class=\"line\"><a id=\"l-206\" name=\"l-206\"></a><span class=\"linenos\">206</span><span class=\"c1\">// Rearrange the variables in the variable list ABOVE if necessary to match!</span></div>\n<div class=\"line\"><a id=\"l-207\" name=\"l-207\"></a><span class=\"linenos\">207</span><span class=\"c1\">// Do not change the order of the variables in the section below.</span></div>\n<div class=\"line\"><a id=\"l-208\" name=\"l-208\"></a><span class=\"linenos\">208</span><span class=\"c1\">// *** CAUTION --- CAUTION --- CAUTION --- CAUTION --- CAUTION ***</span></div>\n<div class=\"line\"><a id=\"l-209\" name=\"l-209\"></a><span class=\"linenos\">209</span></div>\n<div class=\"line\"><a id=\"l-210\" name=\"l-210\"></a><span class=\"linenos\">210</span><span class=\"c1\">// Replace all of the text in the following section with the UUID array from</span></div>\n<div class=\"line\"><a id=\"l-211\" name=\"l-211\"></a><span class=\"linenos\">211</span><span class=\"c1\">// MonitorMyWatershed</span></div>\n<div class=\"line\"><a id=\"l-212\" name=\"l-212\"></a><span class=\"linenos\">212</span></div>\n<div class=\"line\"><a id=\"l-213\" name=\"l-213\"></a><span class=\"linenos\">213</span><span class=\"cm\">/* clang-format off */</span></div>\n<div class=\"line\"><a id=\"l-214\" name=\"l-214\"></a><span class=\"linenos\">214</span><span class=\"c1\">// ---------------------   Beginning of Token UUID List   ---------------------</span></div>\n<div class=\"line\"><a id=\"l-215\" name=\"l-215\"></a><span class=\"linenos\">215</span></div>\n<div class=\"line\"><a id=\"l-216\" name=\"l-216\"></a><span class=\"linenos\">216</span></div>\n<div class=\"line\"><a id=\"l-217\" name=\"l-217\"></a><span class=\"linenos\">217</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">UUIDs</span><span class=\"p\">[]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\">  </span><span class=\"c1\">// UUID array for device sensors</span></div>\n<div class=\"line\"><a id=\"l-218\" name=\"l-218\"></a><span class=\"linenos\">218</span><span class=\"w\">    </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-219\" name=\"l-219\"></a><span class=\"linenos\">219</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Specific conductance (Meter_Hydros21_Cond)</span></div>\n<div class=\"line\"><a id=\"l-220\" name=\"l-220\"></a><span class=\"linenos\">220</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Water depth (Meter_Hydros21_Depth)</span></div>\n<div class=\"line\"><a id=\"l-221\" name=\"l-221\"></a><span class=\"linenos\">221</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Temperature (Meter_Hydros21_Temp)</span></div>\n<div class=\"line\"><a id=\"l-222\" name=\"l-222\"></a><span class=\"linenos\">222</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Turbidity (Campbell_OBS3_Turb) (Low)</span></div>\n<div class=\"line\"><a id=\"l-223\" name=\"l-223\"></a><span class=\"linenos\">223</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Turbidity (Campbell_OBS3_Turb) (High)</span></div>\n<div class=\"line\"><a id=\"l-224\" name=\"l-224\"></a><span class=\"linenos\">224</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Battery voltage (EnviroDIY_Mayfly_Batt)</span></div>\n<div class=\"line\"><a id=\"l-225\" name=\"l-225\"></a><span class=\"linenos\">225</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Battery voltage (EnviroDIY_Mayfly_Batt)</span></div>\n<div class=\"line\"><a id=\"l-226\" name=\"l-226\"></a><span class=\"linenos\">226</span><span class=\"w\">        </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Percent full scale (EnviroDIY_LTEB_SignalPercent)</span></div>\n<div class=\"line\"><a id=\"l-227\" name=\"l-227\"></a><span class=\"linenos\">227</span><span class=\"p\">};</span></div>\n<div class=\"line\"><a id=\"l-228\" name=\"l-228\"></a><span class=\"linenos\">228</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">registrationToken</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Device registration token</span></div>\n<div class=\"line\"><a id=\"l-229\" name=\"l-229\"></a><span class=\"linenos\">229</span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"kr\">char</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">samplingFeature</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">&quot;12345678-abcd-1234-ef00-1234567890ab&quot;</span><span class=\"p\">;</span><span class=\"w\">  </span><span class=\"c1\">// Sampling feature UUID</span></div>\n<div class=\"line\"><a id=\"l-230\" name=\"l-230\"></a><span class=\"linenos\">230</span></div>\n<div class=\"line\"><a id=\"l-231\" name=\"l-231\"></a><span class=\"linenos\">231</span></div>\n<div class=\"line\"><a id=\"l-232\" name=\"l-232\"></a><span class=\"linenos\">232</span><span class=\"c1\">// -----------------------   End of Token UUID List  -----------------------</span></div>\n<div class=\"line\"><a id=\"l-233\" name=\"l-233\"></a><span class=\"linenos\">233</span><span class=\"cm\">/* clang-format on */</span></div>\n<div class=\"line\"><a id=\"l-234\" name=\"l-234\"></a><span class=\"linenos\">234</span></div>\n<div class=\"line\"><a id=\"l-235\" name=\"l-235\"></a><span class=\"linenos\">235</span><span class=\"c1\">// Count up the number of pointers in the array</span></div>\n<div class=\"line\"><a id=\"l-236\" name=\"l-236\"></a><span class=\"linenos\">236</span><span class=\"kr\">int</span><span class=\"w\"> </span><span class=\"n\">variableCount</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">sizeof</span><span class=\"p\">(</span><span class=\"n\">variableList</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"kr\">sizeof</span><span class=\"p\">(</span><span class=\"n\">variableList</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]);</span></div>\n<div class=\"line\"><a id=\"l-237\" name=\"l-237\"></a><span class=\"linenos\">237</span></div>\n<div class=\"line\"><a id=\"l-238\" name=\"l-238\"></a><span class=\"linenos\">238</span><span class=\"c1\">// Create the VariableArray object</span></div>\n<div class=\"line\"><a id=\"l-239\" name=\"l-239\"></a><span class=\"linenos\">239</span><span class=\"n\">VariableArray</span><span class=\"w\"> </span><span class=\"nf\">varArray</span><span class=\"p\">(</span><span class=\"n\">variableCount</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">variableList</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">UUIDs</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-240\" name=\"l-240\"></a><span class=\"linenos\">240</span><span class=\"cm\">/** End [variable_arrays] */</span></div>\n<div class=\"line\"><a id=\"l-241\" name=\"l-241\"></a><span class=\"linenos\">241</span></div>\n<div class=\"line\"><a id=\"l-242\" name=\"l-242\"></a><span class=\"linenos\">242</span></div>\n<div class=\"line\"><a id=\"l-243\" name=\"l-243\"></a><span class=\"linenos\">243</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-244\" name=\"l-244\"></a><span class=\"linenos\">244</span><span class=\"c1\">//  The Logger Object[s]</span></div>\n<div class=\"line\"><a id=\"l-245\" name=\"l-245\"></a><span class=\"linenos\">245</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-246\" name=\"l-246\"></a><span class=\"linenos\">246</span><span class=\"cm\">/** Start [loggers] */</span></div>\n<div class=\"line\"><a id=\"l-247\" name=\"l-247\"></a><span class=\"linenos\">247</span><span class=\"c1\">// Create a new logger instance</span></div>\n<div class=\"line\"><a id=\"l-248\" name=\"l-248\"></a><span class=\"linenos\">248</span><span class=\"n\">Logger</span><span class=\"w\"> </span><span class=\"nf\">dataLogger</span><span class=\"p\">(</span><span class=\"n\">LoggerID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">loggingInterval</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">varArray</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-249\" name=\"l-249\"></a><span class=\"linenos\">249</span><span class=\"cm\">/** End [loggers] */</span></div>\n<div class=\"line\"><a id=\"l-250\" name=\"l-250\"></a><span class=\"linenos\">250</span></div>\n<div class=\"line\"><a id=\"l-251\" name=\"l-251\"></a><span class=\"linenos\">251</span></div>\n<div class=\"line\"><a id=\"l-252\" name=\"l-252\"></a><span class=\"linenos\">252</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-253\" name=\"l-253\"></a><span class=\"linenos\">253</span><span class=\"c1\">//  Creating Data Publisher[s]</span></div>\n<div class=\"line\"><a id=\"l-254\" name=\"l-254\"></a><span class=\"linenos\">254</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-255\" name=\"l-255\"></a><span class=\"linenos\">255</span><span class=\"cm\">/** Start [publishers] */</span></div>\n<div class=\"line\"><a id=\"l-256\" name=\"l-256\"></a><span class=\"linenos\">256</span><span class=\"c1\">// Create a data publisher for the Monitor My Watershed/EnviroDIY POST endpoint</span></div>\n<div class=\"line\"><a id=\"l-257\" name=\"l-257\"></a><span class=\"linenos\">257</span><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;publishers/EnviroDIYPublisher.h&gt;</span></div>\n<div class=\"line\"><a id=\"l-258\" name=\"l-258\"></a><span class=\"linenos\">258</span><span class=\"n\">EnviroDIYPublisher</span><span class=\"w\"> </span><span class=\"nf\">EnviroDIYPost</span><span class=\"p\">(</span><span class=\"n\">dataLogger</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">registrationToken</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-259\" name=\"l-259\"></a><span class=\"linenos\">259</span><span class=\"w\">                                 </span><span class=\"n\">samplingFeature</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-260\" name=\"l-260\"></a><span class=\"linenos\">260</span><span class=\"cm\">/** End [publishers] */</span></div>\n<div class=\"line\"><a id=\"l-261\" name=\"l-261\"></a><span class=\"linenos\">261</span></div>\n<div class=\"line\"><a id=\"l-262\" name=\"l-262\"></a><span class=\"linenos\">262</span></div>\n<div class=\"line\"><a id=\"l-263\" name=\"l-263\"></a><span class=\"linenos\">263</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-264\" name=\"l-264\"></a><span class=\"linenos\">264</span><span class=\"c1\">//  Working Functions</span></div>\n<div class=\"line\"><a id=\"l-265\" name=\"l-265\"></a><span class=\"linenos\">265</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-266\" name=\"l-266\"></a><span class=\"linenos\">266</span><span class=\"cm\">/** Start [working_functions] */</span></div>\n<div class=\"line\"><a id=\"l-267\" name=\"l-267\"></a><span class=\"linenos\">267</span><span class=\"c1\">// Flashes the LED&#39;s on the primary board</span></div>\n<div class=\"line\"><a id=\"l-268\" name=\"l-268\"></a><span class=\"linenos\">268</span><span class=\"kr\">void</span><span class=\"w\"> </span><span class=\"nf\">greenRedFlash</span><span class=\"p\">(</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">numFlash</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">rate</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-269\" name=\"l-269\"></a><span class=\"linenos\">269</span><span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kr\">uint8_t</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">numFlash</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-270\" name=\"l-270\"></a><span class=\"linenos\">270</span><span class=\"w\">        </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">greenLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">HIGH</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-271\" name=\"l-271\"></a><span class=\"linenos\">271</span><span class=\"w\">        </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">redLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">LOW</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-272\" name=\"l-272\"></a><span class=\"linenos\">272</span><span class=\"w\">        </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"n\">rate</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-273\" name=\"l-273\"></a><span class=\"linenos\">273</span><span class=\"w\">        </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">greenLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">LOW</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-274\" name=\"l-274\"></a><span class=\"linenos\">274</span><span class=\"w\">        </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">redLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">HIGH</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-275\" name=\"l-275\"></a><span class=\"linenos\">275</span><span class=\"w\">        </span><span class=\"nf\">delay</span><span class=\"p\">(</span><span class=\"n\">rate</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-276\" name=\"l-276\"></a><span class=\"linenos\">276</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-277\" name=\"l-277\"></a><span class=\"linenos\">277</span><span class=\"w\">    </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">redLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">LOW</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-278\" name=\"l-278\"></a><span class=\"linenos\">278</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-279\" name=\"l-279\"></a><span class=\"linenos\">279</span></div>\n<div class=\"line\"><a id=\"l-280\" name=\"l-280\"></a><span class=\"linenos\">280</span><span class=\"c1\">// Reads the battery voltage</span></div>\n<div class=\"line\"><a id=\"l-281\" name=\"l-281\"></a><span class=\"linenos\">281</span><span class=\"c1\">// NOTE: This will actually return the battery level from the previous update!</span></div>\n<div class=\"line\"><a id=\"l-282\" name=\"l-282\"></a><span class=\"linenos\">282</span><span class=\"kr\">float</span><span class=\"w\"> </span><span class=\"nf\">getBatteryVoltage</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-283\" name=\"l-283\"></a><span class=\"linenos\">283</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">mcuBoard</span><span class=\"p\">.</span><span class=\"n\">sensorValues</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">-9999</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">mcuBoard</span><span class=\"p\">.</span><span class=\"n\">update</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-284\" name=\"l-284\"></a><span class=\"linenos\">284</span><span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">mcuBoard</span><span class=\"p\">.</span><span class=\"n\">sensorValues</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">];</span></div>\n<div class=\"line\"><a id=\"l-285\" name=\"l-285\"></a><span class=\"linenos\">285</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-286\" name=\"l-286\"></a><span class=\"linenos\">286</span></div>\n<div class=\"line\"><a id=\"l-287\" name=\"l-287\"></a><span class=\"linenos\">287</span></div>\n<div class=\"line\"><a id=\"l-288\" name=\"l-288\"></a><span class=\"linenos\">288</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-289\" name=\"l-289\"></a><span class=\"linenos\">289</span><span class=\"c1\">// Arduino Setup Function</span></div>\n<div class=\"line\"><a id=\"l-290\" name=\"l-290\"></a><span class=\"linenos\">290</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-291\" name=\"l-291\"></a><span class=\"linenos\">291</span><span class=\"cm\">/** Start [setup] */</span></div>\n<div class=\"line\"><a id=\"l-292\" name=\"l-292\"></a><span class=\"linenos\">292</span><span class=\"kr\">void</span><span class=\"w\"> </span><span class=\"nb\">setup</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-293\" name=\"l-293\"></a><span class=\"linenos\">293</span><span class=\"w\">    </span><span class=\"c1\">// Start the primary serial connection</span></div>\n<div class=\"line\"><a id=\"l-294\" name=\"l-294\"></a><span class=\"linenos\">294</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">begin</span><span class=\"p\">(</span><span class=\"n\">serialBaud</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-295\" name=\"l-295\"></a><span class=\"linenos\">295</span></div>\n<div class=\"line\"><a id=\"l-296\" name=\"l-296\"></a><span class=\"linenos\">296</span><span class=\"w\">    </span><span class=\"c1\">// Print a start-up note to the first serial port</span></div>\n<div class=\"line\"><a id=\"l-297\" name=\"l-297\"></a><span class=\"linenos\">297</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;Now running &quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-298\" name=\"l-298\"></a><span class=\"linenos\">298</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">sketchName</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-299\" name=\"l-299\"></a><span class=\"linenos\">299</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot; on Logger &quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-300\" name=\"l-300\"></a><span class=\"linenos\">300</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">LoggerID</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-301\" name=\"l-301\"></a><span class=\"linenos\">301</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-302\" name=\"l-302\"></a><span class=\"linenos\">302</span></div>\n<div class=\"line\"><a id=\"l-303\" name=\"l-303\"></a><span class=\"linenos\">303</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;Using ModularSensors Library version &quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-304\" name=\"l-304\"></a><span class=\"linenos\">304</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">MODULAR_SENSORS_VERSION</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-305\" name=\"l-305\"></a><span class=\"linenos\">305</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">print</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;TinyGSM Library version &quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-306\" name=\"l-306\"></a><span class=\"linenos\">306</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">TINYGSM_VERSION</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-307\" name=\"l-307\"></a><span class=\"linenos\">307</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-308\" name=\"l-308\"></a><span class=\"linenos\">308</span></div>\n<div class=\"line\"><a id=\"l-309\" name=\"l-309\"></a><span class=\"linenos\">309</span><span class=\"w\">    </span><span class=\"c1\">// Start the serial connection with the modem</span></div>\n<div class=\"line\"><a id=\"l-310\" name=\"l-310\"></a><span class=\"linenos\">310</span><span class=\"w\">    </span><span class=\"n\">modemSerial</span><span class=\"p\">.</span><span class=\"nf\">begin</span><span class=\"p\">(</span><span class=\"n\">modemBaud</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-311\" name=\"l-311\"></a><span class=\"linenos\">311</span></div>\n<div class=\"line\"><a id=\"l-312\" name=\"l-312\"></a><span class=\"linenos\">312</span><span class=\"w\">    </span><span class=\"c1\">// Set up pins for the LED&#39;s</span></div>\n<div class=\"line\"><a id=\"l-313\" name=\"l-313\"></a><span class=\"linenos\">313</span><span class=\"w\">    </span><span class=\"nf\">pinMode</span><span class=\"p\">(</span><span class=\"n\">greenLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">OUTPUT</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-314\" name=\"l-314\"></a><span class=\"linenos\">314</span><span class=\"w\">    </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">greenLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">LOW</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-315\" name=\"l-315\"></a><span class=\"linenos\">315</span><span class=\"w\">    </span><span class=\"nf\">pinMode</span><span class=\"p\">(</span><span class=\"n\">redLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">OUTPUT</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-316\" name=\"l-316\"></a><span class=\"linenos\">316</span><span class=\"w\">    </span><span class=\"nf\">digitalWrite</span><span class=\"p\">(</span><span class=\"n\">redLED</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">LOW</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-317\" name=\"l-317\"></a><span class=\"linenos\">317</span><span class=\"w\">    </span><span class=\"c1\">// Blink the LEDs to show the board is on and starting up</span></div>\n<div class=\"line\"><a id=\"l-318\" name=\"l-318\"></a><span class=\"linenos\">318</span><span class=\"w\">    </span><span class=\"n\">greenRedFlash</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-319\" name=\"l-319\"></a><span class=\"linenos\">319</span></div>\n<div class=\"line\"><a id=\"l-320\" name=\"l-320\"></a><span class=\"linenos\">320</span><span class=\"w\">    </span><span class=\"nf\">pinMode</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">OUTPUT</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// for proper operation of the onboard flash memory</span></div>\n<div class=\"line\"><a id=\"l-321\" name=\"l-321\"></a><span class=\"linenos\">321</span><span class=\"w\">                          </span><span class=\"c1\">// chip&#39;s ChipSelect (Mayfly v1.0 and later)</span></div>\n<div class=\"line\"><a id=\"l-322\" name=\"l-322\"></a><span class=\"linenos\">322</span></div>\n<div class=\"line\"><a id=\"l-323\" name=\"l-323\"></a><span class=\"linenos\">323</span><span class=\"w\">    </span><span class=\"c1\">// Set the timezones for the logger/data and the RTC</span></div>\n<div class=\"line\"><a id=\"l-324\" name=\"l-324\"></a><span class=\"linenos\">324</span><span class=\"w\">    </span><span class=\"c1\">// Logging in the given time zone</span></div>\n<div class=\"line\"><a id=\"l-325\" name=\"l-325\"></a><span class=\"linenos\">325</span><span class=\"w\">    </span><span class=\"n\">Logger</span><span class=\"o\">::</span><span class=\"n\">setLoggerTimeZone</span><span class=\"p\">(</span><span class=\"n\">timeZone</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-326\" name=\"l-326\"></a><span class=\"linenos\">326</span><span class=\"w\">    </span><span class=\"c1\">// It is STRONGLY RECOMMENDED that you set the RTC to be in UTC (UTC+0)</span></div>\n<div class=\"line\"><a id=\"l-327\" name=\"l-327\"></a><span class=\"linenos\">327</span><span class=\"w\">    </span><span class=\"n\">loggerClock</span><span class=\"o\">::</span><span class=\"n\">setRTCOffset</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-328\" name=\"l-328\"></a><span class=\"linenos\">328</span></div>\n<div class=\"line\"><a id=\"l-329\" name=\"l-329\"></a><span class=\"linenos\">329</span><span class=\"w\">    </span><span class=\"c1\">// Attach the modem and information pins to the logger</span></div>\n<div class=\"line\"><a id=\"l-330\" name=\"l-330\"></a><span class=\"linenos\">330</span><span class=\"w\">    </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">attachModem</span><span class=\"p\">(</span><span class=\"n\">modem</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-331\" name=\"l-331\"></a><span class=\"linenos\">331</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">setModemLED</span><span class=\"p\">(</span><span class=\"n\">modemLEDPin</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-332\" name=\"l-332\"></a><span class=\"linenos\">332</span><span class=\"w\">    </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">setLoggerPins</span><span class=\"p\">(</span><span class=\"n\">wakePin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sdCardSSPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sdCardPwrPin</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">buttonPin</span><span class=\"p\">,</span></div>\n<div class=\"line\"><a id=\"l-333\" name=\"l-333\"></a><span class=\"linenos\">333</span><span class=\"w\">                             </span><span class=\"n\">greenLED</span><span class=\"p\">);</span></div>\n<div class=\"line\"><a id=\"l-334\" name=\"l-334\"></a><span class=\"linenos\">334</span></div>\n<div class=\"line\"><a id=\"l-335\" name=\"l-335\"></a><span class=\"linenos\">335</span><span class=\"w\">    </span><span class=\"c1\">// Begin the logger</span></div>\n<div class=\"line\"><a id=\"l-336\" name=\"l-336\"></a><span class=\"linenos\">336</span><span class=\"w\">    </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"nf\">begin</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-337\" name=\"l-337\"></a><span class=\"linenos\">337</span></div>\n<div class=\"line\"><a id=\"l-338\" name=\"l-338\"></a><span class=\"linenos\">338</span><span class=\"w\">    </span><span class=\"c1\">// Note:  Please change these battery voltages to match your battery</span></div>\n<div class=\"line\"><a id=\"l-339\" name=\"l-339\"></a><span class=\"linenos\">339</span><span class=\"w\">    </span><span class=\"c1\">// Set up the sensors, except at lowest battery level</span></div>\n<div class=\"line\"><a id=\"l-340\" name=\"l-340\"></a><span class=\"linenos\">340</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">getBatteryVoltage</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mf\">3.4</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-341\" name=\"l-341\"></a><span class=\"linenos\">341</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;Setting up sensors...&quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-342\" name=\"l-342\"></a><span class=\"linenos\">342</span><span class=\"w\">        </span><span class=\"n\">varArray</span><span class=\"p\">.</span><span class=\"n\">sensorsPowerUp</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-343\" name=\"l-343\"></a><span class=\"linenos\">343</span><span class=\"w\">        </span><span class=\"n\">varArray</span><span class=\"p\">.</span><span class=\"n\">setupSensors</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-344\" name=\"l-344\"></a><span class=\"linenos\">344</span><span class=\"w\">        </span><span class=\"n\">varArray</span><span class=\"p\">.</span><span class=\"n\">sensorsPowerDown</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-345\" name=\"l-345\"></a><span class=\"linenos\">345</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-346\" name=\"l-346\"></a><span class=\"linenos\">346</span></div>\n<div class=\"line\"><a id=\"l-347\" name=\"l-347\"></a><span class=\"linenos\">347</span><span class=\"w\">    </span><span class=\"cm\">/** Start [setup_sim7080] */</span></div>\n<div class=\"line\"><a id=\"l-348\" name=\"l-348\"></a><span class=\"linenos\">348</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">setModemWakeLevel</span><span class=\"p\">(</span><span class=\"kr\">HIGH</span><span class=\"p\">);</span><span class=\"w\">   </span><span class=\"c1\">// ModuleFun Bee inverts the signal</span></div>\n<div class=\"line\"><a id=\"l-349\" name=\"l-349\"></a><span class=\"linenos\">349</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">setModemResetLevel</span><span class=\"p\">(</span><span class=\"kr\">HIGH</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// ModuleFun Bee inverts the signal</span></div>\n<div class=\"line\"><a id=\"l-350\" name=\"l-350\"></a><span class=\"linenos\">350</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;Waking modem and setting Cellular Carrier Options...&quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-351\" name=\"l-351\"></a><span class=\"linenos\">351</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">modemWake</span><span class=\"p\">();</span><span class=\"w\">  </span><span class=\"c1\">// NOTE:  This will also set up the modem</span></div>\n<div class=\"line\"><a id=\"l-352\" name=\"l-352\"></a><span class=\"linenos\">352</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">gsmModem</span><span class=\"p\">.</span><span class=\"n\">setBaud</span><span class=\"p\">(</span><span class=\"n\">modemBaud</span><span class=\"p\">);</span><span class=\"w\">   </span><span class=\"c1\">// Make sure we&#39;re *NOT* auto-bauding!</span></div>\n<div class=\"line\"><a id=\"l-353\" name=\"l-353\"></a><span class=\"linenos\">353</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">gsmModem</span><span class=\"p\">.</span><span class=\"n\">setNetworkMode</span><span class=\"p\">(</span><span class=\"mi\">38</span><span class=\"p\">);</span><span class=\"w\">   </span><span class=\"c1\">// set to LTE only</span></div>\n<div class=\"line\"><a id=\"l-354\" name=\"l-354\"></a><span class=\"linenos\">354</span><span class=\"w\">                                         </span><span class=\"c1\">// 2 Automatic</span></div>\n<div class=\"line\"><a id=\"l-355\" name=\"l-355\"></a><span class=\"linenos\">355</span><span class=\"w\">                                         </span><span class=\"c1\">// 13 GSM only</span></div>\n<div class=\"line\"><a id=\"l-356\" name=\"l-356\"></a><span class=\"linenos\">356</span><span class=\"w\">                                         </span><span class=\"c1\">// 38 LTE only</span></div>\n<div class=\"line\"><a id=\"l-357\" name=\"l-357\"></a><span class=\"linenos\">357</span><span class=\"w\">                                         </span><span class=\"c1\">// 51 GSM and LTE only</span></div>\n<div class=\"line\"><a id=\"l-358\" name=\"l-358\"></a><span class=\"linenos\">358</span><span class=\"w\">    </span><span class=\"n\">modem</span><span class=\"p\">.</span><span class=\"n\">gsmModem</span><span class=\"p\">.</span><span class=\"n\">setPreferredMode</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// set to CAT-M</span></div>\n<div class=\"line\"><a id=\"l-359\" name=\"l-359\"></a><span class=\"linenos\">359</span><span class=\"w\">                                         </span><span class=\"c1\">// 1 CAT-M</span></div>\n<div class=\"line\"><a id=\"l-360\" name=\"l-360\"></a><span class=\"linenos\">360</span><span class=\"w\">                                         </span><span class=\"c1\">// 2 NB-IoT</span></div>\n<div class=\"line\"><a id=\"l-361\" name=\"l-361\"></a><span class=\"linenos\">361</span><span class=\"w\">                                         </span><span class=\"c1\">// 3 CAT-M and NB-IoT</span></div>\n<div class=\"line\"><a id=\"l-362\" name=\"l-362\"></a><span class=\"linenos\">362</span><span class=\"w\">    </span><span class=\"cm\">/** End [setup_sim7080] */</span></div>\n<div class=\"line\"><a id=\"l-363\" name=\"l-363\"></a><span class=\"linenos\">363</span></div>\n<div class=\"line\"><a id=\"l-364\" name=\"l-364\"></a><span class=\"linenos\">364</span></div>\n<div class=\"line\"><a id=\"l-365\" name=\"l-365\"></a><span class=\"linenos\">365</span><span class=\"w\">    </span><span class=\"c1\">// Sync the clock if it isn&#39;t valid or we have battery to spare</span></div>\n<div class=\"line\"><a id=\"l-366\" name=\"l-366\"></a><span class=\"linenos\">366</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">getBatteryVoltage</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mf\">3.55</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"o\">!</span><span class=\"n\">loggerClock</span><span class=\"o\">::</span><span class=\"n\">isRTCSane</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-367\" name=\"l-367\"></a><span class=\"linenos\">367</span><span class=\"w\">        </span><span class=\"c1\">// Synchronize the RTC with NIST</span></div>\n<div class=\"line\"><a id=\"l-368\" name=\"l-368\"></a><span class=\"linenos\">368</span><span class=\"w\">        </span><span class=\"c1\">// This will also set up the modem</span></div>\n<div class=\"line\"><a id=\"l-369\" name=\"l-369\"></a><span class=\"linenos\">369</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">syncRTC</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-370\" name=\"l-370\"></a><span class=\"linenos\">370</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-371\" name=\"l-371\"></a><span class=\"linenos\">371</span></div>\n<div class=\"line\"><a id=\"l-372\" name=\"l-372\"></a><span class=\"linenos\">372</span><span class=\"w\">    </span><span class=\"c1\">// Create the log file, adding the default header to it</span></div>\n<div class=\"line\"><a id=\"l-373\" name=\"l-373\"></a><span class=\"linenos\">373</span><span class=\"w\">    </span><span class=\"c1\">// Do this last so we have the best chance of getting the time correct and</span></div>\n<div class=\"line\"><a id=\"l-374\" name=\"l-374\"></a><span class=\"linenos\">374</span><span class=\"w\">    </span><span class=\"c1\">// all sensor names correct</span></div>\n<div class=\"line\"><a id=\"l-375\" name=\"l-375\"></a><span class=\"linenos\">375</span><span class=\"w\">    </span><span class=\"c1\">// Writing to the SD card can be power intensive, so if we&#39;re skipping</span></div>\n<div class=\"line\"><a id=\"l-376\" name=\"l-376\"></a><span class=\"linenos\">376</span><span class=\"w\">    </span><span class=\"c1\">// the sensor setup we&#39;ll skip this too.</span></div>\n<div class=\"line\"><a id=\"l-377\" name=\"l-377\"></a><span class=\"linenos\">377</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">getBatteryVoltage</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"mf\">3.4</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-378\" name=\"l-378\"></a><span class=\"linenos\">378</span><span class=\"w\">        </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;Setting up file on SD card&quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-379\" name=\"l-379\"></a><span class=\"linenos\">379</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">turnOnSDcard</span><span class=\"p\">(</span></div>\n<div class=\"line\"><a id=\"l-380\" name=\"l-380\"></a><span class=\"linenos\">380</span><span class=\"w\">            </span><span class=\"kr\">true</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// true = wait for card to settle after power up</span></div>\n<div class=\"line\"><a id=\"l-381\" name=\"l-381\"></a><span class=\"linenos\">381</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">createLogFile</span><span class=\"p\">(</span><span class=\"kr\">true</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// true = write a new header</span></div>\n<div class=\"line\"><a id=\"l-382\" name=\"l-382\"></a><span class=\"linenos\">382</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">turnOffSDcard</span><span class=\"p\">(</span></div>\n<div class=\"line\"><a id=\"l-383\" name=\"l-383\"></a><span class=\"linenos\">383</span><span class=\"w\">            </span><span class=\"kr\">true</span><span class=\"p\">);</span><span class=\"w\">  </span><span class=\"c1\">// true = wait for internal housekeeping after write</span></div>\n<div class=\"line\"><a id=\"l-384\" name=\"l-384\"></a><span class=\"linenos\">384</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-385\" name=\"l-385\"></a><span class=\"linenos\">385</span></div>\n<div class=\"line\"><a id=\"l-386\" name=\"l-386\"></a><span class=\"linenos\">386</span><span class=\"w\">    </span><span class=\"c1\">// Call the processor sleep</span></div>\n<div class=\"line\"><a id=\"l-387\" name=\"l-387\"></a><span class=\"linenos\">387</span><span class=\"w\">    </span><span class=\"nf\">Serial</span><span class=\"p\">.</span><span class=\"nf\">println</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"p\">(</span><span class=\"s\">&quot;Putting processor to sleep</span><span class=\"se\">\\n</span><span class=\"s\">&quot;</span><span class=\"p\">));</span></div>\n<div class=\"line\"><a id=\"l-388\" name=\"l-388\"></a><span class=\"linenos\">388</span><span class=\"w\">    </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">systemSleep</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-389\" name=\"l-389\"></a><span class=\"linenos\">389</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-390\" name=\"l-390\"></a><span class=\"linenos\">390</span><span class=\"cm\">/** End [setup] */</span></div>\n<div class=\"line\"><a id=\"l-391\" name=\"l-391\"></a><span class=\"linenos\">391</span></div>\n<div class=\"line\"><a id=\"l-392\" name=\"l-392\"></a><span class=\"linenos\">392</span></div>\n<div class=\"line\"><a id=\"l-393\" name=\"l-393\"></a><span class=\"linenos\">393</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-394\" name=\"l-394\"></a><span class=\"linenos\">394</span><span class=\"c1\">//  Arduino Loop Function</span></div>\n<div class=\"line\"><a id=\"l-395\" name=\"l-395\"></a><span class=\"linenos\">395</span><span class=\"c1\">// ==========================================================================</span></div>\n<div class=\"line\"><a id=\"l-396\" name=\"l-396\"></a><span class=\"linenos\">396</span><span class=\"cm\">/** Start [loop] */</span></div>\n<div class=\"line\"><a id=\"l-397\" name=\"l-397\"></a><span class=\"linenos\">397</span><span class=\"c1\">// Use this short loop for simple data logging and sending</span></div>\n<div class=\"line\"><a id=\"l-398\" name=\"l-398\"></a><span class=\"linenos\">398</span><span class=\"kr\">void</span><span class=\"w\"> </span><span class=\"nb\">loop</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-399\" name=\"l-399\"></a><span class=\"linenos\">399</span><span class=\"w\">    </span><span class=\"c1\">// Note:  Please change these battery voltages to match your battery</span></div>\n<div class=\"line\"><a id=\"l-400\" name=\"l-400\"></a><span class=\"linenos\">400</span><span class=\"w\">    </span><span class=\"c1\">// At very low battery, just go back to sleep</span></div>\n<div class=\"line\"><a id=\"l-401\" name=\"l-401\"></a><span class=\"linenos\">401</span><span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">getBatteryVoltage</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">3.4</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-402\" name=\"l-402\"></a><span class=\"linenos\">402</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">systemSleep</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-403\" name=\"l-403\"></a><span class=\"linenos\">403</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-404\" name=\"l-404\"></a><span class=\"linenos\">404</span><span class=\"w\">    </span><span class=\"c1\">// At moderate voltage, log data but don&#39;t send it over the modem</span></div>\n<div class=\"line\"><a id=\"l-405\" name=\"l-405\"></a><span class=\"linenos\">405</span><span class=\"w\">    </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">getBatteryVoltage</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">3.55</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-406\" name=\"l-406\"></a><span class=\"linenos\">406</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">logData</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-407\" name=\"l-407\"></a><span class=\"linenos\">407</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-408\" name=\"l-408\"></a><span class=\"linenos\">408</span><span class=\"w\">    </span><span class=\"c1\">// If the battery is good, send the data to the world</span></div>\n<div class=\"line\"><a id=\"l-409\" name=\"l-409\"></a><span class=\"linenos\">409</span><span class=\"w\">    </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span></div>\n<div class=\"line\"><a id=\"l-410\" name=\"l-410\"></a><span class=\"linenos\">410</span><span class=\"w\">        </span><span class=\"n\">dataLogger</span><span class=\"p\">.</span><span class=\"n\">logDataAndPublish</span><span class=\"p\">();</span></div>\n<div class=\"line\"><a id=\"l-411\" name=\"l-411\"></a><span class=\"linenos\">411</span><span class=\"w\">    </span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-412\" name=\"l-412\"></a><span class=\"linenos\">412</span><span class=\"p\">}</span></div>\n<div class=\"line\"><a id=\"l-413\" name=\"l-413\"></a><span class=\"linenos\">413</span><span class=\"cm\">/** End [loop] */</span></div>\n<div class=\"line\"><a id=\"l-414\" name=\"l-414\"></a><span class=\"linenos\">414</span></div>\n<div class=\"line\"><a id=\"l-415\" name=\"l-415\"></a><span class=\"linenos\">415</span><span class=\"c1\">// cspell: ignore ediylte Turb</span>\n</div></div></div></section>",
    "sections": [
      [
        "example_drwi_ediylte_unique",
        "Unique Features of the DRWI EnviroDIY LTE Example",
        []
      ],
      [
        "example_drwi_ediylte_pio_config",
        "PlatformIO Configuration",
        []
      ],
      [
        "example_drwi_ediylte_code",
        "The Complete Code",
        []
      ]
    ],
    "deprecated": null,
    "since": null,
    "example_navigation": null,
    "footer_navigation": [
      [
        "example_drwi_mayfly1_wifi.html",
        "DRWI Sites with a Mayfly 1.x and EnviroDIY ESP32 WiFi Bee"
      ],
      [
        "page_examples_drwi.html",
        "DRWI Citizen Science"
      ],
      [
        "example_drwi_digilte.html",
        "DRWI Digi LTE Sites"
      ]
    ],
    "topics": [],
    "dirs": [],
    "files": [],
    "namespaces": [],
    "classes": [],
    "base_classes": [],
    "derived_classes": [],
    "enums": [],
    "typedefs": [],
    "funcs": [],
    "vars": [],
    "defines": [],
    "public_types": [],
    "public_static_funcs": [],
    "typeless_funcs": [],
    "public_funcs": [],
    "signals": [],
    "public_slots": [],
    "public_static_vars": [],
    "public_vars": [],
    "protected_types": [],
    "protected_static_funcs": [],
    "protected_funcs": [],
    "protected_slots": [],
    "protected_static_vars": [],
    "protected_vars": [],
    "private_funcs": [],
    "private_slots": [],
    "related": [],
    "friend_funcs": [],
    "groups": [],
    "has_enum_details": false,
    "has_typedef_details": false,
    "has_func_details": false,
    "has_var_details": false,
    "has_define_details": false,
    "breadcrumb": [
      [
        "ModularSensors",
        "index.html"
      ],
      [
        "Examples Using ModularSensors",
        "page_the_examples.html"
      ],
      [
        "DRWI Citizen Science",
        "page_examples_drwi.html"
      ],
      [
        "DRWI Sites with EnviroDIY LTE Bees",
        "example_drwi_ediylte.html"
      ]
    ],
    "breadcrumbGroup": [
      [
        "DRWI Sites with EnviroDIY LTE Bees",
        "example_drwi_ediylte.html"
      ]
    ]
  }
}